(()=>{var e={};e.id=5912,e.ids=[5912],e.modules={501:(e,s,r)=>{"use strict";r.d(s,{EditCourseForm:()=>t});let t=(0,r(55547).registerClientReference)(function(){throw Error("Attempted to call EditCourseForm() from the server but EditCourseForm is on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"/Users/sanket/Documents/LMS-Organomed copy/app/teacher/courses/[courseId]/edit/_components/EditCourseForm.tsx","EditCourseForm")},2114:(e,s,r)=>{Promise.resolve().then(r.bind(r,74168)),Promise.resolve().then(r.bind(r,501)),Promise.resolve().then(r.bind(r,98100))},3295:e=>{"use strict";e.exports=require("next/dist/server/app-render/after-task-async-storage.external.js")},4573:e=>{"use strict";e.exports=require("node:buffer")},10846:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},14985:e=>{"use strict";e.exports=require("dns")},17412:(e,s,r)=>{"use strict";r.r(s),r.d(s,{GlobalError:()=>i.a,__next_app__:()=>u,pages:()=>d,routeModule:()=>h,tree:()=>o});var t=r(6855),a=r(99880),n=r(44858),i=r.n(n),c=r(84637),l={};for(let e in c)0>["default","tree","pages","GlobalError","__next_app__","routeModule"].indexOf(e)&&(l[e]=()=>c[e]);r.d(s,l);let o={children:["",{children:["teacher",{children:["courses",{children:["[courseId]",{children:["edit",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(r.bind(r,86291)),"/Users/sanket/Documents/LMS-Organomed copy/app/teacher/courses/[courseId]/edit/page.tsx"]}]},{}]},{}]},{}]},{layout:[()=>Promise.resolve().then(r.bind(r,96583)),"/Users/sanket/Documents/LMS-Organomed copy/app/teacher/layout.tsx"],loading:[()=>Promise.resolve().then(r.bind(r,46345)),"/Users/sanket/Documents/LMS-Organomed copy/app/teacher/loading.tsx"],metadata:{icon:[async e=>(await Promise.resolve().then(r.bind(r,3107))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}]},{layout:[()=>Promise.resolve().then(r.bind(r,68166)),"/Users/sanket/Documents/LMS-Organomed copy/app/layout.tsx"],"not-found":[()=>Promise.resolve().then(r.t.bind(r,89254,23)),"next/dist/client/components/not-found-error"],forbidden:[()=>Promise.resolve().then(r.t.bind(r,55007,23)),"next/dist/client/components/forbidden-error"],unauthorized:[()=>Promise.resolve().then(r.t.bind(r,42260,23)),"next/dist/client/components/unauthorized-error"],metadata:{icon:[async e=>(await Promise.resolve().then(r.bind(r,3107))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}]}.children,d=["/Users/sanket/Documents/LMS-Organomed copy/app/teacher/courses/[courseId]/edit/page.tsx"],u={require:r,loadChunk:()=>Promise.resolve()},h=new t.AppPageRouteModule({definition:{kind:a.RouteKind.APP_PAGE,page:"/teacher/courses/[courseId]/edit/page",pathname:"/teacher/courses/[courseId]/edit",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:o}})},19121:e=>{"use strict";e.exports=require("next/dist/server/app-render/action-async-storage.external.js")},21820:e=>{"use strict";e.exports=require("os")},27910:e=>{"use strict";e.exports=require("stream")},28354:e=>{"use strict";e.exports=require("util")},29021:e=>{"use strict";e.exports=require("fs")},29294:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-async-storage.external.js")},33873:e=>{"use strict";e.exports=require("path")},34631:e=>{"use strict";e.exports=require("tls")},35979:()=>{},36210:(e,s,r)=>{Promise.resolve().then(r.bind(r,97771))},36618:(e,s,r)=>{Promise.resolve().then(r.bind(r,55238)),Promise.resolve().then(r.bind(r,81178)),Promise.resolve().then(r.bind(r,6234))},37067:e=>{"use strict";e.exports=require("node:http")},40919:(e,s,r)=>{"use strict";r.r(s),r.d(s,{"400bf70a89007c489705673c059eec250224018794":()=>x,"40c3c016d32e59e0761c7f579fb472761fa15b8e37":()=>p,"40cf82418af53ec274b24ed7d3f81765441bb44690":()=>h,"40d135f0559b559bad473e2acfb768bff56d9a01dc":()=>m,"602ca46610958f6876e46c43951870fd9de19d0890":()=>o,"60fb7ea14035305c6122f07b16ec55115443c0a833":()=>u,"706b967738b6d3c8faf851ffad244555438a8c8ea9":()=>d});var t=r(11311);r(89335);var a=r(48502),n=r(97856),i=r(79627),c=r(63388),l=r(76280);async function o(e,s){let r=await (0,a.yl)();if("teacher"===r.user.role){let e=await i.z.course.findUnique({where:{id:s},select:{userId:!0}});if(!e||e.userId!==r.user.id)return{status:"error",message:"You can only edit your own courses"}}try{let t=await (0,n.f)(r.user.id);if(!t.success)return{status:"error",message:t.error||"Security check failed"};let a=c.f_.safeParse(e);if(!a.success)return{status:"error",message:"Invalid data"};let l={id:s};return"teacher"===r.user.role&&(l.userId=r.user.id),await i.z.course.update({where:l,data:{...a.data}}),{status:"success",message:"Course updated successfully"}}catch{return{status:"error",message:"Failed to update Course"}}}async function d(e,s,r){await (0,a.yl)();try{if(!s||0===s.length)return{status:"error",message:"No lessons provided for reordering."};let t=s.map(s=>i.z.lesson.update({where:{id:s.id,chapterId:e},data:{position:s.position}}));return await i.z.$transaction(t),(0,l.revalidatePath)(`/teacher/courses/${r}/edit`),{status:"success",message:"Lessons reordered successfully"}}catch{return{status:"error",message:"Failed to reorder lessons."}}}async function u(e,s){await (0,a.yl)();try{if(!s||0===s.length)return{status:"error",message:"No chapters provided for reordering."};let r=s.map(s=>i.z.chapter.update({where:{id:s.id,courseId:e},data:{position:s.position}}));return await i.z.$transaction(r),(0,l.revalidatePath)(`/teacher/courses/${e}/edit`),{status:"success",message:"Chapters reordered successfully"}}catch{return{status:"error",message:"Failed to reorder chapters"}}}async function h(e){await (0,a.yl)();try{let s=c.HH.safeParse(e);if(!s.success)return{status:"error",message:"Invalid Data"};return await i.z.$transaction(async e=>{let r=await e.chapter.findFirst({where:{courseId:s.data.courseId},select:{position:!0},orderBy:{position:"desc"}});await e.chapter.create({data:{title:s.data.name,courseId:s.data.courseId,position:(r?.position??0)+1}})}),(0,l.revalidatePath)(`/teacher/courses/${s.data.courseId}/edit`),{status:"success",message:"Chapter created successfully"}}catch{return{status:"error",message:"Failed to create chapter"}}}async function p(e){await (0,a.yl)();try{let s=c.qz.safeParse(e);if(!s.success)return{status:"error",message:"Invalid Data"};return await i.z.$transaction(async e=>{let r=await e.lesson.findFirst({where:{chapterId:s.data.chapterId},select:{position:!0},orderBy:{position:"desc"}});await e.lesson.create({data:{title:s.data.name,description:s.data.description,videoKey:s.data.videoKey,thumbnailKey:s.data.thumbnailKey,chapterId:s.data.chapterId,position:(r?.position??0)+1}})}),(0,l.revalidatePath)(`/teacher/courses/${s.data.courseId}/edit`),{status:"success",message:"Lesson created successfully"}}catch{return{status:"error",message:"Failed to create lesson"}}}async function x({chapterId:e,courseId:s,lessonId:r}){await (0,a.yl)();try{let t=await i.z.chapter.findUnique({where:{id:e},select:{lessons:{orderBy:{position:"asc"},select:{id:!0,position:!0}}}});if(!t)return{status:"error",message:"Chapter not Found"};let a=t.lessons;if(!a.find(e=>e.id===r))return{status:"error",message:"Lesson not found in the chapter."};let n=a.filter(e=>e.id!==r).map((e,s)=>i.z.lesson.update({where:{id:e.id},data:{position:s+1}}));return await i.z.$transaction([...n,i.z.lesson.delete({where:{id:r,chapterId:e}})]),(0,l.revalidatePath)(`/teacher/courses/${s}/edit`),{status:"success",message:"Lesson deleted and positions reordered successfully"}}catch{return{status:"error",message:"Failed to delete lesson"}}}async function m({chapterId:e,courseId:s}){await (0,a.yl)();try{let r=await i.z.course.findUnique({where:{id:s},select:{chapter:{orderBy:{position:"asc"},select:{id:!0,position:!0}}}});if(!r)return{status:"error",message:"Course not Found"};let t=r.chapter;if(!t.find(s=>s.id===e))return{status:"error",message:"Chapter not found in the Course."};let a=t.filter(s=>s.id!==e).map((e,s)=>i.z.chapter.update({where:{id:e.id},data:{position:s+1}}));return await i.z.$transaction([...a,i.z.chapter.delete({where:{id:e}})]),(0,l.revalidatePath)(`/teacher/courses/${s}/edit`),{status:"success",message:"Chapter deleted and positions reordered successfully"}}catch{return{status:"error",message:"Failed to delete chapter"}}}(0,r(68675).D)([o,d,u,h,p,x,m]),(0,t.A)(o,"602ca46610958f6876e46c43951870fd9de19d0890",null),(0,t.A)(d,"706b967738b6d3c8faf851ffad244555438a8c8ea9",null),(0,t.A)(u,"60fb7ea14035305c6122f07b16ec55115443c0a833",null),(0,t.A)(h,"40cf82418af53ec274b24ed7d3f81765441bb44690",null),(0,t.A)(p,"40c3c016d32e59e0761c7f579fb472761fa15b8e37",null),(0,t.A)(x,"400bf70a89007c489705673c059eec250224018794",null),(0,t.A)(m,"40d135f0559b559bad473e2acfb768bff56d9a01dc",null)},41001:(e,s,r)=>{"use strict";r.r(s),r.d(s,{default:()=>t});let t={src:"/_next/static/media/logo.c044e8c3.png",height:512,width:512,blurDataURL:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAgAAAAICAMAAADz0U65AAAAJ1BMVEXceFnYdVfYdVXagGPdh2veeFfWbUzfkHf349zpsJ79+Pfsva7joIr6HBqnAAAAAnRSTlPrVdAYQmQAAAAJcEhZcwAACxMAAAsTAQCanBgAAAA4SURBVHicHcvHEcBADMNACqKCQ//1es4/PBYKASikSjtLIk3PIFy899XC5P6R6d3h4HkOPnuj+AAg7gD3JHdpgQAAAABJRU5ErkJggg==",blurWidth:8,blurHeight:8}},41910:(e,s,r)=>{"use strict";r.d(s,{A:()=>t});var t=(0,r(53525).A)("outline","book","IconBook",[["path",{d:"M3 19a9 9 0 0 1 9 0a9 9 0 0 1 9 0",key:"svg-0"}],["path",{d:"M3 6a9 9 0 0 1 9 0a9 9 0 0 1 9 0",key:"svg-1"}],["path",{d:"M3 6l0 13",key:"svg-2"}],["path",{d:"M12 6l0 13",key:"svg-3"}],["path",{d:"M21 6l0 13",key:"svg-4"}]])},44708:e=>{"use strict";e.exports=require("node:https")},46345:(e,s,r)=>{"use strict";r.r(s),r.d(s,{default:()=>n});var t=r(44789),a=r(62309);function n(){return(0,t.jsxs)("div",{className:"p-6 space-y-6",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsxs)("div",{className:"space-y-1",children:[(0,t.jsx)(a.E,{className:"h-8 w-64"}),(0,t.jsx)(a.E,{className:"h-4 w-full max-w-md"})]}),(0,t.jsx)(a.E,{className:"h-10 w-32"})]}),(0,t.jsx)("div",{className:"grid gap-6 md:grid-cols-3",children:Array.from({length:3}).map((e,s)=>(0,t.jsx)(a.E,{className:"h-32 rounded-xl"},s))}),(0,t.jsxs)("div",{className:"space-y-4",children:[(0,t.jsx)(a.E,{className:"h-10 w-full rounded-lg"}),Array.from({length:5}).map((e,s)=>(0,t.jsx)(a.E,{className:"h-20 w-full rounded-lg"},s))]})]})}},55238:(e,s,r)=>{"use strict";r.d(s,{CourseStructure:()=>F});var t=r(21551),a=r(34460),n=r(19971),i=r(50728),c=r(70794),l=r(73408),o=r(3413),d=r(83772),u=r(75597),h=r(94200),p=r(80112),x=r(69454);let m=(0,r(45691).A)("pencil",[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}],["path",{d:"m15 5 4 4",key:"1mk7zo"}]]);var f=r(90778),j=r(534),g=r.n(j),v=r(77111),b=r(40875);let y=(0,b.createServerReference)("60fb7ea14035305c6122f07b16ec55115443c0a833",b.callServer,void 0,b.findSourceMapURL,"reorderChapters"),C=(0,b.createServerReference)("706b967738b6d3c8faf851ffad244555438a8c8ea9",b.callServer,void 0,b.findSourceMapURL,"reorderLessons");var A=r(35694),w=r(17985),N=r(12994),S=r(68376),I=r(64722),R=r(32520),z=r(552),M=r(43532);let k=(0,b.createServerReference)("40cf82418af53ec274b24ed7d3f81765441bb44690",b.callServer,void 0,b.findSourceMapURL,"createChapter");function P({courseId:e}){let[s,r]=(0,c.useState)(!1),[a,n]=(0,c.useTransition)(),i=(0,S.mN)({resolver:(0,I.u)(w.HH),defaultValues:{name:"",courseId:e}});async function l(e){n(async()=>{let{data:s,error:t}=await (0,M.T)(k(e));if(t)return void v.oR.error("An unexpected error occurred. Please try again.");"success"===s.status?(v.oR.success(s.message),i.reset(),r(!1)):"error"===s.status&&v.oR.error(s.message)})}return(0,t.jsxs)(A.lG,{open:s,onOpenChange:function(e){e||i.reset(),r(e)},children:[(0,t.jsx)(A.zM,{asChild:!0,children:(0,t.jsxs)(f.$,{variant:"outline",size:"sm",className:"gap-2",children:[(0,t.jsx)(N.A,{className:"size-4"})," New Chapter"]})}),(0,t.jsxs)(A.Cf,{className:"sm:max-w-[425px]",children:[(0,t.jsxs)(A.c7,{children:[(0,t.jsx)(A.L3,{children:"Create new chapter"}),(0,t.jsx)(A.rr,{children:"What would you like to name your chapter?"})]}),(0,t.jsx)(R.lV,{...i,children:(0,t.jsxs)("form",{className:"space-y-8",onSubmit:i.handleSubmit(l),children:[(0,t.jsx)(R.zB,{control:i.control,name:"name",render:({field:e})=>(0,t.jsxs)(R.eI,{children:[(0,t.jsx)(R.lR,{children:"Name"}),(0,t.jsx)(R.MJ,{children:(0,t.jsx)(z.p,{placeholder:"Chapter Name",...e})}),(0,t.jsx)(R.C5,{})]})}),(0,t.jsx)(A.Es,{children:(0,t.jsx)(f.$,{disabled:a,type:"submit",children:a?"Saving...":" Save Change"})})]})})]})]})}let q=(0,b.createServerReference)("40c3c016d32e59e0761c7f579fb472761fa15b8e37",b.callServer,void 0,b.findSourceMapURL,"createLesson");function L({courseId:e,chapterId:s}){let[r,a]=(0,c.useState)(!1),[n,i]=(0,c.useTransition)(),l=(0,S.mN)({resolver:(0,I.u)(w.qz),defaultValues:{name:"",courseId:e,chapterId:s}});async function o(e){i(async()=>{let{data:s,error:r}=await (0,M.T)(q(e));if(r)return void v.oR.error("An unexpected error occurred. Please try again.");"success"===s.status?(v.oR.success(s.message),l.reset(),a(!1)):"error"===s.status&&v.oR.error(s.message)})}return(0,t.jsxs)(A.lG,{open:r,onOpenChange:function(e){e||l.reset(),a(e)},children:[(0,t.jsx)(A.zM,{asChild:!0,children:(0,t.jsxs)(f.$,{variant:"outline",className:"w-full justify-center gap-1",children:[(0,t.jsx)(N.A,{className:"size-4"})," New Lesson"]})}),(0,t.jsxs)(A.Cf,{className:"sm:max-w-[425px]",children:[(0,t.jsxs)(A.c7,{children:[(0,t.jsx)(A.L3,{children:"Create new lesson"}),(0,t.jsx)(A.rr,{children:"What would you like to name your lesson?"})]}),(0,t.jsx)(R.lV,{...l,children:(0,t.jsxs)("form",{className:"space-y-8",onSubmit:l.handleSubmit(o),children:[(0,t.jsx)(R.zB,{control:l.control,name:"name",render:({field:e})=>(0,t.jsxs)(R.eI,{children:[(0,t.jsx)(R.lR,{children:"Name"}),(0,t.jsx)(R.MJ,{children:(0,t.jsx)(z.p,{placeholder:"Lesson Name",...e})}),(0,t.jsx)(R.C5,{})]})}),(0,t.jsx)(A.Es,{children:(0,t.jsx)(f.$,{disabled:n,type:"submit",children:n?"Saving...":" Save Change"})})]})})]})]})}var B=r(19701),D=r(4401);let E=(0,b.createServerReference)("400bf70a89007c489705673c059eec250224018794",b.callServer,void 0,b.findSourceMapURL,"deleteLesson");function $({chapterId:e,courseId:s,lessonId:r}){let[a,n]=(0,c.useState)(!1),[i,l]=(0,c.useTransition)();async function o(){l(async()=>{let{data:t,error:a}=await (0,M.T)(E({chapterId:e,courseId:s,lessonId:r}));if(a)return void v.oR.error("An unexpected error occurred. Please try again.");"success"===t.status?(v.oR.success(t.message),n(!1)):"error"===t.status&&v.oR.error(t.message)})}return(0,t.jsxs)(B.Lt,{open:a,onOpenChange:n,children:[(0,t.jsx)(B.tv,{asChild:!0,children:(0,t.jsx)(f.$,{variant:"ghost",size:"icon",children:(0,t.jsx)(D.A,{className:"size-4"})})}),(0,t.jsxs)(B.EO,{children:[(0,t.jsxs)(B.wd,{children:[(0,t.jsx)(B.r7,{children:"Are you absolutely sure?"}),(0,t.jsx)(B.$v,{children:"This action cannot be undone. This will permanently delete this lesson."})]}),(0,t.jsxs)(B.ck,{children:[(0,t.jsx)(B.Zr,{children:"Cancel"}),(0,t.jsx)(f.$,{onClick:o,disabled:i,children:i?"Deleting...":"Delete"})]})]})]})}let T=(0,b.createServerReference)("40d135f0559b559bad473e2acfb768bff56d9a01dc",b.callServer,void 0,b.findSourceMapURL,"deleteChapter");function U({chapterId:e,courseId:s}){let[r,a]=(0,c.useState)(!1),[n,i]=(0,c.useTransition)();async function l(){i(async()=>{let{data:r,error:t}=await (0,M.T)(T({chapterId:e,courseId:s}));if(t)return void v.oR.error("An unexpected error occurred. Please try again.");"success"===r.status?(v.oR.success(r.message),a(!1)):"error"===r.status&&v.oR.error(r.message)})}return(0,t.jsxs)(B.Lt,{open:r,onOpenChange:a,children:[(0,t.jsx)(B.tv,{asChild:!0,children:(0,t.jsx)(f.$,{variant:"ghost",size:"icon",children:(0,t.jsx)(D.A,{className:"size-4"})})}),(0,t.jsxs)(B.EO,{children:[(0,t.jsxs)(B.wd,{children:[(0,t.jsx)(B.r7,{children:"Are you absolutely sure?"}),(0,t.jsx)(B.$v,{children:"This action cannot be undone. This will permanently delete this Chapter."})]}),(0,t.jsxs)(B.ck,{children:[(0,t.jsx)(B.Zr,{children:"Cancel"}),(0,t.jsx)(f.$,{onClick:l,disabled:n,children:n?"Deleting...":"Delete"})]})]})]})}function F({data:e}){let s=e.chapter.map(e=>({id:e.id,title:e.title,order:e.position,isOpen:!0,lessons:e.lessons.map(e=>({id:e.id,title:e.title,order:e.position}))}))||[],[r,j]=(0,c.useState)(s);function b({children:e,id:s,className:r,data:a}){let{attributes:n,listeners:c,setNodeRef:d,transform:u,transition:h,isDragging:p}=(0,i.gl)({id:s,data:a}),x={transform:l.Ks.Transform.toString(u),transition:h};return(0,t.jsx)("div",{ref:d,style:x,...n,className:(0,o.cn)("touch-none",r,p?"z-10":""),children:e(c)})}console.log(r);let A=(0,n.FR)((0,n.MS)(n.AN),(0,n.MS)(n.uN,{coordinateGetter:i.JR}));return(0,t.jsx)(n.Mp,{collisionDetection:n.Qo,onDragEnd:function(s){let{active:t,over:a}=s;if(!a||t.id===a.id)return;let n=t.id,c=a.id,l=t.data.current?.type,o=a.data.current?.type,d=e.id;if("chapter"===l){let e=null;if("chapter"===o?e=c:"lesson"===o&&(e=a.data.current?.chapterId??null),!e)return void v.oR.error("Could not determine target chapter for reordering.");let s=r.findIndex(e=>e.id===n),t=r.findIndex(s=>s.id===e);if(-1===s||-1===t)return void v.oR.error("Could not find chapter old/new index for reordering.");let l=(0,i.be)(r,s,t).map((e,s)=>({...e,order:s+1})),u=[...r];if(j(l),d){let e=l.map(e=>({id:e.id,position:e.order}));v.oR.promise(y(d,e),{loading:"Reordering chapters...",success:e=>{if("success"===e.status)return e.message;throw Error(e.message)},error:()=>(j(u),"Failed to reorder chapters.")})}return}if("lesson"===l&&"lesson"===o){let e=t.data.current?.chapterId,s=a.data.current?.chapterId;if(!e||e!==s)return void v.oR.error("Lesson move between different chapters or invalid chapter ID is not allowed.");let l=r.findIndex(s=>s.id===e);if(-1===l)return void v.oR.error("Could not find chapter for lesson reordering.");let o=r[l],u=o.lessons.findIndex(e=>e.id===n),h=o.lessons.findIndex(e=>e.id===c);if(-1===u||-1===h)return void v.oR.error("Could not find lesson for reordering.");let p=(0,i.be)(o.lessons,u,h).map((e,s)=>({...e,order:s+1})),x=[...r];x[l]={...o,lessons:p};let m=[...r];if(j(x),d){let s=p.map(e=>({id:e.id,position:e.order}));v.oR.promise(C(e,s,d),{loading:"Reordering lessons...",success:e=>{if("success"===e.status)return e.message;throw Error(e.message)},error:()=>(j(m),"Failed to reorder lessons.")})}return}},sensors:A,children:(0,t.jsxs)(a.Zp,{children:[(0,t.jsxs)(a.aR,{className:"flex flex-row items-center justify-between border-b border-border",children:[(0,t.jsx)(a.ZB,{children:"Chapters"}),(0,t.jsx)(P,{courseId:e.id})]}),(0,t.jsx)(a.Wu,{className:"space-y-8",children:(0,t.jsx)(i.gB,{items:r,strategy:i._G,children:r.map(s=>(0,t.jsx)(b,{id:s.id,data:{type:"chapter"},children:n=>(0,t.jsx)(a.Zp,{children:(0,t.jsxs)(d.Nt,{open:s.isOpen,onOpenChange:()=>{var e;return e=s.id,void j(r.map(s=>s.id===e?{...s,isOpen:!s.isOpen}:s))},children:[(0,t.jsxs)("div",{className:"flex items-center justify-between p-3 border-b border-border",children:[(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)(f.$,{variant:"ghost",size:"icon",...n,children:(0,t.jsx)(u.A,{className:"size-4"})}),(0,t.jsx)(d.R6,{asChild:!0,children:(0,t.jsx)(f.$,{size:"icon",variant:"ghost",className:"flex items-center",children:s.isOpen?(0,t.jsx)(h.A,{className:"size-4"}):(0,t.jsx)(p.A,{className:"size-4"})})}),(0,t.jsx)("p",{className:"cursor-pointer hover:text-primary pl-2",children:s.title})]}),(0,t.jsx)(U,{chapterId:s.id,courseId:e.id})]}),(0,t.jsx)(d.Ke,{children:(0,t.jsxs)("div",{className:"p-1",children:[(0,t.jsx)(i.gB,{items:s.lessons.map(e=>e.id),strategy:i._G,children:s.lessons.map(r=>(0,t.jsx)(b,{id:r.id,data:{type:"lesson",chapterId:s.id},children:a=>(0,t.jsxs)("div",{className:"flex items-center justify-between p-2 hover:bg-accent rounded-sm",children:[(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)(f.$,{variant:"ghost",size:"icon",...a,children:(0,t.jsx)(u.A,{className:"size-4"})}),(0,t.jsx)(x.A,{className:"size-4"}),(0,t.jsx)(g(),{href:`/teacher/courses/${e.id}/${s.id}/${r.id}`,children:r.title})]}),(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)(g(),{href:`/teacher/courses/${e.id}/${s.id}/${r.id}`,children:(0,t.jsxs)(f.$,{size:"icon",variant:"ghost",children:[(0,t.jsxs)("g",{children:[(0,t.jsx)("path",{d:"M17 3a2.85 2.83 0 1 1 4 4L7.5 20.5 2 22l1.5-5.5Z"}),(0,t.jsx)("path",{d:"m15 5 4 4"})]},"edit-icon"),(0,t.jsx)(m,{className:"size-4"})]})}),(0,t.jsx)($,{chapterId:s.id,courseId:e.id,lessonId:r.id})]})]})},r.id))}),(0,t.jsx)("div",{className:"p-2",children:(0,t.jsx)(L,{chapterId:s.id,courseId:e.id})})]})})]})})},s.id))})})]})})}},55511:e=>{"use strict";e.exports=require("crypto")},55591:e=>{"use strict";e.exports=require("https")},57975:e=>{"use strict";e.exports=require("node:util")},62309:(e,s,r)=>{"use strict";r.d(s,{E:()=>n});var t=r(44789),a=r(51499);function n({className:e,...s}){return(0,t.jsx)("div",{"data-slot":"skeleton",className:(0,a.cn)("bg-accent animate-pulse rounded-md",e),...s})}},63033:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-unit-async-storage.external.js")},71499:(e,s,r)=>{"use strict";r.d(s,{A:()=>t});var t=(0,r(53525).A)("outline","calendar","IconCalendar",[["path",{d:"M4 7a2 2 0 0 1 2 -2h12a2 2 0 0 1 2 2v12a2 2 0 0 1 -2 2h-12a2 2 0 0 1 -2 -2v-12z",key:"svg-0"}],["path",{d:"M16 3v4",key:"svg-1"}],["path",{d:"M8 3v4",key:"svg-2"}],["path",{d:"M4 11h16",key:"svg-3"}],["path",{d:"M11 15h1",key:"svg-4"}],["path",{d:"M12 15v3",key:"svg-5"}]])},74075:e=>{"use strict";e.exports=require("zlib")},74168:(e,s,r)=>{"use strict";r.d(s,{CourseStructure:()=>t});let t=(0,r(55547).registerClientReference)(function(){throw Error("Attempted to call CourseStructure() from the server but CourseStructure is on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"/Users/sanket/Documents/LMS-Organomed copy/app/teacher/courses/[courseId]/edit/_components/CourseStructure.tsx","CourseStructure")},77598:e=>{"use strict";e.exports=require("node:crypto")},78474:e=>{"use strict";e.exports=require("node:events")},79551:e=>{"use strict";e.exports=require("url")},79646:e=>{"use strict";e.exports=require("child_process")},81178:(e,s,r)=>{"use strict";r.d(s,{EditCourseForm:()=>N});var t=r(21551),a=r(90778),n=r(17985),i=r(60458),c=r(97662),l=r(12994),o=r(68376),d=r(64722),u=r(32520),h=r(552),p=r(73134),x=r.n(p),m=r(26348),f=r(11986),j=r(18056),g=r(14674),v=r(70794),b=r(43532),y=r(77111),C=r(31965),A=r(40875);let w=(0,A.createServerReference)("602ca46610958f6876e46c43951870fd9de19d0890",A.callServer,void 0,A.findSourceMapURL,"editCourse");function N({data:e}){let[s,r]=(0,v.useTransition)(),p=(0,C.useRouter)(),A=(0,o.mN)({resolver:(0,d.u)(n.f_),defaultValues:{title:e.title,description:e.description,fileKey:e.fileKey,price:e.price,duration:e.duration,level:e.level,category:e.category,status:e.status,slug:e.slug,smallDescription:e.smallDescription}});return(0,t.jsx)(u.lV,{...A,children:(0,t.jsxs)("form",{className:"space-y-6",onSubmit:A.handleSubmit(function(s){r(async()=>{let{data:r,error:t}=await (0,b.T)(w(s,e.id));if(t)return void y.oR.error("An unexpected error occurred. Please try again.");"success"===r.status?(y.oR.success(r.message),A.reset(),p.push("/teacher/courses")):"error"===r.status&&y.oR.error(r.message)})}),children:[(0,t.jsx)(u.zB,{control:A.control,name:"title",render:({field:e})=>(0,t.jsxs)(u.eI,{children:[(0,t.jsx)(u.lR,{children:"Title"}),(0,t.jsx)(u.MJ,{children:(0,t.jsx)(h.p,{placeholder:"Title",...e})}),(0,t.jsx)(u.C5,{})]})}),(0,t.jsxs)("div",{className:"flex gap-4 items-end",children:[(0,t.jsx)(u.zB,{control:A.control,name:"slug",render:({field:e})=>(0,t.jsxs)(u.eI,{className:"w-full",children:[(0,t.jsx)(u.lR,{children:"Slug"}),(0,t.jsx)(u.MJ,{children:(0,t.jsx)(h.p,{placeholder:"Slug",...e})}),(0,t.jsx)(u.C5,{})]})}),(0,t.jsxs)(a.$,{type:"button",className:"w-fit",onClick:()=>{let e=A.getValues("title"),s=x()(e);A.setValue("slug",s,{shouldValidate:!0})},children:["Generate Slug ",(0,t.jsx)(i.A,{className:"ml-1",size:16})]})]}),(0,t.jsx)(u.zB,{control:A.control,name:"smallDescription",render:({field:e})=>(0,t.jsxs)(u.eI,{className:"w-full",children:[(0,t.jsx)(u.lR,{children:"Small Description"}),(0,t.jsx)(u.MJ,{children:(0,t.jsx)(m.T,{placeholder:"Small Description",className:"min-h-[120px]",...e})}),(0,t.jsx)(u.C5,{})]})}),(0,t.jsx)(u.zB,{control:A.control,name:"description",render:({field:e})=>(0,t.jsxs)(u.eI,{className:"w-full",children:[(0,t.jsx)(u.lR,{children:"Description"}),(0,t.jsx)(u.MJ,{children:(0,t.jsx)(j.d,{field:e})}),(0,t.jsx)(u.C5,{})]})}),(0,t.jsx)(u.zB,{control:A.control,name:"fileKey",render:({field:e})=>(0,t.jsxs)(u.eI,{className:"w-full",children:[(0,t.jsx)(u.lR,{children:"Thumbnail image"}),(0,t.jsx)(u.MJ,{children:(0,t.jsx)(g.d,{fileTypeAccepted:"image",onChange:e.onChange,value:e.value})}),(0,t.jsx)(u.C5,{})]})}),(0,t.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,t.jsx)(u.zB,{control:A.control,name:"category",render:({field:e})=>(0,t.jsxs)(u.eI,{className:"w-full",children:[(0,t.jsx)(u.lR,{children:"Category"}),(0,t.jsxs)(f.l6,{onValueChange:e.onChange,defaultValue:e.value,children:[(0,t.jsx)(u.MJ,{children:(0,t.jsx)(f.bq,{className:"w-full",children:(0,t.jsx)(f.yv,{placeholder:"Select Category"})})}),(0,t.jsx)(f.gC,{children:n.Oo.map(e=>(0,t.jsx)(f.eb,{value:e,children:e},e))})]}),(0,t.jsx)(u.C5,{})]})}),(0,t.jsx)(u.zB,{control:A.control,name:"level",render:({field:e})=>(0,t.jsxs)(u.eI,{className:"w-full",children:[(0,t.jsx)(u.lR,{children:"Level"}),(0,t.jsxs)(f.l6,{onValueChange:e.onChange,defaultValue:e.value,children:[(0,t.jsx)(u.MJ,{children:(0,t.jsx)(f.bq,{className:"w-full",children:(0,t.jsx)(f.yv,{placeholder:"Select Value"})})}),(0,t.jsx)(f.gC,{children:n.Ps.map(e=>(0,t.jsx)(f.eb,{value:e,children:e},e))})]}),(0,t.jsx)(u.C5,{})]})}),(0,t.jsx)(u.zB,{control:A.control,name:"duration",render:({field:e})=>(0,t.jsxs)(u.eI,{className:"w-full",children:[(0,t.jsx)(u.lR,{children:"Duration (hours)"}),(0,t.jsx)(u.MJ,{children:(0,t.jsx)(h.p,{placeholder:"Duration",type:"number",...e})}),(0,t.jsx)(u.C5,{})]})}),(0,t.jsx)(u.zB,{control:A.control,name:"price",render:({field:e})=>(0,t.jsxs)(u.eI,{className:"w-full",children:[(0,t.jsx)(u.lR,{children:"Price ($)"}),(0,t.jsx)(u.MJ,{children:(0,t.jsx)(h.p,{placeholder:"Price",type:"number",...e})}),(0,t.jsx)(u.C5,{})]})})]}),(0,t.jsx)(u.zB,{control:A.control,name:"status",render:({field:e})=>(0,t.jsxs)(u.eI,{className:"w-full",children:[(0,t.jsx)(u.lR,{children:"Status"}),(0,t.jsxs)(f.l6,{onValueChange:e.onChange,defaultValue:e.value,children:[(0,t.jsx)(u.MJ,{children:(0,t.jsx)(f.bq,{className:"w-full",children:(0,t.jsx)(f.yv,{placeholder:"Select Status"})})}),(0,t.jsx)(f.gC,{children:n.Ik.map(e=>(0,t.jsx)(f.eb,{value:e,children:e},e))})]}),(0,t.jsx)(u.C5,{})]})}),(0,t.jsx)(a.$,{type:"submit",disabled:s,children:s?(0,t.jsxs)(t.Fragment,{children:["Updating...",(0,t.jsx)(c.A,{className:"animate-spin ml-1"})]}):(0,t.jsxs)(t.Fragment,{children:["Update Course ",(0,t.jsx)(l.A,{className:"ml-1",size:16})]})})]})})}},81630:e=>{"use strict";e.exports=require("http")},86291:(e,s,r)=>{"use strict";r.r(s),r.d(s,{default:()=>o});var t=r(44789),a=r(78963),n=r(9158),i=r(98100),c=r(501),l=r(74168);async function o({params:e}){let{courseId:s}=await e,r=await (0,a.r)(s);return(0,t.jsxs)("div",{children:[(0,t.jsxs)("h1",{className:"text-3xl font-bold mb-8",children:["Edit Course:"," ",(0,t.jsx)("span",{className:"text-primary underline",children:r.title})]}),(0,t.jsxs)(i.Tabs,{defaultValue:"basic-info",className:"w-full",children:[(0,t.jsxs)(i.TabsList,{className:"grid grid-cols-2 w-full",children:[(0,t.jsx)(i.TabsTrigger,{value:"basic-info",children:"Basic Info"}),(0,t.jsx)(i.TabsTrigger,{value:"course-structure",children:"Course Structure"})]}),(0,t.jsx)(i.TabsContent,{value:"basic-info",children:(0,t.jsxs)(n.Zp,{children:[(0,t.jsxs)(n.aR,{children:[(0,t.jsx)(n.ZB,{children:"Basic Info"}),(0,t.jsx)(n.BT,{children:"Provide basic information about the course"})]}),(0,t.jsx)(n.Wu,{children:(0,t.jsx)(c.EditCourseForm,{data:r})})]})}),(0,t.jsx)(i.TabsContent,{value:"course-structure",children:(0,t.jsxs)(n.Zp,{children:[(0,t.jsxs)(n.aR,{children:[(0,t.jsx)(n.ZB,{children:"Course Structure"}),(0,t.jsx)(n.BT,{children:"Here you can update your Course Structure"})]}),(0,t.jsx)(n.Wu,{children:(0,t.jsx)(l.CourseStructure,{data:r})})]})})]})]})}},91645:e=>{"use strict";e.exports=require("net")},94735:e=>{"use strict";e.exports=require("events")},95651:()=>{},96298:(e,s,r)=>{"use strict";r.d(s,{A:()=>t});var t=(0,r(53525).A)("outline","message","IconMessage",[["path",{d:"M8 9h8",key:"svg-0"}],["path",{d:"M8 13h6",key:"svg-1"}],["path",{d:"M18 4a3 3 0 0 1 3 3v8a3 3 0 0 1 -3 3h-5l-5 3v-3h-2a3 3 0 0 1 -3 -3v-8a3 3 0 0 1 3 -3h12z",key:"svg-2"}]])},96330:e=>{"use strict";e.exports=require("@prisma/client")},96458:(e,s,r)=>{Promise.resolve().then(r.bind(r,96583))},96583:(e,s,r)=>{"use strict";r.r(s),r.d(s,{default:()=>t});let t=(0,r(55547).registerClientReference)(function(){throw Error("Attempted to call the default export of \"/Users/sanket/Documents/LMS-Organomed copy/app/teacher/layout.tsx\" from the server, but it's on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"/Users/sanket/Documents/LMS-Organomed copy/app/teacher/layout.tsx","default")},97771:(e,s,r)=>{"use strict";r.r(s),r.d(s,{default:()=>G});var t=r(21551),a=r(70794),n=r(35479),i=r(53525),c=(0,i.A)("outline","user","IconUser",[["path",{d:"M8 7a4 4 0 1 0 8 0a4 4 0 0 0 -8 0",key:"svg-0"}],["path",{d:"M6 21v-2a4 4 0 0 1 4 -4h4a4 4 0 0 1 4 4v2",key:"svg-1"}]]),l=r(41910),o=(0,i.A)("outline","plus","IconPlus",[["path",{d:"M12 5l0 14",key:"svg-0"}],["path",{d:"M5 12l14 0",key:"svg-1"}]]),d=r(50082),u=r(30519),h=r(602),p=(0,i.A)("outline","shield","IconShield",[["path",{d:"M12 3a12 12 0 0 0 8.5 3a12 12 0 0 1 -8.5 15a12 12 0 0 1 -8.5 -15a12 12 0 0 0 8.5 -3",key:"svg-0"}]]),x=r(94434),m=r(28724),f=r(14722),j=r(96298),g=r(94),v=r(71499),b=r(74238),y=r(81761),C=r(41001),A=r(86687),w=r(72296),N=r(89593),S=r(84294),I=r(534),R=r.n(I),z=r(13962);let M={navMain:[{title:"Dashboard",url:"/teacher",icon:n.A},{title:"Profile",url:"/teacher/profile",icon:c},{title:"My Courses",url:"/teacher/courses",icon:l.A},{title:"Create Course",url:"/teacher/courses/create",icon:o},{title:"Live Sessions",url:"/teacher/sessions",icon:d.A},{title:"Students",url:"/teacher/students",icon:u.A},{title:"Analytics",url:"/teacher/analytics",icon:h.A},{title:"Profile Verification",url:"/teacher/verification",icon:p},{title:"Payouts & Earnings",url:"/teacher/payouts",icon:x.A},{title:"Quizzes",url:"/teacher/quizzes",icon:m.A},{title:"Resources",url:"/teacher/resources",icon:f.A},{title:"Messages",url:"/teacher/messages",icon:j.A},{title:"Notifications",url:"/teacher/notifications",icon:g.A},{title:"Calendar",url:"/teacher/calendar",icon:v.A}],navSecondary:[{title:"Settings",url:"/teacher/settings",icon:b.A},{title:"Get Help",url:"/teacher/help",icon:m.A},{title:"Search",url:"#",icon:y.A}]};function k({...e}){return(0,t.jsxs)(S.Bx,{collapsible:"offcanvas",...e,children:[(0,t.jsx)(S.Gh,{children:(0,t.jsx)(S.wZ,{children:(0,t.jsx)(S.FX,{children:(0,t.jsx)(S.Uj,{asChild:!0,className:"data-[slot=sidebar-menu-button]:!p-1.5",children:(0,t.jsxs)(R(),{href:"/teacher",children:[(0,t.jsx)(z.default,{src:C.default,alt:"Logo",className:"size-5"}),(0,t.jsx)("span",{className:"text-base font-semibold",children:"KIDOKOOL."})]})})})})}),(0,t.jsxs)(S.Yv,{children:[(0,t.jsx)(A.J,{items:M.navMain}),(0,t.jsx)(w.e,{items:M.navSecondary,className:"mt-auto"})]}),(0,t.jsx)(S.CG,{children:(0,t.jsx)(N.r,{})})]})}var P=r(39461),q=r(26864),L=r(80112),B=r(3413);function D({...e}){return(0,t.jsx)("nav",{"aria-label":"breadcrumb","data-slot":"breadcrumb",...e})}function E({className:e,...s}){return(0,t.jsx)("ol",{"data-slot":"breadcrumb-list",className:(0,B.cn)("text-muted-foreground flex flex-wrap items-center gap-1.5 text-sm break-words sm:gap-2.5",e),...s})}function $({className:e,...s}){return(0,t.jsx)("li",{"data-slot":"breadcrumb-item",className:(0,B.cn)("inline-flex items-center gap-1.5",e),...s})}function T({asChild:e,className:s,...r}){let a=e?q.DX:"a";return(0,t.jsx)(a,{"data-slot":"breadcrumb-link",className:(0,B.cn)("hover:text-foreground transition-colors",s),...r})}function U({className:e,...s}){return(0,t.jsx)("span",{"data-slot":"breadcrumb-page",role:"link","aria-disabled":"true","aria-current":"page",className:(0,B.cn)("text-foreground font-normal",e),...s})}function F({children:e,className:s,...r}){return(0,t.jsx)("li",{"data-slot":"breadcrumb-separator",role:"presentation","aria-hidden":"true",className:(0,B.cn)("[&>svg]:size-3.5",s),...r,children:e??(0,t.jsx)(L.A,{})})}var O=r(16226),V=r(31965),_=r(97662),J=r(3910);function G({children:e}){let{data:s,isPending:r}=(0,O.A)();(0,V.useRouter)();let[n,i]=(0,a.useState)(!1);return!n||r?(0,t.jsx)("div",{className:"min-h-screen flex items-center justify-center",children:(0,t.jsx)(_.A,{className:"h-8 w-8 animate-spin"})}):s&&("teacher"===s.user.role||"admin"===s.user.role)?(0,t.jsxs)(S.GB,{children:[(0,t.jsx)(k,{}),(0,t.jsxs)(S.sF,{children:[(0,t.jsxs)("header",{className:"flex h-16 shrink-0 items-center gap-2 border-b px-4",children:[(0,t.jsx)(S.x2,{className:"-ml-1"}),(0,t.jsx)(P.Separator,{orientation:"vertical",className:"mr-2 h-4"}),(0,t.jsx)(D,{children:(0,t.jsxs)(E,{children:[(0,t.jsx)($,{className:"hidden md:block",children:(0,t.jsx)(T,{href:"/teacher",children:"Teacher Dashboard"})}),(0,t.jsx)(F,{className:"hidden md:block"}),(0,t.jsx)($,{children:(0,t.jsx)(U,{children:"Dashboard"})})]})}),(0,t.jsx)("div",{className:"ml-auto flex items-center gap-2",children:(0,t.jsx)(J.U,{})})]}),(0,t.jsx)("div",{className:"flex flex-1 flex-col gap-4 p-4",children:e})]})]}):null}}};var s=require("../../../../../webpack-runtime.js");s.C(e);var r=e=>s(s.s=e),t=s.X(0,[7991,2692,1135,3831,1123,9716,5130,32,6972,6726,4213,6727,1167,817,5757,6280,3781,8825,2278,2148,348,2992,580,2730,3027,979],()=>r(17412));module.exports=t})();