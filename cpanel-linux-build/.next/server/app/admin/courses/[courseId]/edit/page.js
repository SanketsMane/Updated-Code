(()=>{var e={};e.id=6997,e.ids=[6997],e.modules={3295:e=>{"use strict";e.exports=require("next/dist/server/app-render/after-task-async-storage.external.js")},4573:e=>{"use strict";e.exports=require("node:buffer")},6346:(e,s,r)=>{"use strict";r.r(s),r.d(s,{GlobalError:()=>n.a,__next_app__:()=>u,pages:()=>d,routeModule:()=>h,tree:()=>o});var t=r(6855),a=r(99880),i=r(44858),n=r.n(i),c=r(84637),l={};for(let e in c)0>["default","tree","pages","GlobalError","__next_app__","routeModule"].indexOf(e)&&(l[e]=()=>c[e]);r.d(s,l);let o={children:["",{children:["admin",{children:["courses",{children:["[courseId]",{children:["edit",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(r.bind(r,18058)),"/Users/sanket/Documents/LMS-Organomed copy/app/admin/courses/[courseId]/edit/page.tsx"]}]},{}]},{}]},{}]},{layout:[()=>Promise.resolve().then(r.bind(r,93794)),"/Users/sanket/Documents/LMS-Organomed copy/app/admin/layout.tsx"],metadata:{icon:[async e=>(await Promise.resolve().then(r.bind(r,3107))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}]},{layout:[()=>Promise.resolve().then(r.bind(r,68166)),"/Users/sanket/Documents/LMS-Organomed copy/app/layout.tsx"],"not-found":[()=>Promise.resolve().then(r.t.bind(r,89254,23)),"next/dist/client/components/not-found-error"],forbidden:[()=>Promise.resolve().then(r.t.bind(r,55007,23)),"next/dist/client/components/forbidden-error"],unauthorized:[()=>Promise.resolve().then(r.t.bind(r,42260,23)),"next/dist/client/components/unauthorized-error"],metadata:{icon:[async e=>(await Promise.resolve().then(r.bind(r,3107))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}]}.children,d=["/Users/sanket/Documents/LMS-Organomed copy/app/admin/courses/[courseId]/edit/page.tsx"],u={require:r,loadChunk:()=>Promise.resolve()},h=new t.AppPageRouteModule({definition:{kind:a.RouteKind.APP_PAGE,page:"/admin/courses/[courseId]/edit/page",pathname:"/admin/courses/[courseId]/edit",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:o}})},8205:(e,s,r)=>{"use strict";r.d(s,{CourseStructure:()=>F});var t=r(21551),a=r(34460),i=r(19971),n=r(50728),c=r(70794),l=r(73408),o=r(3413),d=r(83772),u=r(75597),h=r(94200),p=r(80112),m=r(69454),x=r(90778),f=r(534),j=r.n(f),v=r(77111),g=r(40875);let y=(0,g.createServerReference)("60f65f610d6ca489b7f0ae555312ce7609f6a99b84",g.callServer,void 0,g.findSourceMapURL,"reorderChapters"),b=(0,g.createServerReference)("70cf19e76e2a9812f8ff013cb30c4331a9053977d6",g.callServer,void 0,g.findSourceMapURL,"reorderLessons");var C=r(35694),w=r(17985),N=r(12994),S=r(68376),I=r(64722),A=r(32520),R=r(552),z=r(43532);let M=(0,g.createServerReference)("40a69f79ffdf5af2ada5fe166ad907fc82e862c9af",g.callServer,void 0,g.findSourceMapURL,"createChapter");function k({courseId:e}){let[s,r]=(0,c.useState)(!1),[a,i]=(0,c.useTransition)(),n=(0,S.mN)({resolver:(0,I.u)(w.HH),defaultValues:{name:"",courseId:e}});async function l(e){i(async()=>{let{data:s,error:t}=await (0,z.T)(M(e));if(t)return void v.oR.error("An unexpected error occurred. Please try again.");"success"===s.status?(v.oR.success(s.message),n.reset(),r(!1)):"error"===s.status&&v.oR.error(s.message)})}return(0,t.jsxs)(C.lG,{open:s,onOpenChange:function(e){e||n.reset(),r(e)},children:[(0,t.jsx)(C.zM,{asChild:!0,children:(0,t.jsxs)(x.$,{variant:"outline",size:"sm",className:"gap-2",children:[(0,t.jsx)(N.A,{className:"size-4"})," New Chapter"]})}),(0,t.jsxs)(C.Cf,{className:"sm:max-w-[425px]",children:[(0,t.jsxs)(C.c7,{children:[(0,t.jsx)(C.L3,{children:"Create new chapter"}),(0,t.jsx)(C.rr,{children:"What would you like to name your chapter?"})]}),(0,t.jsx)(A.lV,{...n,children:(0,t.jsxs)("form",{className:"space-y-8",onSubmit:n.handleSubmit(l),children:[(0,t.jsx)(A.zB,{control:n.control,name:"name",render:({field:e})=>(0,t.jsxs)(A.eI,{children:[(0,t.jsx)(A.lR,{children:"Name"}),(0,t.jsx)(A.MJ,{children:(0,t.jsx)(R.p,{placeholder:"Chapter Name",...e})}),(0,t.jsx)(A.C5,{})]})}),(0,t.jsx)(C.Es,{children:(0,t.jsx)(x.$,{disabled:a,type:"submit",children:a?"Saving...":" Save Change"})})]})})]})]})}let P=(0,g.createServerReference)("40c3ac24cd0c44b98aeb1c36d351885ff15e29f361",g.callServer,void 0,g.findSourceMapURL,"createLesson");function q({courseId:e,chapterId:s}){let[r,a]=(0,c.useState)(!1),[i,n]=(0,c.useTransition)(),l=(0,S.mN)({resolver:(0,I.u)(w.qz),defaultValues:{name:"",courseId:e,chapterId:s}});async function o(e){n(async()=>{let{data:s,error:r}=await (0,z.T)(P(e));if(r)return void v.oR.error("An unexpected error occurred. Please try again.");"success"===s.status?(v.oR.success(s.message),l.reset(),a(!1)):"error"===s.status&&v.oR.error(s.message)})}return(0,t.jsxs)(C.lG,{open:r,onOpenChange:function(e){e||l.reset(),a(e)},children:[(0,t.jsx)(C.zM,{asChild:!0,children:(0,t.jsxs)(x.$,{variant:"outline",className:"w-full justify-center gap-1",children:[(0,t.jsx)(N.A,{className:"size-4"})," New Lesson"]})}),(0,t.jsxs)(C.Cf,{className:"sm:max-w-[425px]",children:[(0,t.jsxs)(C.c7,{children:[(0,t.jsx)(C.L3,{children:"Create new lesson"}),(0,t.jsx)(C.rr,{children:"What would you like to name your lesson?"})]}),(0,t.jsx)(A.lV,{...l,children:(0,t.jsxs)("form",{className:"space-y-8",onSubmit:l.handleSubmit(o),children:[(0,t.jsx)(A.zB,{control:l.control,name:"name",render:({field:e})=>(0,t.jsxs)(A.eI,{children:[(0,t.jsx)(A.lR,{children:"Name"}),(0,t.jsx)(A.MJ,{children:(0,t.jsx)(R.p,{placeholder:"Lesson Name",...e})}),(0,t.jsx)(A.C5,{})]})}),(0,t.jsx)(C.Es,{children:(0,t.jsx)(x.$,{disabled:i,type:"submit",children:i?"Saving...":" Save Change"})})]})})]})]})}var L=r(19701),D=r(4401);let T=(0,g.createServerReference)("400da89100055ff1642dbe32c67a8079ec7dfc29ed",g.callServer,void 0,g.findSourceMapURL,"deleteLesson");function $({chapterId:e,courseId:s,lessonId:r}){let[a,i]=(0,c.useState)(!1),[n,l]=(0,c.useTransition)();async function o(){l(async()=>{let{data:t,error:a}=await (0,z.T)(T({chapterId:e,courseId:s,lessonId:r}));if(a)return void v.oR.error("An unexpected error occurred. Please try again.");"success"===t.status?(v.oR.success(t.message),i(!1)):"error"===t.status&&v.oR.error(t.message)})}return(0,t.jsxs)(L.Lt,{open:a,onOpenChange:i,children:[(0,t.jsx)(L.tv,{asChild:!0,children:(0,t.jsx)(x.$,{variant:"ghost",size:"icon",children:(0,t.jsx)(D.A,{className:"size-4"})})}),(0,t.jsxs)(L.EO,{children:[(0,t.jsxs)(L.wd,{children:[(0,t.jsx)(L.r7,{children:"Are you absolutely sure?"}),(0,t.jsx)(L.$v,{children:"This action cannot be undone. This will permanently delete this lesson."})]}),(0,t.jsxs)(L.ck,{children:[(0,t.jsx)(L.Zr,{children:"Cancel"}),(0,t.jsx)(x.$,{onClick:o,disabled:n,children:n?"Deleting...":"Delete"})]})]})]})}let O=(0,g.createServerReference)("4033229bf78ea52ec0c7689d41ae4ce603ff8dfe54",g.callServer,void 0,g.findSourceMapURL,"deleteChapter");function B({chapterId:e,courseId:s}){let[r,a]=(0,c.useState)(!1),[i,n]=(0,c.useTransition)();async function l(){n(async()=>{let{data:r,error:t}=await (0,z.T)(O({chapterId:e,courseId:s}));if(t)return void v.oR.error("An unexpected error occurred. Please try again.");"success"===r.status?(v.oR.success(r.message),a(!1)):"error"===r.status&&v.oR.error(r.message)})}return(0,t.jsxs)(L.Lt,{open:r,onOpenChange:a,children:[(0,t.jsx)(L.tv,{asChild:!0,children:(0,t.jsx)(x.$,{variant:"ghost",size:"icon",children:(0,t.jsx)(D.A,{className:"size-4"})})}),(0,t.jsxs)(L.EO,{children:[(0,t.jsxs)(L.wd,{children:[(0,t.jsx)(L.r7,{children:"Are you absolutely sure?"}),(0,t.jsx)(L.$v,{children:"This action cannot be undone. This will permanently delete this Chapter."})]}),(0,t.jsxs)(L.ck,{children:[(0,t.jsx)(L.Zr,{children:"Cancel"}),(0,t.jsx)(x.$,{onClick:l,disabled:i,children:i?"Deleting...":"Delete"})]})]})]})}function F({data:e}){let s=e.chapter.map(e=>({id:e.id,title:e.title,order:e.position,isOpen:!0,lessons:e.lessons.map(e=>({id:e.id,title:e.title,order:e.position}))}))||[],[r,f]=(0,c.useState)(s);function g({children:e,id:s,className:r,data:a}){let{attributes:i,listeners:c,setNodeRef:d,transform:u,transition:h,isDragging:p}=(0,n.gl)({id:s,data:a}),m={transform:l.Ks.Transform.toString(u),transition:h};return(0,t.jsx)("div",{ref:d,style:m,...i,className:(0,o.cn)("touch-none",r,p?"z-10":""),children:e(c)})}console.log(r);let C=(0,i.FR)((0,i.MS)(i.AN),(0,i.MS)(i.uN,{coordinateGetter:n.JR}));return(0,t.jsx)(i.Mp,{collisionDetection:i.Qo,onDragEnd:function(s){let{active:t,over:a}=s;if(!a||t.id===a.id)return;let i=t.id,c=a.id,l=t.data.current?.type,o=a.data.current?.type,d=e.id;if("chapter"===l){let e=null;if("chapter"===o?e=c:"lesson"===o&&(e=a.data.current?.chapterId??null),!e)return void v.oR.error("Could not determine target chapter for reordering.");let s=r.findIndex(e=>e.id===i),t=r.findIndex(s=>s.id===e);if(-1===s||-1===t)return void v.oR.error("Could not find chapter old/new index for reordering.");let l=(0,n.be)(r,s,t).map((e,s)=>({...e,order:s+1})),u=[...r];if(f(l),d){let e=l.map(e=>({id:e.id,position:e.order}));v.oR.promise(y(d,e),{loading:"Reordering chapters...",success:e=>{if("success"===e.status)return e.message;throw Error(e.message)},error:()=>(f(u),"Failed to reorder chapters.")})}return}if("lesson"===l&&"lesson"===o){let e=t.data.current?.chapterId,s=a.data.current?.chapterId;if(!e||e!==s)return void v.oR.error("Lesson move between different chapters or invalid chapter ID is not allowed.");let l=r.findIndex(s=>s.id===e);if(-1===l)return void v.oR.error("Could not find chapter for lesson reordering.");let o=r[l],u=o.lessons.findIndex(e=>e.id===i),h=o.lessons.findIndex(e=>e.id===c);if(-1===u||-1===h)return void v.oR.error("Could not find lesson for reordering.");let p=(0,n.be)(o.lessons,u,h).map((e,s)=>({...e,order:s+1})),m=[...r];m[l]={...o,lessons:p};let x=[...r];if(f(m),d){let s=p.map(e=>({id:e.id,position:e.order}));v.oR.promise(b(e,s,d),{loading:"Reordering lessons...",success:e=>{if("success"===e.status)return e.message;throw Error(e.message)},error:()=>(f(x),"Failed to reorder lessons.")})}return}},sensors:C,children:(0,t.jsxs)(a.Zp,{children:[(0,t.jsxs)(a.aR,{className:"flex flex-row items-center justify-between border-b border-border",children:[(0,t.jsx)(a.ZB,{children:"Chapters"}),(0,t.jsx)(k,{courseId:e.id})]}),(0,t.jsx)(a.Wu,{className:"space-y-8",children:(0,t.jsx)(n.gB,{items:r,strategy:n._G,children:r.map(s=>(0,t.jsx)(g,{id:s.id,data:{type:"chapter"},children:i=>(0,t.jsx)(a.Zp,{children:(0,t.jsxs)(d.Nt,{open:s.isOpen,onOpenChange:()=>{var e;return e=s.id,void f(r.map(s=>s.id===e?{...s,isOpen:!s.isOpen}:s))},children:[(0,t.jsxs)("div",{className:"flex items-center justify-between p-3 border-b border-border",children:[(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)(x.$,{variant:"ghost",size:"icon",...i,children:(0,t.jsx)(u.A,{className:"size-4"})}),(0,t.jsx)(d.R6,{asChild:!0,children:(0,t.jsx)(x.$,{size:"icon",variant:"ghost",className:"flex items-center",children:s.isOpen?(0,t.jsx)(h.A,{className:"size-4"}):(0,t.jsx)(p.A,{className:"size-4"})})}),(0,t.jsx)("p",{className:"cursor-pointer hover:text-primary pl-2",children:s.title})]}),(0,t.jsx)(B,{chapterId:s.id,courseId:e.id})]}),(0,t.jsx)(d.Ke,{children:(0,t.jsxs)("div",{className:"p-1",children:[(0,t.jsx)(n.gB,{items:s.lessons.map(e=>e.id),strategy:n._G,children:s.lessons.map(r=>(0,t.jsx)(g,{id:r.id,data:{type:"lesson",chapterId:s.id},children:a=>(0,t.jsxs)("div",{className:"flex items-center justify-between p-2 hover:bg-accent rounded-sm",children:[(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)(x.$,{variant:"ghost",size:"icon",...a,children:(0,t.jsx)(u.A,{className:"size-4"})}),(0,t.jsx)(m.A,{className:"size-4"}),(0,t.jsx)(j(),{href:`/admin/courses/${e.id}/${s.id}/${r.id}`,children:r.title})]}),(0,t.jsx)($,{chapterId:s.id,courseId:e.id,lessonId:r.id})]})},r.id))}),(0,t.jsx)("div",{className:"p-2",children:(0,t.jsx)(q,{chapterId:s.id,courseId:e.id})})]})})]})})},s.id))})})]})})}},10846:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},14985:e=>{"use strict";e.exports=require("dns")},17572:(e,s,r)=>{Promise.resolve().then(r.bind(r,57187)),Promise.resolve().then(r.bind(r,98440)),Promise.resolve().then(r.bind(r,98100))},18058:(e,s,r)=>{"use strict";r.r(s),r.d(s,{default:()=>o});var t=r(44789),a=r(78963),i=r(9158),n=r(98100),c=r(98440),l=r(57187);async function o({params:e}){let{courseId:s}=await e,r=await (0,a.r)(s);return(0,t.jsxs)("div",{children:[(0,t.jsxs)("h1",{className:"text-3xl font-bold mb-8",children:["Edit Course:"," ",(0,t.jsx)("span",{className:"text-primary underline",children:r.title})]}),(0,t.jsxs)(n.Tabs,{defaultValue:"basic-info",className:"w-full",children:[(0,t.jsxs)(n.TabsList,{className:"grid grid-cols-2 w-full",children:[(0,t.jsx)(n.TabsTrigger,{value:"basic-info",children:"Basic Info"}),(0,t.jsx)(n.TabsTrigger,{value:"course-structure",children:"Course Structure"})]}),(0,t.jsx)(n.TabsContent,{value:"basic-info",children:(0,t.jsxs)(i.Zp,{children:[(0,t.jsxs)(i.aR,{children:[(0,t.jsx)(i.ZB,{children:"Basic Info"}),(0,t.jsx)(i.BT,{children:"Provide basic information about the course"})]}),(0,t.jsx)(i.Wu,{children:(0,t.jsx)(c.EditCourseForm,{data:r})})]})}),(0,t.jsx)(n.TabsContent,{value:"course-structure",children:(0,t.jsxs)(i.Zp,{children:[(0,t.jsxs)(i.aR,{children:[(0,t.jsx)(i.ZB,{children:"Course Structure"}),(0,t.jsx)(i.BT,{children:"Here you can update your Course Structure"})]}),(0,t.jsx)(i.Wu,{children:(0,t.jsx)(l.CourseStructure,{data:r})})]})})]})]})}},18459:(e,s,r)=>{Promise.resolve().then(r.bind(r,93794))},19121:e=>{"use strict";e.exports=require("next/dist/server/app-render/action-async-storage.external.js")},21820:e=>{"use strict";e.exports=require("os")},23324:(e,s,r)=>{"use strict";r.d(s,{A:()=>t});var t=(0,r(53525).A)("outline","user-check","IconUserCheck",[["path",{d:"M8 7a4 4 0 1 0 8 0a4 4 0 0 0 -8 0",key:"svg-0"}],["path",{d:"M6 21v-2a4 4 0 0 1 4 -4h4",key:"svg-1"}],["path",{d:"M15 19l2 2l4 -4",key:"svg-2"}]])},27910:e=>{"use strict";e.exports=require("stream")},28178:(e,s,r)=>{"use strict";r.r(s),r.d(s,{default:()=>k});var t=r(21551),a=r(70794),i=r(35479),n=r(30519),c=r(68961),l=r(39524),o=r(63969),d=r(50082),u=r(73492),h=r(602),p=r(78862),m=r(23324),x=r(94434),f=r(14722),j=r(94),v=r(74238),g=r(28724),y=r(81761),b=r(86687),C=r(72296),w=r(89593),N=r(84294);let S={navMain:[{title:"Dashboard",url:"/admin",icon:i.A},{title:"Users",url:"/admin/users",icon:n.A},{title:"Teachers",url:"/admin/teachers",icon:c.A},{title:"Students",url:"/admin/students",icon:l.A},{title:"Courses",url:"/admin/courses",icon:o.A},{title:"Live Sessions",url:"/admin/live-sessions",icon:d.A},{title:"Payments",url:"/admin/payments",icon:u.A},{title:"Analytics",url:"/admin/analytics",icon:h.A},{title:"Verification Center",url:"/admin/verification",icon:p.A,items:[{title:"Profile Verification",url:"/admin/verification/profiles",icon:m.A},{title:"Payouts & Earnings",url:"/admin/verification/payouts",icon:x.A}]},{title:"Reports",url:"/admin/reports",icon:f.A},{title:"Content Review",url:"/admin/content-review",icon:p.A},{title:"Notifications",url:"/admin/notifications",icon:j.A}],navSecondary:[{title:"Settings",url:"/admin/settings",icon:v.A},{title:"Get Help",url:"/admin/help",icon:g.A},{title:"Search",url:"#",icon:y.A}]};function I({...e}){return(0,t.jsxs)(N.Bx,{collapsible:"offcanvas",...e,children:[(0,t.jsx)(N.Gh,{children:(0,t.jsx)(N.wZ,{children:(0,t.jsx)(N.FX,{children:(0,t.jsx)(N.Uj,{size:"lg",asChild:!0,className:"data-[slot=sidebar-menu-button]:!p-1.5 hover:bg-sidebar-accent/50 transition-colors",children:(0,t.jsxs)("div",{className:"flex items-center gap-2 px-2 py-1",children:[(0,t.jsx)("div",{className:"flex aspect-square size-8 items-center justify-center rounded-lg bg-sidebar-primary text-sidebar-primary-foreground",children:(0,t.jsx)(i.A,{className:"size-4"})}),(0,t.jsxs)("div",{className:"grid flex-1 text-left text-sm leading-tight",children:[(0,t.jsx)("span",{className:"truncate font-bold text-lg tracking-wide",children:"KIDOKOOL"}),(0,t.jsx)("span",{className:"truncate text-xs text-muted-foreground/70",children:"Admin Console"})]})]})})})})}),(0,t.jsxs)(N.Yv,{children:[(0,t.jsx)(b.J,{items:S.navMain}),(0,t.jsx)(C.e,{items:S.navSecondary,className:"mt-auto"})]}),(0,t.jsx)(N.CG,{children:(0,t.jsx)(w.r,{})})]})}var A=r(75627),R=r(16226),z=r(31965),M=r(97662);function k({children:e}){let{data:s,isPending:r}=(0,R.A)();(0,z.useRouter)();let[i,n]=(0,a.useState)(!1);return!i||r?(0,t.jsx)("div",{className:"min-h-screen flex items-center justify-center",children:(0,t.jsx)(M.A,{className:"h-8 w-8 animate-spin"})}):s&&"admin"===s.user.role?(0,t.jsxs)(N.GB,{style:{"--sidebar-width":"calc(var(--spacing) * 72)","--header-height":"4.25rem"},children:[(0,t.jsx)(I,{}),(0,t.jsxs)(N.sF,{children:[(0,t.jsx)(A.D,{}),(0,t.jsx)("div",{className:"flex flex-1 flex-col",children:(0,t.jsx)("div",{className:"@container/main flex flex-1 flex-col gap-2",children:(0,t.jsx)("div",{className:"flex flex-col gap-4 py-4 md:gap-6 md:py-6 px-4 lg:px-6",children:e})})})]})]}):null}},28354:e=>{"use strict";e.exports=require("util")},29021:e=>{"use strict";e.exports=require("fs")},29294:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-async-storage.external.js")},33873:e=>{"use strict";e.exports=require("path")},34631:e=>{"use strict";e.exports=require("tls")},37067:e=>{"use strict";e.exports=require("node:http")},39524:(e,s,r)=>{"use strict";r.d(s,{A:()=>t});var t=(0,r(53525).A)("outline","user-circle","IconUserCircle",[["path",{d:"M12 12m-9 0a9 9 0 1 0 18 0a9 9 0 1 0 -18 0",key:"svg-0"}],["path",{d:"M12 10m-3 0a3 3 0 1 0 6 0a3 3 0 1 0 -6 0",key:"svg-1"}],["path",{d:"M6.168 18.849a4 4 0 0 1 3.832 -2.849h4a4 4 0 0 1 3.834 2.855",key:"svg-2"}]])},44708:e=>{"use strict";e.exports=require("node:https")},55511:e=>{"use strict";e.exports=require("crypto")},55591:e=>{"use strict";e.exports=require("https")},57187:(e,s,r)=>{"use strict";r.d(s,{CourseStructure:()=>t});let t=(0,r(55547).registerClientReference)(function(){throw Error("Attempted to call CourseStructure() from the server but CourseStructure is on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"/Users/sanket/Documents/LMS-Organomed copy/app/admin/courses/[courseId]/edit/_components/CourseStructure.tsx","CourseStructure")},57975:e=>{"use strict";e.exports=require("node:util")},63033:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-unit-async-storage.external.js")},63969:(e,s,r)=>{"use strict";r.d(s,{A:()=>t});var t=(0,r(53525).A)("outline","list-details","IconListDetails",[["path",{d:"M13 5h8",key:"svg-0"}],["path",{d:"M13 9h5",key:"svg-1"}],["path",{d:"M13 15h8",key:"svg-2"}],["path",{d:"M13 19h5",key:"svg-3"}],["path",{d:"M3 4m0 1a1 1 0 0 1 1 -1h4a1 1 0 0 1 1 1v4a1 1 0 0 1 -1 1h-4a1 1 0 0 1 -1 -1z",key:"svg-4"}],["path",{d:"M3 14m0 1a1 1 0 0 1 1 -1h4a1 1 0 0 1 1 1v4a1 1 0 0 1 -1 1h-4a1 1 0 0 1 -1 -1z",key:"svg-5"}]])},68769:(e,s,r)=>{"use strict";r.r(s),r.d(s,{"400da89100055ff1642dbe32c67a8079ec7dfc29ed":()=>m,"4033229bf78ea52ec0c7689d41ae4ce603ff8dfe54":()=>x,"40a69f79ffdf5af2ada5fe166ad907fc82e862c9af":()=>h,"40c3ac24cd0c44b98aeb1c36d351885ff15e29f361":()=>p,"605e60b60d3aaa8a8a4f929da1c9e571d1efe448ee":()=>o,"60f65f610d6ca489b7f0ae555312ce7609f6a99b84":()=>u,"70cf19e76e2a9812f8ff013cb30c4331a9053977d6":()=>d});var t=r(11311);r(89335);var a=r(48502),i=r(97856),n=r(79627),c=r(63388),l=r(76280);async function o(e,s){let r=await (0,a.yl)();if("teacher"===r.user.role){let e=await n.z.course.findUnique({where:{id:s},select:{userId:!0}});if(!e||e.userId!==r.user.id)return{status:"error",message:"You can only edit your own courses"}}try{let t=await (0,i.f)(r.user.id);if(!t.success)return{status:"error",message:t.error||"Security check failed"};let a=c.f_.safeParse(e);if(!a.success)return{status:"error",message:"Invalid data"};return await n.z.course.update({where:{id:s,userId:r.user.id},data:{...a.data}}),{status:"success",message:"Course updated successfully"}}catch{return{status:"error",message:"Failed to update Course"}}}async function d(e,s,r){await (0,a.yl)();try{if(!s||0===s.length)return{status:"error",message:"No lessons provided for reordering."};let t=s.map(s=>n.z.lesson.update({where:{id:s.id,chapterId:e},data:{position:s.position}}));return await n.z.$transaction(t),(0,l.revalidatePath)(`/admin/courses/${r}/edit`),{status:"success",message:"Lessons reordered successfully"}}catch{return{status:"error",message:"Failed to reorder lessons."}}}async function u(e,s){await (0,a.yl)();try{if(!s||0===s.length)return{status:"error",message:"No chapters provided for reordering."};let r=s.map(s=>n.z.chapter.update({where:{id:s.id,courseId:e},data:{position:s.position}}));return await n.z.$transaction(r),(0,l.revalidatePath)(`/admin/courses/${e}/edit`),{status:"success",message:"Chapters reordered successfully"}}catch{return{status:"error",message:"Failed to reorder chapters"}}}async function h(e){await (0,a.yl)();try{let s=c.HH.safeParse(e);if(!s.success)return{status:"error",message:"Invalid Data"};return await n.z.$transaction(async e=>{let r=await e.chapter.findFirst({where:{courseId:s.data.courseId},select:{position:!0},orderBy:{position:"desc"}});await e.chapter.create({data:{title:s.data.name,courseId:s.data.courseId,position:(r?.position??0)+1}})}),(0,l.revalidatePath)(`/admin/courses/${s.data.courseId}/edit`),{status:"success",message:"Chapter created successfully"}}catch{return{status:"error",message:"Failed to create chapter"}}}async function p(e){await (0,a.yl)();try{let s=c.qz.safeParse(e);if(!s.success)return{status:"error",message:"Invalid Data"};return await n.z.$transaction(async e=>{let r=await e.lesson.findFirst({where:{chapterId:s.data.chapterId},select:{position:!0},orderBy:{position:"desc"}});await e.lesson.create({data:{title:s.data.name,description:s.data.description,videoKey:s.data.videoKey,thumbnailKey:s.data.thumbnailKey,chapterId:s.data.chapterId,position:(r?.position??0)+1}})}),(0,l.revalidatePath)(`/admin/courses/${s.data.courseId}/edit`),{status:"success",message:"Lesson created successfully"}}catch{return{status:"error",message:"Failed to create lesson"}}}async function m({chapterId:e,courseId:s,lessonId:r}){await (0,a.yl)();try{let t=await n.z.chapter.findUnique({where:{id:e},select:{lessons:{orderBy:{position:"asc"},select:{id:!0,position:!0}}}});if(!t)return{status:"error",message:"Chapter not Found"};let a=t.lessons;if(!a.find(e=>e.id===r))return{status:"error",message:"Lesson not found in the chapter."};let i=a.filter(e=>e.id!==r).map((e,s)=>n.z.lesson.update({where:{id:e.id},data:{position:s+1}}));return await n.z.$transaction([...i,n.z.lesson.delete({where:{id:r,chapterId:e}})]),(0,l.revalidatePath)(`/admin/courses/${s}/edit`),{status:"success",message:"Lesson deleted and positions reordered successfully"}}catch{return{status:"error",message:"Failed to delete lesson"}}}async function x({chapterId:e,courseId:s}){await (0,a.yl)();try{let r=await n.z.course.findUnique({where:{id:s},select:{chapter:{orderBy:{position:"asc"},select:{id:!0,position:!0}}}});if(!r)return{status:"error",message:"Course not Found"};let t=r.chapter;if(!t.find(s=>s.id===e))return{status:"error",message:"Chapter not found in the Course."};let a=t.filter(s=>s.id!==e).map((e,s)=>n.z.chapter.update({where:{id:e.id},data:{position:s+1}}));return await n.z.$transaction([...a,n.z.chapter.delete({where:{id:e}})]),(0,l.revalidatePath)(`/admin/courses/${s}/edit`),{status:"success",message:"Chapter deleted and positions reordered successfully"}}catch{return{status:"error",message:"Failed to delete chapter"}}}(0,r(68675).D)([o,d,u,h,p,m,x]),(0,t.A)(o,"605e60b60d3aaa8a8a4f929da1c9e571d1efe448ee",null),(0,t.A)(d,"70cf19e76e2a9812f8ff013cb30c4331a9053977d6",null),(0,t.A)(u,"60f65f610d6ca489b7f0ae555312ce7609f6a99b84",null),(0,t.A)(h,"40a69f79ffdf5af2ada5fe166ad907fc82e862c9af",null),(0,t.A)(p,"40c3ac24cd0c44b98aeb1c36d351885ff15e29f361",null),(0,t.A)(m,"400da89100055ff1642dbe32c67a8079ec7dfc29ed",null),(0,t.A)(x,"4033229bf78ea52ec0c7689d41ae4ce603ff8dfe54",null)},68961:(e,s,r)=>{"use strict";r.d(s,{A:()=>t});var t=(0,r(53525).A)("outline","school","IconSchool",[["path",{d:"M22 9l-10 -4l-10 4l10 4l10 -4v6",key:"svg-0"}],["path",{d:"M6 10.6v5.4a6 3 0 0 0 12 0v-5.4",key:"svg-1"}]])},71603:(e,s,r)=>{Promise.resolve().then(r.bind(r,28178))},73492:(e,s,r)=>{"use strict";r.d(s,{A:()=>t});var t=(0,r(53525).A)("outline","credit-card","IconCreditCard",[["path",{d:"M3 5m0 3a3 3 0 0 1 3 -3h12a3 3 0 0 1 3 3v8a3 3 0 0 1 -3 3h-12a3 3 0 0 1 -3 -3z",key:"svg-0"}],["path",{d:"M3 10l18 0",key:"svg-1"}],["path",{d:"M7 15l.01 0",key:"svg-2"}],["path",{d:"M11 15l2 0",key:"svg-3"}]])},74075:e=>{"use strict";e.exports=require("zlib")},75627:(e,s,r)=>{"use strict";r.d(s,{D:()=>o});var t=r(21551),a=r(39461),i=r(84294),n=r(3910),c=r(99078),l=r(93226);function o(){return(0,t.jsx)("header",{className:"flex h-(--header-height) shrink-0 items-center gap-2 border-b transition-[width,height] ease-linear group-has-data-[collapsible=icon]/sidebar-wrapper:h-(--header-height)",children:(0,t.jsxs)("div",{className:"flex w-full items-center gap-1 px-4 lg:gap-2 lg:px-6",children:[(0,t.jsx)(i.x2,{className:"-ml-1"}),(0,t.jsx)(a.Separator,{orientation:"vertical",className:"mx-2 data-[orientation=vertical]:h-4"}),(0,t.jsx)("h1",{className:"text-base font-medium",children:"KIDOKOOL."}),(0,t.jsxs)("div",{className:"ml-auto flex items-center gap-2",children:[(0,t.jsx)(l.r,{}),(0,t.jsx)(c.d,{}),(0,t.jsx)(n.U,{})]})]})})}},77598:e=>{"use strict";e.exports=require("node:crypto")},78474:e=>{"use strict";e.exports=require("node:events")},78862:(e,s,r)=>{"use strict";r.d(s,{A:()=>t});var t=(0,r(53525).A)("outline","shield-check","IconShieldCheck",[["path",{d:"M11.46 20.846a12 12 0 0 1 -7.96 -14.846a12 12 0 0 0 8.5 -3a12 12 0 0 0 8.5 3a12 12 0 0 1 -.09 7.06",key:"svg-0"}],["path",{d:"M15 19l2 2l4 -4",key:"svg-1"}]])},79551:e=>{"use strict";e.exports=require("url")},79646:e=>{"use strict";e.exports=require("child_process")},81630:e=>{"use strict";e.exports=require("http")},91645:e=>{"use strict";e.exports=require("net")},92965:(e,s,r)=>{"use strict";r.d(s,{EditCourseForm:()=>S});var t=r(21551),a=r(90778),i=r(17985),n=r(60458),c=r(97662),l=r(12994),o=r(68376),d=r(64722),u=r(32520),h=r(552),p=r(73134),m=r.n(p),x=r(26348),f=r(11986),j=r(18056),v=r(14674),g=r(70794),y=r(43532),b=r(77111),C=r(31965),w=r(40875);let N=(0,w.createServerReference)("605e60b60d3aaa8a8a4f929da1c9e571d1efe448ee",w.callServer,void 0,w.findSourceMapURL,"editCourse");function S({data:e}){let[s,r]=(0,g.useTransition)(),p=(0,C.useRouter)(),w=(0,o.mN)({resolver:(0,d.u)(i.f_),defaultValues:{title:e.title,description:e.description,fileKey:e.fileKey,price:e.price,duration:e.duration,level:e.level,category:e.category,status:e.status,slug:e.slug,smallDescription:e.smallDescription}});return(0,t.jsx)(u.lV,{...w,children:(0,t.jsxs)("form",{className:"space-y-6",onSubmit:w.handleSubmit(function(s){r(async()=>{let{data:r,error:t}=await (0,y.T)(N(s,e.id));if(t)return void b.oR.error("An unexpected error occurred. Please try again.");"success"===r.status?(b.oR.success(r.message),w.reset(),p.push("/admin/courses")):"error"===r.status&&b.oR.error(r.message)})}),children:[(0,t.jsx)(u.zB,{control:w.control,name:"title",render:({field:e})=>(0,t.jsxs)(u.eI,{children:[(0,t.jsx)(u.lR,{children:"Title"}),(0,t.jsx)(u.MJ,{children:(0,t.jsx)(h.p,{placeholder:"Title",...e})}),(0,t.jsx)(u.C5,{})]})}),(0,t.jsxs)("div",{className:"flex gap-4 items-end",children:[(0,t.jsx)(u.zB,{control:w.control,name:"slug",render:({field:e})=>(0,t.jsxs)(u.eI,{className:"w-full",children:[(0,t.jsx)(u.lR,{children:"Slug"}),(0,t.jsx)(u.MJ,{children:(0,t.jsx)(h.p,{placeholder:"Slug",...e})}),(0,t.jsx)(u.C5,{})]})}),(0,t.jsxs)(a.$,{type:"button",className:"w-fit",onClick:()=>{let e=w.getValues("title"),s=m()(e);w.setValue("slug",s,{shouldValidate:!0})},children:["Generate Slug ",(0,t.jsx)(n.A,{className:"ml-1",size:16})]})]}),(0,t.jsx)(u.zB,{control:w.control,name:"smallDescription",render:({field:e})=>(0,t.jsxs)(u.eI,{className:"w-full",children:[(0,t.jsx)(u.lR,{children:"Small Description"}),(0,t.jsx)(u.MJ,{children:(0,t.jsx)(x.T,{placeholder:"Small Description",className:"min-h-[120px]",...e})}),(0,t.jsx)(u.C5,{})]})}),(0,t.jsx)(u.zB,{control:w.control,name:"description",render:({field:e})=>(0,t.jsxs)(u.eI,{className:"w-full",children:[(0,t.jsx)(u.lR,{children:"Description"}),(0,t.jsx)(u.MJ,{children:(0,t.jsx)(j.d,{field:e})}),(0,t.jsx)(u.C5,{})]})}),(0,t.jsx)(u.zB,{control:w.control,name:"fileKey",render:({field:e})=>(0,t.jsxs)(u.eI,{className:"w-full",children:[(0,t.jsx)(u.lR,{children:"Thumbnail image"}),(0,t.jsx)(u.MJ,{children:(0,t.jsx)(v.d,{fileTypeAccepted:"image",onChange:e.onChange,value:e.value})}),(0,t.jsx)(u.C5,{})]})}),(0,t.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,t.jsx)(u.zB,{control:w.control,name:"category",render:({field:e})=>(0,t.jsxs)(u.eI,{className:"w-full",children:[(0,t.jsx)(u.lR,{children:"Category"}),(0,t.jsxs)(f.l6,{onValueChange:e.onChange,defaultValue:e.value,children:[(0,t.jsx)(u.MJ,{children:(0,t.jsx)(f.bq,{className:"w-full",children:(0,t.jsx)(f.yv,{placeholder:"Select Category"})})}),(0,t.jsx)(f.gC,{children:i.Oo.map(e=>(0,t.jsx)(f.eb,{value:e,children:e},e))})]}),(0,t.jsx)(u.C5,{})]})}),(0,t.jsx)(u.zB,{control:w.control,name:"level",render:({field:e})=>(0,t.jsxs)(u.eI,{className:"w-full",children:[(0,t.jsx)(u.lR,{children:"Level"}),(0,t.jsxs)(f.l6,{onValueChange:e.onChange,defaultValue:e.value,children:[(0,t.jsx)(u.MJ,{children:(0,t.jsx)(f.bq,{className:"w-full",children:(0,t.jsx)(f.yv,{placeholder:"Select Value"})})}),(0,t.jsx)(f.gC,{children:i.Ps.map(e=>(0,t.jsx)(f.eb,{value:e,children:e},e))})]}),(0,t.jsx)(u.C5,{})]})}),(0,t.jsx)(u.zB,{control:w.control,name:"duration",render:({field:e})=>(0,t.jsxs)(u.eI,{className:"w-full",children:[(0,t.jsx)(u.lR,{children:"Duration (hours)"}),(0,t.jsx)(u.MJ,{children:(0,t.jsx)(h.p,{placeholder:"Duration",type:"number",...e})}),(0,t.jsx)(u.C5,{})]})}),(0,t.jsx)(u.zB,{control:w.control,name:"price",render:({field:e})=>(0,t.jsxs)(u.eI,{className:"w-full",children:[(0,t.jsx)(u.lR,{children:"Price ($)"}),(0,t.jsx)(u.MJ,{children:(0,t.jsx)(h.p,{placeholder:"Price",type:"number",...e})}),(0,t.jsx)(u.C5,{})]})})]}),(0,t.jsx)(u.zB,{control:w.control,name:"status",render:({field:e})=>(0,t.jsxs)(u.eI,{className:"w-full",children:[(0,t.jsx)(u.lR,{children:"Status"}),(0,t.jsxs)(f.l6,{onValueChange:e.onChange,defaultValue:e.value,children:[(0,t.jsx)(u.MJ,{children:(0,t.jsx)(f.bq,{className:"w-full",children:(0,t.jsx)(f.yv,{placeholder:"Select Status"})})}),(0,t.jsx)(f.gC,{children:i.Ik.map(e=>(0,t.jsx)(f.eb,{value:e,children:e},e))})]}),(0,t.jsx)(u.C5,{})]})}),(0,t.jsx)(a.$,{type:"submit",disabled:s,children:s?(0,t.jsxs)(t.Fragment,{children:["Updating...",(0,t.jsx)(c.A,{className:"animate-spin ml-1"})]}):(0,t.jsxs)(t.Fragment,{children:["Update Course ",(0,t.jsx)(l.A,{className:"ml-1",size:16})]})})]})})}},93794:(e,s,r)=>{"use strict";r.r(s),r.d(s,{default:()=>t});let t=(0,r(55547).registerClientReference)(function(){throw Error("Attempted to call the default export of \"/Users/sanket/Documents/LMS-Organomed copy/app/admin/layout.tsx\" from the server, but it's on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"/Users/sanket/Documents/LMS-Organomed copy/app/admin/layout.tsx","default")},94735:e=>{"use strict";e.exports=require("events")},96330:e=>{"use strict";e.exports=require("@prisma/client")},98440:(e,s,r)=>{"use strict";r.d(s,{EditCourseForm:()=>t});let t=(0,r(55547).registerClientReference)(function(){throw Error("Attempted to call EditCourseForm() from the server but EditCourseForm is on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"/Users/sanket/Documents/LMS-Organomed copy/app/admin/courses/[courseId]/edit/_components/EditCourseForm.tsx","EditCourseForm")},99012:(e,s,r)=>{Promise.resolve().then(r.bind(r,8205)),Promise.resolve().then(r.bind(r,92965)),Promise.resolve().then(r.bind(r,6234))}};var s=require("../../../../../webpack-runtime.js");s.C(e);var r=e=>s(s.s=e),t=s.X(0,[7991,2692,1135,3831,1123,9716,5130,32,6972,6726,4213,6727,1167,817,5757,6280,3781,8825,2278,2148,348,2992,580,2730,3027,979],()=>r(6346));module.exports=t})();