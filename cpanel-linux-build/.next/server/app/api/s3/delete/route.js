"use strict";(()=>{var e={};e.id=9734,e.ids=[9734],e.modules={3295:e=>{e.exports=require("next/dist/server/app-render/after-task-async-storage.external.js")},3348:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"RedirectStatusCode",{enumerable:!0,get:function(){return r}});var r=function(e){return e[e.SeeOther=303]="SeeOther",e[e.TemporaryRedirect=307]="TemporaryRedirect",e[e.PermanentRedirect=308]="PermanentRedirect",e}({});("function"==typeof t.default||"object"==typeof t.default&&null!==t.default)&&void 0===t.default.__esModule&&(Object.defineProperty(t.default,"__esModule",{value:!0}),Object.assign(t.default,t),e.exports=t.default)},4573:e=>{e.exports=require("node:buffer")},10846:e=>{e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},14985:e=>{e.exports=require("dns")},19121:e=>{e.exports=require("next/dist/server/app-render/action-async-storage.external.js")},21820:e=>{e.exports=require("os")},27910:e=>{e.exports=require("stream")},28354:e=>{e.exports=require("util")},29021:e=>{e.exports=require("fs")},29294:e=>{e.exports=require("next/dist/server/app-render/work-async-storage.external.js")},33642:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"isNextRouterError",{enumerable:!0,get:function(){return u}});let n=r(96304),o=r(62098);function u(e){return(0,o.isRedirectError)(e)||(0,n.isHTTPAccessFallbackError)(e)}("function"==typeof t.default||"object"==typeof t.default&&null!==t.default)&&void 0===t.default.__esModule&&(Object.defineProperty(t.default,"__esModule",{value:!0}),Object.assign(t.default,t),e.exports=t.default)},33873:e=>{e.exports=require("path")},34631:e=>{e.exports=require("tls")},37010:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"unstable_rethrow",{enumerable:!0,get:function(){return function e(t){if((0,i.isNextRouterError)(t)||(0,u.isBailoutToCSRError)(t)||(0,a.isDynamicServerError)(t)||(0,s.isDynamicPostpone)(t)||(0,o.isPostpone)(t)||(0,n.isHangingPromiseRejectionError)(t))throw t;t instanceof Error&&"cause"in t&&e(t.cause)}}});let n=r(7412),o=r(55277),u=r(55798),i=r(33642),s=r(91707),a=r(38175);("function"==typeof t.default||"object"==typeof t.default&&null!==t.default)&&void 0===t.default.__esModule&&(Object.defineProperty(t.default,"__esModule",{value:!0}),Object.assign(t.default,t),e.exports=t.default)},37067:e=>{e.exports=require("node:http")},40051:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"unstable_rethrow",{enumerable:!0,get:function(){return n}});let n=r(37010).unstable_rethrow;("function"==typeof t.default||"object"==typeof t.default&&null!==t.default)&&void 0===t.default.__esModule&&(Object.defineProperty(t.default,"__esModule",{value:!0}),Object.assign(t.default,t),e.exports=t.default)},44708:e=>{e.exports=require("node:https")},44870:e=>{e.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},47597:(e,t,r)=>{r.r(t),r.d(t,{patchFetch:()=>m,routeModule:()=>_,serverHooks:()=>y,workAsyncStorage:()=>b,workUnitAsyncStorage:()=>R});var n={};r.r(n),r.d(n,{DELETE:()=>p});var o=r(36639),u=r(99880),i=r(77991),s=r(76494),a=r(68982),l=r(94149),d=r(60901),c=r(91043),f=r(11246);async function p(e){let t=await (0,s.Z)();try{let r=await (0,a.Ql)(e,t?.user.id,{maxRequests:5,windowMs:6e4});if(!r.success)return f.NextResponse.json({error:r.error},{status:r.status});let n=(await e.json()).key;if(!n)return f.NextResponse.json({error:"Missing or invalid object key"},{status:400});let o=new c.DeleteObjectCommand({Bucket:l._.NEXT_PUBLIC_S3_BUCKET_NAME_IMAGES,Key:n});return await d.S3.send(o),f.NextResponse.json({message:"File deleted succesfully"},{status:200})}catch{return f.NextResponse.json({error:"Missing or invalid object key"},{status:500})}}let _=new o.AppRouteRouteModule({definition:{kind:u.RouteKind.APP_ROUTE,page:"/api/s3/delete/route",pathname:"/api/s3/delete",filename:"route",bundlePath:"app/api/s3/delete/route"},resolvedPagePath:"/Users/sanket/Documents/LMS-Organomed copy/app/api/s3/delete/route.ts",nextConfigOutput:"standalone",userland:n}),{workAsyncStorage:b,workUnitAsyncStorage:R,serverHooks:y}=_;function m(){return(0,i.patchFetch)({workAsyncStorage:b,workUnitAsyncStorage:R})}},52225:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),!function(e,t){for(var r in t)Object.defineProperty(e,r,{enumerable:!0,get:t[r]})}(t,{getRedirectError:function(){return i},getRedirectStatusCodeFromError:function(){return c},getRedirectTypeFromError:function(){return d},getURLFromRedirectError:function(){return l},permanentRedirect:function(){return a},redirect:function(){return s}});let n=r(3348),o=r(62098),u=r(19121).actionAsyncStorage;function i(e,t,r){void 0===r&&(r=n.RedirectStatusCode.TemporaryRedirect);let u=Object.defineProperty(Error(o.REDIRECT_ERROR_CODE),"__NEXT_ERROR_CODE",{value:"E394",enumerable:!1,configurable:!0});return u.digest=o.REDIRECT_ERROR_CODE+";"+t+";"+e+";"+r+";",u}function s(e,t){var r;throw null!=t||(t=(null==u||null==(r=u.getStore())?void 0:r.isAction)?o.RedirectType.push:o.RedirectType.replace),i(e,t,n.RedirectStatusCode.TemporaryRedirect)}function a(e,t){throw void 0===t&&(t=o.RedirectType.replace),i(e,t,n.RedirectStatusCode.PermanentRedirect)}function l(e){return(0,o.isRedirectError)(e)?e.digest.split(";").slice(2,-2).join(";"):null}function d(e){if(!(0,o.isRedirectError)(e))throw Object.defineProperty(Error("Not a redirect error"),"__NEXT_ERROR_CODE",{value:"E260",enumerable:!1,configurable:!0});return e.digest.split(";",2)[1]}function c(e){if(!(0,o.isRedirectError)(e))throw Object.defineProperty(Error("Not a redirect error"),"__NEXT_ERROR_CODE",{value:"E260",enumerable:!1,configurable:!0});return Number(e.digest.split(";").at(-2))}("function"==typeof t.default||"object"==typeof t.default&&null!==t.default)&&void 0===t.default.__esModule&&(Object.defineProperty(t.default,"__esModule",{value:!0}),Object.assign(t.default,t),e.exports=t.default)},52824:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),!function(e,t){for(var r in t)Object.defineProperty(e,r,{enumerable:!0,get:t[r]})}(t,{ReadonlyURLSearchParams:function(){return d},RedirectType:function(){return o.RedirectType},forbidden:function(){return i.forbidden},notFound:function(){return u.notFound},permanentRedirect:function(){return n.permanentRedirect},redirect:function(){return n.redirect},unauthorized:function(){return s.unauthorized},unstable_rethrow:function(){return a.unstable_rethrow}});let n=r(52225),o=r(62098),u=r(71197),i=r(96416),s=r(62691),a=r(40051);class l extends Error{constructor(){super("Method unavailable on `ReadonlyURLSearchParams`. Read more: https://nextjs.org/docs/app/api-reference/functions/use-search-params#updating-searchparams")}}class d extends URLSearchParams{append(){throw new l}delete(){throw new l}set(){throw new l}sort(){throw new l}}("function"==typeof t.default||"object"==typeof t.default&&null!==t.default)&&void 0===t.default.__esModule&&(Object.defineProperty(t.default,"__esModule",{value:!0}),Object.assign(t.default,t),e.exports=t.default)},55277:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"isPostpone",{enumerable:!0,get:function(){return n}});let r=Symbol.for("react.postpone");function n(e){return"object"==typeof e&&null!==e&&e.$$typeof===r}},55511:e=>{e.exports=require("crypto")},55591:e=>{e.exports=require("https")},55798:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),!function(e,t){for(var r in t)Object.defineProperty(e,r,{enumerable:!0,get:t[r]})}(t,{BailoutToCSRError:function(){return n},isBailoutToCSRError:function(){return o}});let r="BAILOUT_TO_CLIENT_SIDE_RENDERING";class n extends Error{constructor(e){super("Bail out to client-side rendering: "+e),this.reason=e,this.digest=r}}function o(e){return"object"==typeof e&&null!==e&&"digest"in e&&e.digest===r}},57975:e=>{e.exports=require("node:util")},62098:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),!function(e,t){for(var r in t)Object.defineProperty(e,r,{enumerable:!0,get:t[r]})}(t,{REDIRECT_ERROR_CODE:function(){return o},RedirectType:function(){return u},isRedirectError:function(){return i}});let n=r(3348),o="NEXT_REDIRECT";var u=function(e){return e.push="push",e.replace="replace",e}({});function i(e){if("object"!=typeof e||null===e||!("digest"in e)||"string"!=typeof e.digest)return!1;let t=e.digest.split(";"),[r,u]=t,i=t.slice(2,-2).join(";"),s=Number(t.at(-2));return r===o&&("replace"===u||"push"===u)&&"string"==typeof i&&!isNaN(s)&&s in n.RedirectStatusCode}("function"==typeof t.default||"object"==typeof t.default&&null!==t.default)&&void 0===t.default.__esModule&&(Object.defineProperty(t.default,"__esModule",{value:!0}),Object.assign(t.default,t),e.exports=t.default)},62691:(e,t,r)=>{function n(){throw Object.defineProperty(Error("`unauthorized()` is experimental and only allowed to be used when `experimental.authInterrupts` is enabled."),"__NEXT_ERROR_CODE",{value:"E411",enumerable:!1,configurable:!0})}Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"unauthorized",{enumerable:!0,get:function(){return n}}),r(96304).HTTP_ERROR_FALLBACK_ERROR_CODE,("function"==typeof t.default||"object"==typeof t.default&&null!==t.default)&&void 0===t.default.__esModule&&(Object.defineProperty(t.default,"__esModule",{value:!0}),Object.assign(t.default,t),e.exports=t.default)},63033:e=>{e.exports=require("next/dist/server/app-render/work-unit-async-storage.external.js")},68982:(e,t,r)=>{r.d(t,{Ql:()=>a,Tf:()=>i,YX:()=>s});class n{check(e,t){let r=Date.now(),n=`${e}:${t.windowMs}`,o=this.store.get(n);return!o||r>o.resetTime?(this.store.set(n,{count:1,resetTime:r+t.windowMs}),!0):!(o.count>=t.maxRequests)&&(o.count++,this.store.set(n,o),!0)}cleanup(){let e=Date.now();for(let[t,r]of this.store.entries())e>r.resetTime&&this.store.delete(t)}constructor(){this.store=new Map}}let o=new n;function u(e){let t=e.headers.get("user-agent")?.toLowerCase()||"";return["bot","crawler","spider","scraper","curl","wget","python","java","go-http","okhttp","axios","postman","insomnia"].some(e=>t.includes(e))}function i(e){for(let t of["x-forwarded-for","x-real-ip","cf-connecting-ip","x-client-ip"]){let r=e.headers.get(t);if(r)return r.split(",")[0].trim()}return null}async function s(e,t,r){if(u(e))return{success:!1,error:"You are a bot! If this is a mistake, contact our support",status:403};let n=function(e){if(!/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(e))return{valid:!1,reason:"Email address format is invalid. Is there a typo?"};let t=e.split("@")[1]?.toLowerCase();return t?["10minutemail.com","tempmail.org","guerrillamail.com","mailinator.com","throwaway.email","temp-mail.org","getnada.com","maildrop.cc"].includes(t)?{valid:!1,reason:"We do not allow disposable email addresses."}:{valid:!0}:{valid:!1,reason:"Invalid email domain"}}(r);return n.valid?o.check(t,{maxRequests:5,windowMs:12e4})?{success:!0}:{success:!1,error:"You have been blocked due to rate limiting",status:429}:{success:!1,error:n.reason||"Invalid email",status:400}}async function a(e,t,r={maxRequests:10,windowMs:6e4}){return u(e)?{success:!1,error:"You are a bot! If this is a mistake, contact our support",status:403}:o.check(t,r)?{success:!0}:{success:!1,error:"You have been blocked due to rate limiting",status:429}}setInterval(()=>o.cleanup(),3e5)},71197:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"notFound",{enumerable:!0,get:function(){return o}});let n=""+r(96304).HTTP_ERROR_FALLBACK_ERROR_CODE+";404";function o(){let e=Object.defineProperty(Error(n),"__NEXT_ERROR_CODE",{value:"E394",enumerable:!1,configurable:!0});throw e.digest=n,e}("function"==typeof t.default||"object"==typeof t.default&&null!==t.default)&&void 0===t.default.__esModule&&(Object.defineProperty(t.default,"__esModule",{value:!0}),Object.assign(t.default,t),e.exports=t.default)},74075:e=>{e.exports=require("zlib")},76494:(e,t,r)=>{r.d(t,{Z:()=>i});var n=r(49522),o=r(43831),u=r(81436);let i=(0,r(25360).cache)(async()=>{let e=await n.j.api.getSession({headers:await (0,o.headers)()});return e?"admin"!==e.user.role?(0,u.redirect)("/not-admin"):e:(0,u.redirect)("/login")})},77598:e=>{e.exports=require("node:crypto")},78474:e=>{e.exports=require("node:events")},79551:e=>{e.exports=require("url")},79646:e=>{e.exports=require("child_process")},81436:(e,t,r)=>{var n=r(52824);r.o(n,"notFound")&&r.d(t,{notFound:function(){return n.notFound}}),r.o(n,"redirect")&&r.d(t,{redirect:function(){return n.redirect}})},81630:e=>{e.exports=require("http")},91043:e=>{e.exports=require("@aws-sdk/client-s3")},91645:e=>{e.exports=require("net")},94735:e=>{e.exports=require("events")},96304:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),!function(e,t){for(var r in t)Object.defineProperty(e,r,{enumerable:!0,get:t[r]})}(t,{HTTPAccessErrorStatus:function(){return r},HTTP_ERROR_FALLBACK_ERROR_CODE:function(){return o},getAccessFallbackErrorTypeByStatus:function(){return s},getAccessFallbackHTTPStatus:function(){return i},isHTTPAccessFallbackError:function(){return u}});let r={NOT_FOUND:404,FORBIDDEN:403,UNAUTHORIZED:401},n=new Set(Object.values(r)),o="NEXT_HTTP_ERROR_FALLBACK";function u(e){if("object"!=typeof e||null===e||!("digest"in e)||"string"!=typeof e.digest)return!1;let[t,r]=e.digest.split(";");return t===o&&n.has(Number(r))}function i(e){return Number(e.digest.split(";")[1])}function s(e){switch(e){case 401:return"unauthorized";case 403:return"forbidden";case 404:return"not-found";default:return}}("function"==typeof t.default||"object"==typeof t.default&&null!==t.default)&&void 0===t.default.__esModule&&(Object.defineProperty(t.default,"__esModule",{value:!0}),Object.assign(t.default,t),e.exports=t.default)},96330:e=>{e.exports=require("@prisma/client")},96416:(e,t,r)=>{function n(){throw Object.defineProperty(Error("`forbidden()` is experimental and only allowed to be enabled when `experimental.authInterrupts` is enabled."),"__NEXT_ERROR_CODE",{value:"E488",enumerable:!1,configurable:!0})}Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"forbidden",{enumerable:!0,get:function(){return n}}),r(96304).HTTP_ERROR_FALLBACK_ERROR_CODE,("function"==typeof t.default||"object"==typeof t.default&&null!==t.default)&&void 0===t.default.__esModule&&(Object.defineProperty(t.default,"__esModule",{value:!0}),Object.assign(t.default,t),e.exports=t.default)}};var t=require("../../../../webpack-runtime.js");t.C(e);var r=e=>t(t.s=e),n=t.X(0,[7991,2692,1135,3831,4714,3188],()=>r(47597));module.exports=n})();