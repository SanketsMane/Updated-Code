(()=>{var e={};e.id=6427,e.ids=[6427],e.modules={3107:(e,s,t)=>{"use strict";t.r(s),t.d(s,{default:()=>r});var a=t(95130);let r=async e=>[{type:"image/x-icon",sizes:"16x16",url:(0,a.fillMetadataSegment)(".",await e.params,"favicon.ico")+""}]},3295:e=>{"use strict";e.exports=require("next/dist/server/app-render/after-task-async-storage.external.js")},4573:e=>{"use strict";e.exports=require("node:buffer")},10846:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},14985:e=>{"use strict";e.exports=require("dns")},15147:(e,s,t)=>{"use strict";t.d(s,{default:()=>g});var a=t(21551),r=t(70794),i=t(34460),n=t(90778),l=t(85449),c=t(46897),o=t(72423),d=t(45691);let u=(0,d.A)("video-off",[["path",{d:"M10.66 6H14a2 2 0 0 1 2 2v2.5l5.248-3.062A.5.5 0 0 1 22 7.87v8.196",key:"w8jjjt"}],["path",{d:"M16 16a2 2 0 0 1-2 2H4a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h2",key:"1xawa7"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]]),x=(0,d.A)("mic",[["path",{d:"M12 2a3 3 0 0 0-3 3v7a3 3 0 0 0 6 0V5a3 3 0 0 0-3-3Z",key:"131961"}],["path",{d:"M19 10v2a7 7 0 0 1-14 0v-2",key:"1vc78b"}],["line",{x1:"12",x2:"12",y1:"19",y2:"22",key:"x3vr5v"}]]),h=(0,d.A)("mic-off",[["line",{x1:"2",x2:"22",y1:"2",y2:"22",key:"a6p6uj"}],["path",{d:"M18.89 13.23A7.12 7.12 0 0 0 19 12v-2",key:"80xlxr"}],["path",{d:"M5 10v2a7 7 0 0 0 12 5",key:"p2k8kg"}],["path",{d:"M15 9.34V5a3 3 0 0 0-5.68-1.33",key:"1gzdoj"}],["path",{d:"M9 9v3a3 3 0 0 0 5.12 2.12",key:"r2i35w"}],["line",{x1:"12",x2:"12",y1:"19",y2:"22",key:"x3vr5v"}]]),m=(0,d.A)("phone",[["path",{d:"M13.832 16.568a1 1 0 0 0 1.213-.303l.355-.465A2 2 0 0 1 17 15h3a2 2 0 0 1 2 2v3a2 2 0 0 1-2 2A18 18 0 0 1 2 4a2 2 0 0 1 2-2h3a2 2 0 0 1 2 2v3a2 2 0 0 1-.8 1.6l-.468.351a1 1 0 0 0-.292 1.233 14 14 0 0 0 6.392 6.384",key:"9njp5v"}]]);var p=t(1480),v=t(68038),f=t(86399),j=t(95763);let y=(0,d.A)("phone-off",[["path",{d:"M10.1 13.9a14 14 0 0 0 3.732 2.668 1 1 0 0 0 1.213-.303l.355-.465A2 2 0 0 1 17 15h3a2 2 0 0 1 2 2v3a2 2 0 0 1-2 2 18 18 0 0 1-12.728-5.272",key:"1wngk7"}],["path",{d:"M22 2 2 22",key:"y4kqgn"}],["path",{d:"M4.76 13.582A18 18 0 0 1 2 4a2 2 0 0 1 2-2h3a2 2 0 0 1 2 2v3a2 2 0 0 1-.8 1.6l-.468.351a1 1 0 0 0-.292 1.233 14 14 0 0 0 .244.473",key:"10hv5p"}]]);var N=t(34739);function g({sessionId:e,onCallEnd:s}){let[t,d]=(0,r.useState)(null),[g,w]=(0,r.useState)(!1),[k,b]=(0,r.useState)(!0),[A,S]=(0,r.useState)(!0),[q,C]=(0,r.useState)(!1),[M,P]=(0,r.useState)(!0),[T,$]=(0,r.useState)(null),[_,z]=(0,r.useState)(0),[E,I]=(0,r.useState)(!1),[O,D]=(0,r.useState)([]),L=async()=>{try{P(!0);let s=await fetch(`/api/video-call?sessionId=${e}`),t=await s.json();d(t)}catch(e){$(e instanceof Error?e.message:"Failed to load meeting room")}finally{P(!1)}},F=async()=>{if(t)try{await fetch("/api/video-call",{method:"PATCH",headers:{"Content-Type":"application/json"},body:JSON.stringify({sessionId:e,status:"InProgress"})});let s=await fetch("/api/video-call",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({action:"generateToken",channelName:t.roomId,uid:t.isTeacher?"teacher":"student"})});await s.json(),w(!0),D([t.isTeacher?t.teacherName:t.studentName])}catch(e){$(e instanceof Error?e.message:"Failed to join call")}},G=async()=>{if(t)try{await fetch("/api/video-call",{method:"PATCH",headers:{"Content-Type":"application/json"},body:JSON.stringify({sessionId:e,status:"Completed"})}),w(!1),s?.()}catch(e){$(e instanceof Error?e.message:"Failed to end call")}},U=()=>{b(!k)},V=()=>{S(!A)};return M?(0,a.jsx)(i.Zp,{className:"w-full max-w-4xl mx-auto",children:(0,a.jsx)(i.Wu,{className:"p-8 text-center",children:(0,a.jsxs)("div",{className:"animate-pulse",children:[(0,a.jsx)(o.A,{className:"h-12 w-12 mx-auto mb-4 text-muted-foreground"}),(0,a.jsx)("p",{children:"Loading video call..."})]})})}):T?(0,a.jsx)(i.Zp,{className:"w-full max-w-4xl mx-auto",children:(0,a.jsx)(i.Wu,{className:"p-8 text-center",children:(0,a.jsxs)("div",{className:"text-red-500",children:[(0,a.jsx)(u,{className:"h-12 w-12 mx-auto mb-4"}),(0,a.jsx)("p",{className:"font-medium mb-2",children:"Call Error"}),(0,a.jsx)("p",{className:"text-sm",children:T}),(0,a.jsx)(n.$,{onClick:L,className:"mt-4",children:"Try Again"})]})})}):t?(0,a.jsx)("div",{className:"w-full h-full flex flex-col bg-gray-900 text-white",children:g?(0,a.jsxs)("div",{className:"flex-1 flex flex-col",children:[(0,a.jsxs)("div",{className:"bg-black/50 p-4 flex items-center justify-between",children:[(0,a.jsxs)("div",{className:"flex items-center gap-4",children:[(0,a.jsx)(l.E,{variant:"secondary",children:(e=>{let s=Math.floor(e/3600),t=Math.floor(e%3600/60),a=e%60;return s>0?`${s}:${t.toString().padStart(2,"0")}:${a.toString().padStart(2,"0")}`:`${t}:${a.toString().padStart(2,"0")}`})(_)}),(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)(p.A,{className:"h-4 w-4"}),(0,a.jsxs)("span",{className:"text-sm",children:[O.length," participant(s)"]})]})]}),(0,a.jsx)("div",{className:"flex items-center gap-2",children:(0,a.jsx)(l.E,{variant:"InProgress"===t.status?"default":"secondary",children:t.status})})]}),(0,a.jsxs)("div",{className:"flex-1 relative bg-gradient-to-br from-blue-900 to-purple-900 flex items-center justify-center",children:[(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)(c.Avatar,{className:"h-32 w-32 mx-auto mb-4",children:(0,a.jsx)(c.AvatarFallback,{className:"text-4xl",children:t.isTeacher?t.teacherName.charAt(0):t.studentName.charAt(0)})}),(0,a.jsx)("h3",{className:"text-xl font-medium",children:t.isTeacher?t.teacherName:t.studentName}),(0,a.jsx)("p",{className:"text-blue-200",children:t.isTeacher?"Teacher":"Student"}),q&&(0,a.jsxs)(l.E,{className:"mt-2 bg-green-600",children:[(0,a.jsx)(v.A,{className:"h-3 w-3 mr-1"}),"Screen Sharing"]})]}),(0,a.jsx)("div",{className:"absolute bottom-4 right-4 w-32 h-24 bg-black/50 rounded-lg flex items-center justify-center",children:k?(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)(o.A,{className:"h-6 w-6 mx-auto mb-1"}),(0,a.jsx)("span",{className:"text-xs",children:"You"})]}):(0,a.jsx)(u,{className:"h-6 w-6 text-gray-400"})})]}),(0,a.jsx)("div",{className:"bg-black p-4",children:(0,a.jsxs)("div",{className:"flex items-center justify-center gap-4",children:[(0,a.jsx)(n.$,{variant:A?"secondary":"destructive",size:"lg",className:"rounded-full w-12 h-12",onClick:V,children:A?(0,a.jsx)(x,{className:"h-5 w-5"}):(0,a.jsx)(h,{className:"h-5 w-5"})}),(0,a.jsx)(n.$,{variant:k?"secondary":"destructive",size:"lg",className:"rounded-full w-12 h-12",onClick:U,children:k?(0,a.jsx)(o.A,{className:"h-5 w-5"}):(0,a.jsx)(u,{className:"h-5 w-5"})}),(0,a.jsx)(n.$,{variant:q?"default":"secondary",size:"lg",className:"rounded-full w-12 h-12",onClick:()=>{C(!q)},children:(0,a.jsx)(v.A,{className:"h-5 w-5"})}),(0,a.jsx)(n.$,{variant:"secondary",size:"lg",className:"rounded-full w-12 h-12",onClick:()=>I(!E),children:(0,a.jsx)(f.A,{className:"h-5 w-5"})}),(0,a.jsx)(n.$,{variant:"secondary",size:"lg",className:"rounded-full w-12 h-12",children:(0,a.jsx)(j.A,{className:"h-5 w-5"})}),(0,a.jsx)(n.$,{variant:"destructive",size:"lg",className:"rounded-full w-12 h-12",onClick:G,children:(0,a.jsx)(y,{className:"h-5 w-5"})})]})})]}):(0,a.jsxs)(i.Zp,{className:"w-full max-w-2xl mx-auto mt-8",children:[(0,a.jsx)(i.aR,{children:(0,a.jsxs)(i.ZB,{className:"flex items-center gap-2",children:[(0,a.jsx)(o.A,{className:"h-5 w-5"}),t.sessionTitle]})}),(0,a.jsxs)(i.Wu,{className:"space-y-6",children:[(0,a.jsxs)("div",{className:"text-center space-y-4",children:[(0,a.jsx)(c.Avatar,{className:"h-20 w-20 mx-auto",children:(0,a.jsx)(c.AvatarFallback,{className:"text-2xl",children:t.isTeacher?t.teacherName.charAt(0):t.studentName.charAt(0)})}),(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"font-medium",children:t.isTeacher?`Teaching ${t.studentName}`:`Learning with ${t.teacherName}`}),(0,a.jsxs)("p",{className:"text-sm text-muted-foreground",children:["Scheduled ",(0,N.m)(new Date(t.scheduledTime),{addSuffix:!0})]}),(0,a.jsxs)("p",{className:"text-sm text-muted-foreground",children:["Duration: ",t.duration," minutes"]})]})]}),(0,a.jsxs)("div",{className:"flex justify-center gap-4",children:[(0,a.jsx)(n.$,{variant:k?"default":"destructive",size:"lg",onClick:U,children:k?(0,a.jsx)(o.A,{className:"h-4 w-4"}):(0,a.jsx)(u,{className:"h-4 w-4"})}),(0,a.jsx)(n.$,{variant:A?"default":"destructive",size:"lg",onClick:V,children:A?(0,a.jsx)(x,{className:"h-4 w-4"}):(0,a.jsx)(h,{className:"h-4 w-4"})})]}),(0,a.jsxs)(n.$,{onClick:F,size:"lg",className:"w-full",children:[(0,a.jsx)(m,{className:"h-4 w-4 mr-2"}),"Join Call"]})]})]})}):null}},19121:e=>{"use strict";e.exports=require("next/dist/server/app-render/action-async-storage.external.js")},21820:e=>{"use strict";e.exports=require("os")},27910:e=>{"use strict";e.exports=require("stream")},28354:e=>{"use strict";e.exports=require("util")},29021:e=>{"use strict";e.exports=require("fs")},29294:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-async-storage.external.js")},29770:(e,s,t)=>{"use strict";t.r(s),t.d(s,{GlobalError:()=>n.a,__next_app__:()=>u,pages:()=>d,routeModule:()=>x,tree:()=>o});var a=t(6855),r=t(99880),i=t(44858),n=t.n(i),l=t(84637),c={};for(let e in l)0>["default","tree","pages","GlobalError","__next_app__","routeModule"].indexOf(e)&&(c[e]=()=>l[e]);t.d(s,c);let o={children:["",{children:["video-call",{children:["[sessionId]",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(t.bind(t,89684)),"/Users/sanket/Documents/LMS-Organomed copy/app/video-call/[sessionId]/page.tsx"]}]},{}]},{layout:[()=>Promise.resolve().then(t.bind(t,80353)),"/Users/sanket/Documents/LMS-Organomed copy/app/video-call/layout.tsx"],metadata:{icon:[async e=>(await Promise.resolve().then(t.bind(t,3107))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}]},{layout:[()=>Promise.resolve().then(t.bind(t,68166)),"/Users/sanket/Documents/LMS-Organomed copy/app/layout.tsx"],"not-found":[()=>Promise.resolve().then(t.t.bind(t,89254,23)),"next/dist/client/components/not-found-error"],forbidden:[()=>Promise.resolve().then(t.t.bind(t,55007,23)),"next/dist/client/components/forbidden-error"],unauthorized:[()=>Promise.resolve().then(t.t.bind(t,42260,23)),"next/dist/client/components/unauthorized-error"],metadata:{icon:[async e=>(await Promise.resolve().then(t.bind(t,3107))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}]}.children,d=["/Users/sanket/Documents/LMS-Organomed copy/app/video-call/[sessionId]/page.tsx"],u={require:t,loadChunk:()=>Promise.resolve()},x=new a.AppPageRouteModule({definition:{kind:r.RouteKind.APP_PAGE,page:"/video-call/[sessionId]/page",pathname:"/video-call/[sessionId]",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:o}})},33873:e=>{"use strict";e.exports=require("path")},34631:e=>{"use strict";e.exports=require("tls")},37067:e=>{"use strict";e.exports=require("node:http")},42338:(e,s,t)=>{Promise.resolve().then(t.bind(t,99664))},44708:e=>{"use strict";e.exports=require("node:https")},55511:e=>{"use strict";e.exports=require("crypto")},55591:e=>{"use strict";e.exports=require("https")},57975:e=>{"use strict";e.exports=require("node:util")},60490:(e,s,t)=>{Promise.resolve().then(t.bind(t,15147))},63033:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-unit-async-storage.external.js")},68038:(e,s,t)=>{"use strict";t.d(s,{A:()=>a});let a=(0,t(45691).A)("monitor",[["rect",{width:"20",height:"14",x:"2",y:"3",rx:"2",key:"48i651"}],["line",{x1:"8",x2:"16",y1:"21",y2:"21",key:"1svkeh"}],["line",{x1:"12",x2:"12",y1:"17",y2:"21",key:"vw1qmm"}]])},74075:e=>{"use strict";e.exports=require("zlib")},77598:e=>{"use strict";e.exports=require("node:crypto")},78474:e=>{"use strict";e.exports=require("node:events")},79551:e=>{"use strict";e.exports=require("url")},79646:e=>{"use strict";e.exports=require("child_process")},80353:(e,s,t)=>{"use strict";t.r(s),t.d(s,{default:()=>r});var a=t(44789);function r({children:e}){return(0,a.jsx)("div",{className:"h-screen w-screen overflow-hidden",children:e})}},81630:e=>{"use strict";e.exports=require("http")},89684:(e,s,t)=>{"use strict";t.r(s),t.d(s,{default:()=>l});var a=t(44789),r=t(81436),i=t(99664),n=t(47202);async function l({params:e}){try{let{sessionId:s}=await e;return await (0,n.Z5)(s),(0,a.jsx)("div",{className:"h-screen w-screen bg-gray-900",children:(0,a.jsx)(i.default,{sessionId:s,onCallEnd:()=>{window.location.href="/dashboard/sessions"}})})}catch(e){console.error("Video call access error:",e),(0,r.notFound)()}}},91645:e=>{"use strict";e.exports=require("net")},94735:e=>{"use strict";e.exports=require("events")},96330:e=>{"use strict";e.exports=require("@prisma/client")},99664:(e,s,t)=>{"use strict";t.d(s,{default:()=>a});let a=(0,t(55547).registerClientReference)(function(){throw Error("Attempted to call the default export of \"/Users/sanket/Documents/LMS-Organomed copy/components/video/VideoCall.tsx\" from the server, but it's on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"/Users/sanket/Documents/LMS-Organomed copy/components/video/VideoCall.tsx","default")}};var s=require("../../../webpack-runtime.js");s.C(e);var t=e=>s(s.s=e),a=s.X(0,[7991,2692,1135,3831,1123,9716,5130,2959,580,6394],()=>t(29770));module.exports=a})();