exports.id=6394,exports.ids=[6394],exports.modules={15786:(e,t,r)=>{"use strict";r.d(t,{Z:()=>o});var n=r(57226);async function o(e){try{if(!process.env.EMAIL_HOST&&!process.env.EMAIL_USER)return console.log("---------------------------------------------------"),console.log("EMAIL SENT (MOCKED):"),console.log("To:",e.to),console.log("Subject:",e.subject),console.log("---------------------------------------------------"),!0;let t="gmail"===process.env.EMAIL_SERVICE?n.createTransport({service:"gmail",auth:{user:process.env.EMAIL_USER||"",pass:process.env.EMAIL_PASS||""}}):n.createTransport({host:process.env.EMAIL_HOST,port:parseInt(process.env.EMAIL_PORT||"587"),secure:"true"===process.env.EMAIL_SECURE,auth:{user:process.env.EMAIL_USER||"",pass:process.env.EMAIL_PASS||""}}),r={from:e.from||process.env.EMAIL_FROM||process.env.EMAIL_USER,to:e.to,subject:e.subject,html:e.html},o=await t.sendMail(r);return console.log("Email sent successfully:",o.messageId),!0}catch(e){return console.error("Error sending email:",e),!1}}},35979:()=>{},37010:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"unstable_rethrow",{enumerable:!0,get:function(){return function e(t){if((0,s.isNextRouterError)(t)||(0,i.isBailoutToCSRError)(t)||(0,u.isDynamicServerError)(t)||(0,a.isDynamicPostpone)(t)||(0,o.isPostpone)(t)||(0,n.isHangingPromiseRejectionError)(t))throw t;t instanceof Error&&"cause"in t&&e(t.cause)}}});let n=r(7412),o=r(55277),i=r(55798),s=r(33642),a=r(91707),u=r(38175);("function"==typeof t.default||"object"==typeof t.default&&null!==t.default)&&void 0===t.default.__esModule&&(Object.defineProperty(t.default,"__esModule",{value:!0}),Object.assign(t.default,t),e.exports=t.default)},37086:(e,t,r)=>{"use strict";r.d(t,{z:()=>o});var n=r(96330);let o=global.prisma||new n.PrismaClient},40051:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"unstable_rethrow",{enumerable:!0,get:function(){return n}});let n=r(37010).unstable_rethrow;("function"==typeof t.default||"object"==typeof t.default&&null!==t.default)&&void 0===t.default.__esModule&&(Object.defineProperty(t.default,"__esModule",{value:!0}),Object.assign(t.default,t),e.exports=t.default)},47202:(e,t,r)=>{"use strict";r.d(t,{KJ:()=>d,RN:()=>l,Z5:()=>u});var n=r(49522),o=r(37086),i=r(43831),s=r(52959),a=r(81436);async function u(e){let t=await n.j.api.getSession({headers:await (0,i.headers)()});t?.user?.id||(0,a.redirect)("/sign-in");let r=await o.z.liveSession.findUnique({where:{id:e},include:{teacher:{include:{user:!0}},student:!0}});if(!r)throw Error("Session not found");let s=r.teacher.userId===t.user.id,u=r.studentId===t.user.id;if(!s&&!u)throw Error("Unauthorized to access this session");return{sessionId:r.id,roomId:`room_${e}`,isTeacher:s,isStudent:u,teacherName:r.teacher.user.name,studentName:r.student?.name||"Student",sessionTitle:r.title||"Live Session",scheduledTime:r.scheduledAt,duration:r.duration,status:r.status}}async function d(e,t){let r=await n.j.api.getSession({headers:await (0,i.headers)()});r?.user?.id||(0,a.redirect)("/sign-in");let u=await o.z.liveSession.findUnique({where:{id:e},include:{teacher:!0}});if(!u)throw Error("Session not found");let d=u.teacher.userId===r.user.id,l=u.studentId===r.user.id;if(!d&&!l)throw Error("Unauthorized to access this session");return await o.z.liveSession.update({where:{id:e},data:{status:t,..."InProgress"===t&&{actualStartTime:new Date},..."completed"===t&&{actualEndTime:new Date}}}),(0,s.revalidatePath)("/dashboard/sessions"),{success:!0}}async function l(e,t){return{token:`agora_token_${e}_${t}_${Date.now()}`,channelName:e,userId:t,appId:process.env.AGORA_APP_ID||"demo_app_id"}}},49522:(e,t,r)=>{"use strict";r.d(t,{j:()=>d});var n=r(85817),o=r(95027),i=r(37086),s=r(94149),a=r(37628),u=r(15786);let d=(0,n.li)({database:(0,o._)(i.z,{provider:"postgresql"}),trustedOrigins:["http://localhost:3000","http://localhost:3001","http://localhost:3002","http://localhost:3003"],socialProviders:{github:{clientId:s._.AUTH_GITHUB_CLIENT_ID,clientSecret:s._.AUTH_GITHUB_SECRET}},emailAndPassword:{enabled:!0},user:{additionalFields:{role:{type:"string"}}},plugins:[(0,a.yI)({async sendVerificationOTP({email:e,otp:t}){await (0,u.Z)({to:e,subject:"KIDOKOOL - Verify your email",html:`
            <div style="font-family: Arial, sans-serif; max-width: 600px; margin: 0 auto; padding: 20px;">
              <div style="background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); color: white; padding: 30px 20px; text-align: center; border-radius: 10px; margin-bottom: 30px;">
                <h1>üîê Email Verification</h1>
              </div>
              <p>Hi there,</p>
              <p>Please use the following OTP to verify your email address:</p>
              <div style="background: #f8f9fa; padding: 20px; border-radius: 8px; text-align: center; margin: 20px 0; border-left: 4px solid #667eea;">
                <h2 style="color: #667eea; font-size: 36px; margin: 0; letter-spacing: 4px;">${t}</h2>
              </div>
              <p>This OTP will expire in 10 minutes for security reasons.</p>
              <div style="text-align: center; margin-top: 30px; color: #666; font-size: 14px;">
                <p>If you didn't request this verification, please ignore this email.</p>
              </div>
            </div>
          `})}}),(0,a.wr)()]})},52225:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),!function(e,t){for(var r in t)Object.defineProperty(e,r,{enumerable:!0,get:t[r]})}(t,{getRedirectError:function(){return s},getRedirectStatusCodeFromError:function(){return c},getRedirectTypeFromError:function(){return l},getURLFromRedirectError:function(){return d},permanentRedirect:function(){return u},redirect:function(){return a}});let n=r(3348),o=r(62098),i=r(19121).actionAsyncStorage;function s(e,t,r){void 0===r&&(r=n.RedirectStatusCode.TemporaryRedirect);let i=Object.defineProperty(Error(o.REDIRECT_ERROR_CODE),"__NEXT_ERROR_CODE",{value:"E394",enumerable:!1,configurable:!0});return i.digest=o.REDIRECT_ERROR_CODE+";"+t+";"+e+";"+r+";",i}function a(e,t){var r;throw null!=t||(t=(null==i||null==(r=i.getStore())?void 0:r.isAction)?o.RedirectType.push:o.RedirectType.replace),s(e,t,n.RedirectStatusCode.TemporaryRedirect)}function u(e,t){throw void 0===t&&(t=o.RedirectType.replace),s(e,t,n.RedirectStatusCode.PermanentRedirect)}function d(e){return(0,o.isRedirectError)(e)?e.digest.split(";").slice(2,-2).join(";"):null}function l(e){if(!(0,o.isRedirectError)(e))throw Object.defineProperty(Error("Not a redirect error"),"__NEXT_ERROR_CODE",{value:"E260",enumerable:!1,configurable:!0});return e.digest.split(";",2)[1]}function c(e){if(!(0,o.isRedirectError)(e))throw Object.defineProperty(Error("Not a redirect error"),"__NEXT_ERROR_CODE",{value:"E260",enumerable:!1,configurable:!0});return Number(e.digest.split(";").at(-2))}("function"==typeof t.default||"object"==typeof t.default&&null!==t.default)&&void 0===t.default.__esModule&&(Object.defineProperty(t.default,"__esModule",{value:!0}),Object.assign(t.default,t),e.exports=t.default)},52824:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),!function(e,t){for(var r in t)Object.defineProperty(e,r,{enumerable:!0,get:t[r]})}(t,{ReadonlyURLSearchParams:function(){return l},RedirectType:function(){return o.RedirectType},forbidden:function(){return s.forbidden},notFound:function(){return i.notFound},permanentRedirect:function(){return n.permanentRedirect},redirect:function(){return n.redirect},unauthorized:function(){return a.unauthorized},unstable_rethrow:function(){return u.unstable_rethrow}});let n=r(52225),o=r(62098),i=r(71197),s=r(96416),a=r(62691),u=r(40051);class d extends Error{constructor(){super("Method unavailable on `ReadonlyURLSearchParams`. Read more: https://nextjs.org/docs/app/api-reference/functions/use-search-params#updating-searchparams")}}class l extends URLSearchParams{append(){throw new d}delete(){throw new d}set(){throw new d}sort(){throw new d}}("function"==typeof t.default||"object"==typeof t.default&&null!==t.default)&&void 0===t.default.__esModule&&(Object.defineProperty(t.default,"__esModule",{value:!0}),Object.assign(t.default,t),e.exports=t.default)},62691:(e,t,r)=>{"use strict";function n(){throw Object.defineProperty(Error("`unauthorized()` is experimental and only allowed to be used when `experimental.authInterrupts` is enabled."),"__NEXT_ERROR_CODE",{value:"E411",enumerable:!1,configurable:!0})}Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"unauthorized",{enumerable:!0,get:function(){return n}}),r(96304).HTTP_ERROR_FALLBACK_ERROR_CODE,("function"==typeof t.default||"object"==typeof t.default&&null!==t.default)&&void 0===t.default.__esModule&&(Object.defineProperty(t.default,"__esModule",{value:!0}),Object.assign(t.default,t),e.exports=t.default)},71197:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"notFound",{enumerable:!0,get:function(){return o}});let n=""+r(96304).HTTP_ERROR_FALLBACK_ERROR_CODE+";404";function o(){let e=Object.defineProperty(Error(n),"__NEXT_ERROR_CODE",{value:"E394",enumerable:!1,configurable:!0});throw e.digest=n,e}("function"==typeof t.default||"object"==typeof t.default&&null!==t.default)&&void 0===t.default.__esModule&&(Object.defineProperty(t.default,"__esModule",{value:!0}),Object.assign(t.default,t),e.exports=t.default)},81436:(e,t,r)=>{"use strict";var n=r(52824);r.o(n,"notFound")&&r.d(t,{notFound:function(){return n.notFound}}),r.o(n,"redirect")&&r.d(t,{redirect:function(){return n.redirect}})},94149:(e,t,r)=>{"use strict";r.d(t,{_:()=>i});var n=r(97191),o=r(79082);let i=(0,n.w)({server:{DATABASE_URL:o.z.string().url(),BETTER_AUTH_SECRET:o.z.string().min(1),BETTER_AUTH_URL:o.z.string().url(),AUTH_GITHUB_CLIENT_ID:o.z.string().min(1),AUTH_GITHUB_SECRET:o.z.string().min(1),EMAIL_SERVICE:o.z.string().optional(),EMAIL_HOST:o.z.string().optional(),EMAIL_PORT:o.z.string().optional(),EMAIL_SECURE:o.z.string().optional(),EMAIL_USER:o.z.string().optional(),EMAIL_PASS:o.z.string().optional(),EMAIL_FROM:o.z.string().optional(),AWS_ACCESS_KEY_ID:o.z.string().min(1),AWS_SECRET_ACCESS_KEY:o.z.string().min(1),AWS_ENDPOINT_URL_S3:o.z.string().min(1),AWS_ENDPOINT_URL_IAM:o.z.string().min(1),AWS_REGION:o.z.string().min(1),STRIPE_SECRET_KEY:o.z.string().min(1),STRIPE_WEBHOOK_SECRET:o.z.string().min(1)},skipValidation:!!process.env.SKIP_ENV_VALIDATION,client:{NEXT_PUBLIC_S3_BUCKET_NAME_IMAGES:o.z.string().min(1)},experimental__runtimeEnv:{NEXT_PUBLIC_S3_BUCKET_NAME_IMAGES:"placeholder-bucket"}})},95651:()=>{},96416:(e,t,r)=>{"use strict";function n(){throw Object.defineProperty(Error("`forbidden()` is experimental and only allowed to be enabled when `experimental.authInterrupts` is enabled."),"__NEXT_ERROR_CODE",{value:"E488",enumerable:!1,configurable:!0})}Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"forbidden",{enumerable:!0,get:function(){return n}}),r(96304).HTTP_ERROR_FALLBACK_ERROR_CODE,("function"==typeof t.default||"object"==typeof t.default&&null!==t.default)&&void 0===t.default.__esModule&&(Object.defineProperty(t.default,"__esModule",{value:!0}),Object.assign(t.default,t),e.exports=t.default)}};