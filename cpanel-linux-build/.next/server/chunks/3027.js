"use strict";exports.id=3027,exports.ids=[3027],exports.modules={12810:(e,s,t)=>{t.d(s,{Label:()=>n});var r=t(21551);t(70794);var i=t(59720),a=t(3413);function n({className:e,...s}){return(0,r.jsx)(i.b,{"data-slot":"label",className:(0,a.cn)("flex items-center gap-2 text-sm leading-none font-medium select-none group-data-[disabled=true]:pointer-events-none group-data-[disabled=true]:opacity-50 peer-disabled:cursor-not-allowed peer-disabled:opacity-50",e),...s})}},14674:(e,s,t)=>{t.d(s,{d:()=>j});var r=t(21551),i=t(70794),a=t(50761),n=t(34460),l=t(3413),o=t(60299),c=t(44117),d=t(97662),m=t(37996),u=t(90778),g=t(13962);function p({isDragActive:e}){return(0,r.jsxs)("div",{className:"text-center",children:[(0,r.jsx)("div",{className:"flex items-center mx-auto justify-center size-12 rounded-full bg-muted mb-4",children:(0,r.jsx)(o.A,{className:(0,l.cn)("size-6 text-muted-foreground",e&&"text-primary")})}),(0,r.jsxs)("p",{className:"text-base font-semibold text-foreground",children:["Drop your files here or"," ",(0,r.jsx)("span",{className:"text-primary font-bold cursor-pointer",children:"click to upload"})]}),(0,r.jsx)(u.$,{type:"button",className:"mt-4",children:"Select File"})]})}function h(){return(0,r.jsxs)("div",{className:" text-center",children:[(0,r.jsx)("div",{className:"flex items-center mx-auto justify-center size-12 rounded-full bg-destructive/30 mb-4",children:(0,r.jsx)(c.A,{className:(0,l.cn)("size-6 text-destructive")})}),(0,r.jsx)("p",{className:"text-base font-semibold",children:"Upload Failed"}),(0,r.jsx)("p",{className:"text-xs mt-1 text-muted-foreground",children:"Something went wrong"}),(0,r.jsx)(u.$,{className:"mt-4",type:"button",children:"Retry File Selection"})]})}function x({previewUrl:e,isDeleting:s,handleRemoveFile:t,fileType:i}){return(0,r.jsxs)("div",{className:"relative group w-full h-full flex items-center justify-center",children:["video"===i?(0,r.jsx)("video",{src:e,controls:!0,className:"rounded-md w-full h-full"}):(0,r.jsx)(g.default,{src:e,alt:"Uploaded File",fill:!0,className:"object-contain p-2"}),(0,r.jsx)(u.$,{variant:"destructive",size:"icon",className:(0,l.cn)("absolute top-4 right-4"),onClick:t,disabled:s,children:s?(0,r.jsx)(d.A,{className:"size-4 animate-spin"}):(0,r.jsx)(m.A,{className:"size-4"})})]})}function b({progress:e,file:s}){return(0,r.jsxs)("div",{className:"text-center flex justify-center items-center flex-col",children:[(0,r.jsx)("p",{children:e}),(0,r.jsx)("p",{className:"mt-2 text-sm font-medium text-foreground",children:"Uploading..."}),(0,r.jsx)("p",{className:"mt-1 text-xs text-muted-foreground truncate max-w-xs",children:s.name})]})}var f=t(77111),z=t(21520),v=t(20557);function j({onChange:e,value:s,fileTypeAccepted:t}){let o=(0,v.e)(s||""),[c,d]=(0,i.useState)({error:!1,file:null,id:null,uploading:!1,progress:0,isDeleting:!1,fileType:t,key:s,objectUrl:s?o:void 0}),m=(0,i.useCallback)(async s=>{d(e=>({...e,uploading:!0,progress:0}));try{if("image"===t){let t=new FormData;t.append("file",s);let r=await fetch("/api/upload/proxy",{method:"POST",body:t});if(!r.ok){let e=await r.text();throw Error(`Upload failed: ${r.status} ${r.statusText} - ${e}`)}let{key:i}=await r.json();d(e=>({...e,progress:100,uploading:!1,key:i})),e?.(i),f.oR.success("File uploaded successfully");return}let r=await fetch("/api/s3/upload",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({fileName:s.name,contentType:s.type,size:s.size,isImage:!1}),redirect:"manual"});if("opaqueredirect"===r.type||307===r.status||302===r.status){f.oR.error("Authentication session expired. Please refresh the page."),d(e=>({...e,uploading:!1,error:!0}));return}if(!r.ok){let e=await r.text(),s="Failed to get presigned URL";try{s=JSON.parse(e).error||s}catch{s=e||s}f.oR.error(s),d(e=>({...e,uploading:!1,progress:0,error:!0}));return}let{presignedUrl:i,key:a}=await r.json();await new Promise((t,r)=>{let n=new XMLHttpRequest;n.upload.onprogress=e=>{if(e.lengthComputable){let s=e.loaded/e.total*100;d(e=>({...e,progress:Math.round(s)}))}},n.onload=()=>{200===n.status||204===n.status?(d(e=>({...e,progress:100,uploading:!1,key:a})),e?.(a),f.oR.success("File uploaded succesfully"),t()):r(Error(`Upload failed: ${n.status} ${n.statusText}`))},n.onerror=()=>{r(Error("Upload failed"))},n.open("PUT",i),n.setRequestHeader("Content-Type",s.type),n.send(s)})}catch(e){console.error("Upload error details:",e),f.oR.error(e.message||"Something went wrong during upload"),d(e=>({...e,uploading:!1,progress:0,error:!0}))}},[t,e]),u=(0,i.useCallback)(e=>{if(e.length>0){let s=e[0];c.objectUrl&&!c.objectUrl.startsWith("http")&&URL.revokeObjectURL(c.objectUrl),d({file:s,uploading:!1,progress:0,objectUrl:URL.createObjectURL(s),error:!1,id:(0,z.A)(),isDeleting:!1,fileType:t}),m(s)}},[c.objectUrl,m,t]);async function g(){if(!c.isDeleting&&c.objectUrl)try{if(d(e=>({...e,isDeleting:!0})),!(await fetch("/api/s3/delete",{method:"DELETE",headers:{"Content-Type":"application/json"},body:JSON.stringify({key:c.key})})).ok){f.oR.error("Failed to remove file from storage"),d(e=>({...e,isDeleting:!0,error:!0}));return}c.objectUrl&&!c.objectUrl.startsWith("http")&&URL.revokeObjectURL(c.objectUrl),e?.(""),d(()=>({file:null,uploading:!1,progress:0,objectUrl:void 0,error:!1,fileType:t,id:null,isDeleting:!1})),f.oR.success("File removed successfully")}catch{f.oR.error("Error removing file. please try again"),d(e=>({...e,isDeleting:!1,error:!0}))}}let{getRootProps:j,getInputProps:A,isDragActive:E}=(0,a.VB)({onDrop:u,accept:"video"===t?{"video/*":[]}:{"image/*":[]},maxFiles:1,multiple:!1,maxSize:"image"===t?5242880:524288e4,onDropRejected:function(e){if(e.length){let s=e.find(e=>"too-many-files"===e.errors[0].code);e.find(e=>"file-too-large"===e.errors[0].code)&&f.oR.error("File Size exceeds the limit"),s&&f.oR.error("Too many files selected, max is 1")}},disabled:c.uploading||!!c.objectUrl});return(0,r.jsx)(n.Zp,{...j(),className:(0,l.cn)("relative border-2 border-dashed transition-colors duration-200 ease-in-out w-full h-64",E?"border-primary bg-primary/10 border-solid":"border-border hover:border-primary"),children:(0,r.jsxs)(n.Wu,{className:"flex items-center justify-center h-full w-full p-4",children:[(0,r.jsx)("input",{...A()}),c.uploading?(0,r.jsx)(b,{file:c.file,progress:c.progress}):c.error?(0,r.jsx)(h,{}):c.objectUrl?(0,r.jsx)(x,{handleRemoveFile:g,previewUrl:c.objectUrl,isDeleting:c.isDeleting,fileType:c.fileType}):(0,r.jsx)(p,{isDragActive:E})]})})}},17985:(e,s,t)=>{t.d(s,{HH:()=>d,Ik:()=>a,Lz:()=>c,Oo:()=>n,Ps:()=>i,eo:()=>l,f_:()=>o,qz:()=>m});var r=t(31167);let i=["Beginner","Intermediate","Advanced"],a=["Draft","Published","Archived"],n=["Development","Business","Finance","IT & Software","Office Productivity","Personal Development","Design","Marketing","Health & Fitness","Music","Teaching & Academics","Language Learning","Photography","Lifestyle"],l=["English","Spanish","French","German","Italian","Portuguese","Russian","Chinese","Japanese","Korean","Arabic","Hindi","Other"],o=r.z.object({title:r.z.string().min(3,{message:"Title must be at least 3 characters long"}).max(100,{message:"Title must be at most 100 characters long"}),description:r.z.string().min(3,{message:"Description must be at least 3 characters long"}),fileKey:r.z.string().min(1,{message:"File is required"}),price:r.z.coerce.number().min(1,{message:"Price must be a positive number"}),duration:r.z.coerce.number().min(1,{message:"Duration must be at least 1 hour"}).max(500,{message:"Duration must be at most 500 hours"}),level:r.z.enum(i,{message:"Level is required"}),category:r.z.enum(n,{message:"Category is required"}),smallDescription:r.z.string().min(3,{message:"Small Description must be at least 3 characters long"}).max(200,{message:"Small Description must be at most 200 characters long"}),slug:r.z.string().min(3,{message:"Slug must be at least 3 characters long"}),status:r.z.enum(a,{message:"Status is required"}),language:r.z.enum(l).optional(),tags:r.z.array(r.z.string()).optional(),prerequisites:r.z.string().optional(),learningOutcomes:r.z.array(r.z.string()).optional(),isFeatured:r.z.boolean().default(!1),discountPrice:r.z.coerce.number().optional(),discountExpiry:r.z.date().optional()}),c=r.z.object({bio:r.z.string().min(10,{message:"Bio must be at least 10 characters"}).max(1e3,{message:"Bio must be less than 1000 characters"}),expertise:r.z.array(r.z.string()).min(1,{message:"At least one expertise area is required"}),languages:r.z.array(r.z.string()).min(1,{message:"At least one language is required"}),hourlyRate:r.z.coerce.number().min(5,{message:"Hourly rate must be at least $5"}).optional(),timezone:r.z.string().optional(),website:r.z.string().url().optional().or(r.z.literal("")),linkedin:r.z.string().url().optional().or(r.z.literal("")),twitter:r.z.string().url().optional().or(r.z.literal("")),youtube:r.z.string().url().optional().or(r.z.literal("")),qualifications:r.z.array(r.z.string()).optional(),certifications:r.z.array(r.z.string()).optional()});r.z.object({rating:r.z.number().min(1,{message:"Rating must be at least 1"}).max(5,{message:"Rating must be at most 5"}),title:r.z.string().min(3,{message:"Title must be at least 3 characters"}).max(100,{message:"Title must be less than 100 characters"}).optional(),comment:r.z.string().min(10,{message:"Comment must be at least 10 characters"}).max(500,{message:"Comment must be less than 500 characters"})}),r.z.object({teacherId:r.z.string().min(1,{message:"Teacher is required"}),title:r.z.string().min(3,{message:"Title must be at least 3 characters"}),description:r.z.string().optional(),subject:r.z.string().optional(),scheduledAt:r.z.date({message:"Scheduled time is required"}),duration:r.z.coerce.number().min(15,{message:"Duration must be at least 15 minutes"}).max(480,{message:"Duration must be at most 8 hours"}),price:r.z.coerce.number().min(5,{message:"Price must be at least $5"})});let d=r.z.object({name:r.z.string().min(3,{message:"Name must be at least 3 characters long"}),courseId:r.z.string().uuid({message:"Invalid course id"})}),m=r.z.object({name:r.z.string().min(3,{message:"Name must be at least 3 characters long"}),chapterId:r.z.string().uuid({message:"Invalid chapter ID"}),courseId:r.z.string().uuid({message:"Invalid course ID"}),description:r.z.string().min(3,{message:"Description must be at least 3 characters long"}).optional(),videoKey:r.z.string().optional(),thumbnailKey:r.z.string().optional()})},18056:(e,s,t)=>{t.d(s,{d:()=>T});var r=t(21551),i=t(57235),a=t(33827),n=t(26793);t(70794);var l=t(61969),o=t(12226),c=t(3413);let d=(0,o.F)("inline-flex items-center justify-center gap-2 rounded-md text-sm font-medium hover:bg-muted hover:text-muted-foreground disabled:pointer-events-none disabled:opacity-50 data-[state=on]:bg-accent data-[state=on]:text-accent-foreground [&_svg]:pointer-events-none [&_svg:not([class*='size-'])]:size-4 [&_svg]:shrink-0 focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] outline-none transition-[color,box-shadow] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive whitespace-nowrap",{variants:{variant:{default:"bg-transparent",outline:"border border-input bg-transparent shadow-xs hover:bg-accent hover:text-accent-foreground"},size:{default:"h-9 px-2 min-w-9",sm:"h-8 px-1.5 min-w-8",lg:"h-10 px-2.5 min-w-10"}},defaultVariants:{variant:"default",size:"default"}});function m({className:e,variant:s,size:t,...i}){return(0,r.jsx)(l.b,{"data-slot":"toggle",className:(0,c.cn)(d({variant:s,size:t,className:e})),...i})}var u=t(92473),g=t(64858),p=t(12383),h=t(84168),x=t(14329),b=t(73918),f=t(94734),z=t(62922),v=t(22503),j=t(49563),A=t(10678),E=t(17932),_=t(87022),I=t(90778);function y({editor:e}){return e?(0,r.jsx)("div",{className:"border border-input border-t-0 border-x-0  rounded-t-lg p-2 bg-card flex flex-wrap gap-1 items-center",children:(0,r.jsxs)(n.Bc,{children:[(0,r.jsxs)("div",{className:"flex flex-wrap gap-1",children:[(0,r.jsxs)(n.m_,{children:[(0,r.jsx)(n.k$,{asChild:!0,children:(0,r.jsx)(m,{size:"sm",pressed:e.isActive("bold"),onPressedChange:()=>e.chain().focus().toggleBold().run(),className:(0,c.cn)(e.isActive("bold")&&"bg-muted text-muted-foreground"),children:(0,r.jsx)(u.A,{})})}),(0,r.jsx)(n.ZI,{children:"Bold"})]}),(0,r.jsxs)(n.m_,{children:[(0,r.jsx)(n.k$,{asChild:!0,children:(0,r.jsx)(m,{size:"sm",pressed:e.isActive("italic"),onPressedChange:()=>e.chain().focus().toggleItalic().run(),className:(0,c.cn)(e.isActive("italic")&&"bg-muted text-muted-foreground"),children:(0,r.jsx)(g.A,{})})}),(0,r.jsx)(n.ZI,{children:"Italic"})]}),(0,r.jsxs)(n.m_,{children:[(0,r.jsx)(n.k$,{asChild:!0,children:(0,r.jsx)(m,{size:"sm",pressed:e.isActive("strike"),onPressedChange:()=>e.chain().focus().toggleStrike().run(),className:(0,c.cn)(e.isActive("strike")&&"bg-muted text-muted-foreground"),children:(0,r.jsx)(p.A,{})})}),(0,r.jsx)(n.ZI,{children:"Strike"})]}),(0,r.jsxs)(n.m_,{children:[(0,r.jsx)(n.k$,{asChild:!0,children:(0,r.jsx)(m,{size:"sm",pressed:e.isActive("heading",{level:1}),onPressedChange:()=>e.chain().focus().toggleHeading({level:1}).run(),className:(0,c.cn)(e.isActive("heading",{level:1})&&"bg-muted text-muted-foreground"),children:(0,r.jsx)(h.A,{})})}),(0,r.jsx)(n.ZI,{children:"Heading 1"})]}),(0,r.jsxs)(n.m_,{children:[(0,r.jsx)(n.k$,{asChild:!0,children:(0,r.jsx)(m,{size:"sm",pressed:e.isActive("heading",{level:2}),onPressedChange:()=>e.chain().focus().toggleHeading({level:2}).run(),className:(0,c.cn)(e.isActive("heading",{level:2})&&"bg-muted text-muted-foreground"),children:(0,r.jsx)(x.A,{})})}),(0,r.jsx)(n.ZI,{children:"Heading 2"})]}),(0,r.jsxs)(n.m_,{children:[(0,r.jsx)(n.k$,{asChild:!0,children:(0,r.jsx)(m,{size:"sm",pressed:e.isActive("heading",{level:3}),onPressedChange:()=>e.chain().focus().toggleHeading({level:3}).run(),className:(0,c.cn)(e.isActive("heading",{level:3})&&"bg-muted text-muted-foreground"),children:(0,r.jsx)(b.A,{})})}),(0,r.jsx)(n.ZI,{children:"Heading 3"})]}),(0,r.jsxs)(n.m_,{children:[(0,r.jsx)(n.k$,{asChild:!0,children:(0,r.jsx)(m,{size:"sm",pressed:e.isActive("bulletList"),onPressedChange:()=>e.chain().focus().toggleBulletList().run(),className:(0,c.cn)(e.isActive("bulletList")&&"bg-muted text-muted-foreground"),children:(0,r.jsx)(f.A,{})})}),(0,r.jsx)(n.ZI,{children:"Bullet List"})]}),(0,r.jsxs)(n.m_,{children:[(0,r.jsx)(n.k$,{asChild:!0,children:(0,r.jsx)(m,{size:"sm",pressed:e.isActive("orderedList"),onPressedChange:()=>e.chain().focus().toggleOrderedList().run(),className:(0,c.cn)(e.isActive("orderedList")&&"bg-muted text-muted-foreground"),children:(0,r.jsx)(z.A,{})})}),(0,r.jsx)(n.ZI,{children:"Ordered List"})]})]}),(0,r.jsx)("div",{className:"w-px h-6 bg-border mx-2"}),(0,r.jsxs)("div",{className:"flex flex-wrap gap-1",children:[(0,r.jsxs)(n.m_,{children:[(0,r.jsx)(n.k$,{asChild:!0,children:(0,r.jsx)(m,{size:"sm",pressed:e.isActive({textAlign:"left"}),onPressedChange:()=>e.chain().focus().setTextAlign("left").run(),className:(0,c.cn)(e.isActive({textAlign:"left"})&&"bg-muted text-muted-foreground"),children:(0,r.jsx)(v.A,{})})}),(0,r.jsx)(n.ZI,{children:"Align Left"})]}),(0,r.jsxs)(n.m_,{children:[(0,r.jsx)(n.k$,{asChild:!0,children:(0,r.jsx)(m,{size:"sm",pressed:e.isActive({textAlign:"center"}),onPressedChange:()=>e.chain().focus().setTextAlign("center").run(),className:(0,c.cn)(e.isActive({textAlign:"center"})&&"bg-muted text-muted-foreground"),children:(0,r.jsx)(j.A,{})})}),(0,r.jsx)(n.ZI,{children:"Align Center"})]}),(0,r.jsxs)(n.m_,{children:[(0,r.jsx)(n.k$,{asChild:!0,children:(0,r.jsx)(m,{size:"sm",pressed:e.isActive({textAlign:"right"}),onPressedChange:()=>e.chain().focus().setTextAlign("right").run(),className:(0,c.cn)(e.isActive({textAlign:"right"})&&"bg-muted text-muted-foreground"),children:(0,r.jsx)(A.A,{})})}),(0,r.jsx)(n.ZI,{children:"Align Right"})]})]}),(0,r.jsx)("div",{className:"w-px h-6 bg-border mx-2"}),(0,r.jsxs)("div",{className:"flex flex-wrap gap-1",children:[(0,r.jsxs)(n.m_,{children:[(0,r.jsx)(n.k$,{asChild:!0,children:(0,r.jsx)(I.$,{size:"sm",variant:"ghost",type:"button",onClick:()=>e.chain().focus().undo().run(),disabled:!e.can().undo(),children:(0,r.jsx)(E.A,{})})}),(0,r.jsx)(n.ZI,{children:"Undo"})]}),(0,r.jsxs)(n.m_,{children:[(0,r.jsx)(n.k$,{asChild:!0,children:(0,r.jsx)(I.$,{size:"sm",variant:"ghost",type:"button",onClick:()=>e.chain().focus().redo().run(),disabled:!e.can().redo(),children:(0,r.jsx)(_.A,{})})}),(0,r.jsx)(n.ZI,{children:"Redo"})]})]})]})}):null}var S=t(18673);function T({field:e}){let s=(0,i.hG)({extensions:[a.A,S.A.configure({types:["heading","paragraph"]})],editorProps:{attributes:{class:"min-h-[300px] p-4 focus:outline-none prose prose-sm sm:prose lg:prose-lg xl:prose-xl dark:prose-invert !w-full !max-w-none"}},immediatelyRender:!1,onUpdate:({editor:s})=>{e.onChange(JSON.stringify(s.getJSON()))},content:e.value?JSON.parse(e.value):"<p>Hello World \uD83D\uDE80</p>"});return(0,r.jsxs)("div",{className:"w-full border border-input rounded-lg overflow-hidden dark:bg-input/30",children:[(0,r.jsx)(y,{editor:s}),(0,r.jsx)(i.$Z,{editor:s})]})}},20557:(e,s,t)=>{t.d(s,{e:()=>n});var r=t(87016),i=t(31167);let a=(0,r.w)({server:{DATABASE_URL:i.z.string().url(),BETTER_AUTH_SECRET:i.z.string().min(1),BETTER_AUTH_URL:i.z.string().url(),AUTH_GITHUB_CLIENT_ID:i.z.string().min(1),AUTH_GITHUB_SECRET:i.z.string().min(1),EMAIL_SERVICE:i.z.string().optional(),EMAIL_HOST:i.z.string().optional(),EMAIL_PORT:i.z.string().optional(),EMAIL_SECURE:i.z.string().optional(),EMAIL_USER:i.z.string().optional(),EMAIL_PASS:i.z.string().optional(),EMAIL_FROM:i.z.string().optional(),AWS_ACCESS_KEY_ID:i.z.string().min(1),AWS_SECRET_ACCESS_KEY:i.z.string().min(1),AWS_ENDPOINT_URL_S3:i.z.string().min(1),AWS_ENDPOINT_URL_IAM:i.z.string().min(1),AWS_REGION:i.z.string().min(1),STRIPE_SECRET_KEY:i.z.string().min(1),STRIPE_WEBHOOK_SECRET:i.z.string().min(1)},skipValidation:!!process.env.SKIP_ENV_VALIDATION,client:{NEXT_PUBLIC_S3_BUCKET_NAME_IMAGES:i.z.string().min(1)},experimental__runtimeEnv:{NEXT_PUBLIC_S3_BUCKET_NAME_IMAGES:"placeholder-bucket"}});function n(e){return e?e.startsWith("http")?e:`https://${a.NEXT_PUBLIC_S3_BUCKET_NAME_IMAGES}.fly.storage.tigris.dev/${e}`:""}},22858:(e,s,t)=>{t.d(s,{_:()=>a});var r=t(41768),i=t(75367);let a=(0,r.w)({server:{DATABASE_URL:i.z.string().url(),BETTER_AUTH_SECRET:i.z.string().min(1),BETTER_AUTH_URL:i.z.string().url(),AUTH_GITHUB_CLIENT_ID:i.z.string().min(1),AUTH_GITHUB_SECRET:i.z.string().min(1),EMAIL_SERVICE:i.z.string().optional(),EMAIL_HOST:i.z.string().optional(),EMAIL_PORT:i.z.string().optional(),EMAIL_SECURE:i.z.string().optional(),EMAIL_USER:i.z.string().optional(),EMAIL_PASS:i.z.string().optional(),EMAIL_FROM:i.z.string().optional(),AWS_ACCESS_KEY_ID:i.z.string().min(1),AWS_SECRET_ACCESS_KEY:i.z.string().min(1),AWS_ENDPOINT_URL_S3:i.z.string().min(1),AWS_ENDPOINT_URL_IAM:i.z.string().min(1),AWS_REGION:i.z.string().min(1),STRIPE_SECRET_KEY:i.z.string().min(1),STRIPE_WEBHOOK_SECRET:i.z.string().min(1)},skipValidation:!!process.env.SKIP_ENV_VALIDATION,client:{NEXT_PUBLIC_S3_BUCKET_NAME_IMAGES:i.z.string().min(1)},experimental__runtimeEnv:{NEXT_PUBLIC_S3_BUCKET_NAME_IMAGES:"placeholder-bucket"}})},32520:(e,s,t)=>{t.d(s,{C5:()=>f,MJ:()=>x,Rr:()=>b,eI:()=>p,lR:()=>h,lV:()=>c,zB:()=>m});var r=t(21551),i=t(70794),a=t(26864),n=t(68376),l=t(3413),o=t(12810);let c=n.Op,d=i.createContext({}),m=({...e})=>(0,r.jsx)(d.Provider,{value:{name:e.name},children:(0,r.jsx)(n.xI,{...e})}),u=()=>{let e=i.useContext(d),s=i.useContext(g),{getFieldState:t}=(0,n.xW)(),r=(0,n.lN)({name:e.name}),a=t(e.name,r);if(!e)throw Error("useFormField should be used within <FormField>");let{id:l}=s;return{id:l,name:e.name,formItemId:`${l}-form-item`,formDescriptionId:`${l}-form-item-description`,formMessageId:`${l}-form-item-message`,...a}},g=i.createContext({});function p({className:e,...s}){let t=i.useId();return(0,r.jsx)(g.Provider,{value:{id:t},children:(0,r.jsx)("div",{"data-slot":"form-item",className:(0,l.cn)("grid gap-2",e),...s})})}function h({className:e,...s}){let{error:t,formItemId:i}=u();return(0,r.jsx)(o.Label,{"data-slot":"form-label","data-error":!!t,className:(0,l.cn)("data-[error=true]:text-destructive",e),htmlFor:i,...s})}function x({...e}){let{error:s,formItemId:t,formDescriptionId:i,formMessageId:n}=u();return(0,r.jsx)(a.DX,{"data-slot":"form-control",id:t,"aria-describedby":s?`${i} ${n}`:`${i}`,"aria-invalid":!!s,...e})}function b({className:e,...s}){let{formDescriptionId:t}=u();return(0,r.jsx)("p",{"data-slot":"form-description",id:t,className:(0,l.cn)("text-muted-foreground text-sm",e),...s})}function f({className:e,...s}){let{error:t,formMessageId:i}=u(),a=t?String(t?.message??""):s.children;return a?(0,r.jsx)("p",{"data-slot":"form-message",id:i,className:(0,l.cn)("text-destructive text-sm",e),...s,children:a}):null}},43532:(e,s,t)=>{t.d(s,{T:()=>r});async function r(e){try{return{data:await e,error:null}}catch(e){return{data:null,error:e}}}},48502:(e,s,t)=>{t.d(s,{li:()=>o,yl:()=>l});var r=t(90829),i=t(72240),a=t(55757),n=t(45185);let l=(0,n.cache)(async()=>{let e=await r.j.api.getSession({headers:await (0,i.b3)()});return e?"admin"!==e.user.role&&"teacher"!==e.user.role?(0,a.redirect)("/not-admin"):e:(0,a.redirect)("/login")});(0,n.cache)(async()=>{let e=await r.j.api.getSession({headers:await (0,i.b3)()});return e?"teacher"!==e.user.role&&"admin"!==e.user.role?(0,a.redirect)("/not-admin"):e:(0,a.redirect)("/login")}),(0,n.cache)(async()=>{let e=await r.j.api.getSession({headers:await (0,i.b3)()});return e?"admin"!==e.user.role?(0,a.redirect)("/not-admin"):e:(0,a.redirect)("/login")});let o=(0,n.cache)(async()=>await r.j.api.getSession({headers:await (0,i.b3)()}))},63388:(e,s,t)=>{t.d(s,{HH:()=>a,f_:()=>i,qz:()=>n});var r=t(75367);let i=r.z.object({title:r.z.string().min(3,{message:"Title must be at least 3 characters long"}).max(100,{message:"Title must be at most 100 characters long"}),description:r.z.string().min(3,{message:"Description must be at least 3 characters long"}),fileKey:r.z.string().min(1,{message:"File is required"}),price:r.z.coerce.number().min(1,{message:"Price must be a positive number"}),duration:r.z.coerce.number().min(1,{message:"Duration must be at least 1 hour"}).max(500,{message:"Duration must be at most 500 hours"}),level:r.z.enum(["Beginner","Intermediate","Advanced"],{message:"Level is required"}),category:r.z.enum(["Development","Business","Finance","IT & Software","Office Productivity","Personal Development","Design","Marketing","Health & Fitness","Music","Teaching & Academics","Language Learning","Photography","Lifestyle"],{message:"Category is required"}),smallDescription:r.z.string().min(3,{message:"Small Description must be at least 3 characters long"}).max(200,{message:"Small Description must be at most 200 characters long"}),slug:r.z.string().min(3,{message:"Slug must be at least 3 characters long"}),status:r.z.enum(["Draft","Published","Archived"],{message:"Status is required"}),language:r.z.enum(["English","Spanish","French","German","Italian","Portuguese","Russian","Chinese","Japanese","Korean","Arabic","Hindi","Other"]).optional(),tags:r.z.array(r.z.string()).optional(),prerequisites:r.z.string().optional(),learningOutcomes:r.z.array(r.z.string()).optional(),isFeatured:r.z.boolean().default(!1),discountPrice:r.z.coerce.number().optional(),discountExpiry:r.z.date().optional()});r.z.object({bio:r.z.string().min(10,{message:"Bio must be at least 10 characters"}).max(1e3,{message:"Bio must be less than 1000 characters"}),expertise:r.z.array(r.z.string()).min(1,{message:"At least one expertise area is required"}),languages:r.z.array(r.z.string()).min(1,{message:"At least one language is required"}),hourlyRate:r.z.coerce.number().min(5,{message:"Hourly rate must be at least $5"}).optional(),timezone:r.z.string().optional(),website:r.z.string().url().optional().or(r.z.literal("")),linkedin:r.z.string().url().optional().or(r.z.literal("")),twitter:r.z.string().url().optional().or(r.z.literal("")),youtube:r.z.string().url().optional().or(r.z.literal("")),qualifications:r.z.array(r.z.string()).optional(),certifications:r.z.array(r.z.string()).optional()}),r.z.object({rating:r.z.number().min(1,{message:"Rating must be at least 1"}).max(5,{message:"Rating must be at most 5"}),title:r.z.string().min(3,{message:"Title must be at least 3 characters"}).max(100,{message:"Title must be less than 100 characters"}).optional(),comment:r.z.string().min(10,{message:"Comment must be at least 10 characters"}).max(500,{message:"Comment must be less than 500 characters"})}),r.z.object({teacherId:r.z.string().min(1,{message:"Teacher is required"}),title:r.z.string().min(3,{message:"Title must be at least 3 characters"}),description:r.z.string().optional(),subject:r.z.string().optional(),scheduledAt:r.z.date({message:"Scheduled time is required"}),duration:r.z.coerce.number().min(15,{message:"Duration must be at least 15 minutes"}).max(480,{message:"Duration must be at most 8 hours"}),price:r.z.coerce.number().min(5,{message:"Price must be at least $5"})});let a=r.z.object({name:r.z.string().min(3,{message:"Name must be at least 3 characters long"}),courseId:r.z.string().uuid({message:"Invalid course id"})}),n=r.z.object({name:r.z.string().min(3,{message:"Name must be at least 3 characters long"}),chapterId:r.z.string().uuid({message:"Invalid chapter ID"}),courseId:r.z.string().uuid({message:"Invalid course ID"}),description:r.z.string().min(3,{message:"Description must be at least 3 characters long"}).optional(),videoKey:r.z.string().optional(),thumbnailKey:r.z.string().optional()})},79627:(e,s,t)=>{t.d(s,{z:()=>i});var r=t(96330);let i=global.prisma||new r.PrismaClient},90829:(e,s,t)=>{t.d(s,{j:()=>d});var r=t(64083),i=t(17212),a=t(79627),n=t(22858),l=t(898),o=t(1335);async function c(e){try{if(!process.env.EMAIL_HOST&&!process.env.EMAIL_USER)return console.log("---------------------------------------------------"),console.log("EMAIL SENT (MOCKED):"),console.log("To:",e.to),console.log("Subject:",e.subject),console.log("---------------------------------------------------"),!0;let s="gmail"===process.env.EMAIL_SERVICE?o.createTransport({service:"gmail",auth:{user:process.env.EMAIL_USER||"",pass:process.env.EMAIL_PASS||""}}):o.createTransport({host:process.env.EMAIL_HOST,port:parseInt(process.env.EMAIL_PORT||"587"),secure:"true"===process.env.EMAIL_SECURE,auth:{user:process.env.EMAIL_USER||"",pass:process.env.EMAIL_PASS||""}}),t={from:e.from||process.env.EMAIL_FROM||process.env.EMAIL_USER,to:e.to,subject:e.subject,html:e.html},r=await s.sendMail(t);return console.log("Email sent successfully:",r.messageId),!0}catch(e){return console.error("Error sending email:",e),!1}}let d=(0,r.li)({database:(0,i._)(a.z,{provider:"postgresql"}),trustedOrigins:["http://localhost:3000","http://localhost:3001","http://localhost:3002","http://localhost:3003"],socialProviders:{github:{clientId:n._.AUTH_GITHUB_CLIENT_ID,clientSecret:n._.AUTH_GITHUB_SECRET}},emailAndPassword:{enabled:!0},user:{additionalFields:{role:{type:"string"}}},plugins:[(0,l.yI)({async sendVerificationOTP({email:e,otp:s}){await c({to:e,subject:"KIDOKOOL - Verify your email",html:`
            <div style="font-family: Arial, sans-serif; max-width: 600px; margin: 0 auto; padding: 20px;">
              <div style="background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); color: white; padding: 30px 20px; text-align: center; border-radius: 10px; margin-bottom: 30px;">
                <h1>üîê Email Verification</h1>
              </div>
              <p>Hi there,</p>
              <p>Please use the following OTP to verify your email address:</p>
              <div style="background: #f8f9fa; padding: 20px; border-radius: 8px; text-align: center; margin: 20px 0; border-left: 4px solid #667eea;">
                <h2 style="color: #667eea; font-size: 36px; margin: 0; letter-spacing: 4px;">${s}</h2>
              </div>
              <p>This OTP will expire in 10 minutes for security reasons.</p>
              <div style="text-align: center; margin-top: 30px; color: #666; font-size: 14px;">
                <p>If you didn't request this verification, please ignore this email.</p>
              </div>
            </div>
          `})}}),(0,l.wr)()]})}};