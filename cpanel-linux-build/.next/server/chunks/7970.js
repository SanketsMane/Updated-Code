exports.id=7970,exports.ids=[7970],exports.modules={3069:(e,t,r)=>{"use strict";r.d(t,{BD:()=>a,Od:()=>o,UA:()=>s,j5:()=>n});var i=r(37086);async function a(){try{let[e,t,r,a]=await Promise.all([i.z.teacherVerification.count({where:{status:"Pending"}}),i.z.payoutRequest.count({where:{status:"Pending"}}),i.z.teacherProfile.count({where:{isVerified:!0}}),i.z.payoutRequest.aggregate({where:{status:"Completed",processedAt:{gte:new Date(new Date().getFullYear(),new Date().getMonth(),1)}},_sum:{requestedAmount:!0}})]);return{pendingVerifications:e,pendingPayouts:t,verifiedTeachers:r,monthlyPayouts:Number(a._sum.requestedAmount||0)}}catch(e){return console.error("Error fetching verification stats:",e),{pendingVerifications:0,pendingPayouts:0,verifiedTeachers:0,monthlyPayouts:0}}}async function s(){try{return await i.z.teacherVerification.findMany({where:{status:"Pending"},include:{teacher:{include:{user:{select:{id:!0,name:!0,email:!0,image:!0}}}}},orderBy:{submittedAt:"desc"}})}catch(e){return console.error("Error fetching pending verifications:",e),[]}}async function n(){try{return await i.z.payoutRequest.findMany({where:{status:"Pending"},include:{teacher:{include:{user:{select:{id:!0,name:!0,email:!0,image:!0}}}}},orderBy:{createdAt:"desc"}})}catch(e){return console.error("Error fetching pending payouts:",e),[]}}async function o(){try{let[e,t]=await Promise.all([i.z.teacherVerification.findMany({where:{status:{in:["Approved","Rejected"]},reviewedAt:{not:null}},include:{teacher:{include:{user:{select:{name:!0}}}}},orderBy:{reviewedAt:"desc"},take:5}),i.z.payoutRequest.findMany({where:{status:{in:["Completed","Approved"]},processedAt:{not:null}},include:{teacher:{include:{user:{select:{name:!0}}}}},orderBy:{processedAt:"desc"},take:5})]);return[...e.map(e=>({type:"verification",status:e.status,teacherName:e.teacher.user.name,timestamp:e.reviewedAt,amount:null})),...t.map(e=>({type:"payout",status:e.status,teacherName:e.teacher.user.name,timestamp:e.processedAt,amount:Number(e.requestedAmount)}))].sort((e,t)=>new Date(t.timestamp).getTime()-new Date(e.timestamp).getTime()).slice(0,4)}catch(e){return console.error("Error fetching recent activity:",e),[]}}},3121:(e,t,r)=>{"use strict";r.d(t,{ZT:()=>d,eZ:()=>c,li:()=>l,yl:()=>o});var i=r(49522),a=r(43831),s=r(81436),n=r(25360);let o=(0,n.cache)(async()=>{let e=await i.j.api.getSession({headers:await (0,a.headers)()});return e?"admin"!==e.user.role&&"teacher"!==e.user.role?(0,s.redirect)("/not-admin"):e:(0,s.redirect)("/login")}),c=(0,n.cache)(async()=>{let e=await i.j.api.getSession({headers:await (0,a.headers)()});return e?"teacher"!==e.user.role&&"admin"!==e.user.role?(0,s.redirect)("/not-admin"):e:(0,s.redirect)("/login")}),d=(0,n.cache)(async()=>{let e=await i.j.api.getSession({headers:await (0,a.headers)()});return e?"admin"!==e.user.role?(0,s.redirect)("/not-admin"):e:(0,s.redirect)("/login")}),l=(0,n.cache)(async()=>await i.j.api.getSession({headers:await (0,a.headers)()}))},18459:(e,t,r)=>{Promise.resolve().then(r.bind(r,93794))},19959:(e,t,r)=>{"use strict";r.d(t,{E:()=>c});var i=r(44789);r(25360);var a=r(54381),s=r(1036),n=r(51499);let o=(0,s.F)("inline-flex items-center justify-center rounded-md border px-2 py-0.5 text-xs font-medium w-fit whitespace-nowrap shrink-0 [&>svg]:size-3 gap-1 [&>svg]:pointer-events-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive transition-[color,box-shadow] overflow-hidden",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground [a&]:hover:bg-primary/90",secondary:"border-transparent bg-secondary text-secondary-foreground [a&]:hover:bg-secondary/90",destructive:"border-transparent bg-destructive text-white [a&]:hover:bg-destructive/90 focus-visible:ring-destructive/20 dark:focus-visible:ring-destructive/40 dark:bg-destructive/60",outline:"text-foreground [a&]:hover:bg-accent [a&]:hover:text-accent-foreground"}},defaultVariants:{variant:"default"}});function c({className:e,variant:t,asChild:r=!1,...s}){let c=r?a.DX:"span";return(0,i.jsx)(c,{"data-slot":"badge",className:(0,n.cn)(o({variant:t}),e),...s})}},28178:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>M});var i=r(21551),a=r(70794),s=r(35479),n=r(30519),o=r(68961),c=r(39524),d=r(63969),l=r(50082),u=r(73492),m=r(602),h=r(78862),g=r(23324),p=r(94434),v=r(14722),f=r(94),x=r(74238),y=r(28724),b=r(81761),w=r(86687),j=r(72296),A=r(89593),N=r(84294);let k={navMain:[{title:"Dashboard",url:"/admin",icon:s.A},{title:"Users",url:"/admin/users",icon:n.A},{title:"Teachers",url:"/admin/teachers",icon:o.A},{title:"Students",url:"/admin/students",icon:c.A},{title:"Courses",url:"/admin/courses",icon:d.A},{title:"Live Sessions",url:"/admin/live-sessions",icon:l.A},{title:"Payments",url:"/admin/payments",icon:u.A},{title:"Analytics",url:"/admin/analytics",icon:m.A},{title:"Verification Center",url:"/admin/verification",icon:h.A,items:[{title:"Profile Verification",url:"/admin/verification/profiles",icon:g.A},{title:"Payouts & Earnings",url:"/admin/verification/payouts",icon:p.A}]},{title:"Reports",url:"/admin/reports",icon:v.A},{title:"Content Review",url:"/admin/content-review",icon:h.A},{title:"Notifications",url:"/admin/notifications",icon:f.A}],navSecondary:[{title:"Settings",url:"/admin/settings",icon:x.A},{title:"Get Help",url:"/admin/help",icon:y.A},{title:"Search",url:"#",icon:b.A}]};function z({...e}){return(0,i.jsxs)(N.Bx,{collapsible:"offcanvas",...e,children:[(0,i.jsx)(N.Gh,{children:(0,i.jsx)(N.wZ,{children:(0,i.jsx)(N.FX,{children:(0,i.jsx)(N.Uj,{size:"lg",asChild:!0,className:"data-[slot=sidebar-menu-button]:!p-1.5 hover:bg-sidebar-accent/50 transition-colors",children:(0,i.jsxs)("div",{className:"flex items-center gap-2 px-2 py-1",children:[(0,i.jsx)("div",{className:"flex aspect-square size-8 items-center justify-center rounded-lg bg-sidebar-primary text-sidebar-primary-foreground",children:(0,i.jsx)(s.A,{className:"size-4"})}),(0,i.jsxs)("div",{className:"grid flex-1 text-left text-sm leading-tight",children:[(0,i.jsx)("span",{className:"truncate font-bold text-lg tracking-wide",children:"KIDOKOOL"}),(0,i.jsx)("span",{className:"truncate text-xs text-muted-foreground/70",children:"Admin Console"})]})]})})})})}),(0,i.jsxs)(N.Yv,{children:[(0,i.jsx)(w.J,{items:k.navMain}),(0,i.jsx)(j.e,{items:k.navSecondary,className:"mt-auto"})]}),(0,i.jsx)(N.CG,{children:(0,i.jsx)(A.r,{})})]})}var P=r(75627),D=r(16226),S=r(31965),C=r(97662);function M({children:e}){let{data:t,isPending:r}=(0,D.A)();(0,S.useRouter)();let[s,n]=(0,a.useState)(!1);return!s||r?(0,i.jsx)("div",{className:"min-h-screen flex items-center justify-center",children:(0,i.jsx)(C.A,{className:"h-8 w-8 animate-spin"})}):t&&"admin"===t.user.role?(0,i.jsxs)(N.GB,{style:{"--sidebar-width":"calc(var(--spacing) * 72)","--header-height":"4.25rem"},children:[(0,i.jsx)(z,{}),(0,i.jsxs)(N.sF,{children:[(0,i.jsx)(P.D,{}),(0,i.jsx)("div",{className:"flex flex-1 flex-col",children:(0,i.jsx)("div",{className:"@container/main flex flex-1 flex-col gap-2",children:(0,i.jsx)("div",{className:"flex flex-col gap-4 py-4 md:gap-6 md:py-6 px-4 lg:px-6",children:e})})})]})]}):null}},51499:(e,t,r)=>{"use strict";r.d(t,{cn:()=>s});var i=r(6852),a=r(22929);function s(...e){return(0,a.QP)((0,i.$)(e))}},62984:(e,t,r)=>{"use strict";r.d(t,{$:()=>c,r:()=>o});var i=r(44789);r(25360);var a=r(54381),s=r(1036),n=r(51499);let o=(0,s.F)("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium transition-all disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg:not([class*='size-'])]:size-4 shrink-0 [&_svg]:shrink-0 outline-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive",{variants:{variant:{default:"bg-primary text-primary-foreground shadow-xs hover:bg-primary/90",destructive:"bg-destructive text-white shadow-xs hover:bg-destructive/90 focus-visible:ring-destructive/20 dark:focus-visible:ring-destructive/40 dark:bg-destructive/60",outline:"border bg-background shadow-xs hover:bg-accent hover:text-accent-foreground dark:bg-input/30 dark:border-input dark:hover:bg-input/50",secondary:"bg-secondary text-secondary-foreground shadow-xs hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground dark:hover:bg-accent/50",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-9 px-4 py-2 has-[>svg]:px-3",sm:"h-8 rounded-md gap-1.5 px-3 has-[>svg]:px-2.5",lg:"h-10 rounded-md px-6 has-[>svg]:px-4",icon:"size-9"}},defaultVariants:{variant:"default",size:"default"}});function c({className:e,variant:t,size:r,asChild:s=!1,...c}){let d=s?a.DX:"button";return(0,i.jsx)(d,{suppressHydrationWarning:!0,"data-slot":"button",className:(0,n.cn)(o({variant:t,size:r,className:e})),...c})}},71603:(e,t,r)=>{Promise.resolve().then(r.bind(r,28178))},75627:(e,t,r)=>{"use strict";r.d(t,{D:()=>d});var i=r(21551),a=r(39461),s=r(84294),n=r(3910),o=r(99078),c=r(93226);function d(){return(0,i.jsx)("header",{className:"flex h-(--header-height) shrink-0 items-center gap-2 border-b transition-[width,height] ease-linear group-has-data-[collapsible=icon]/sidebar-wrapper:h-(--header-height)",children:(0,i.jsxs)("div",{className:"flex w-full items-center gap-1 px-4 lg:gap-2 lg:px-6",children:[(0,i.jsx)(s.x2,{className:"-ml-1"}),(0,i.jsx)(a.Separator,{orientation:"vertical",className:"mx-2 data-[orientation=vertical]:h-4"}),(0,i.jsx)("h1",{className:"text-base font-medium",children:"KIDOKOOL."}),(0,i.jsxs)("div",{className:"ml-auto flex items-center gap-2",children:[(0,i.jsx)(c.r,{}),(0,i.jsx)(o.d,{}),(0,i.jsx)(n.U,{})]})]})})}},93794:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>i});let i=(0,r(55547).registerClientReference)(function(){throw Error("Attempted to call the default export of \"/Users/sanket/Documents/LMS-Organomed copy/app/admin/layout.tsx\" from the server, but it's on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"/Users/sanket/Documents/LMS-Organomed copy/app/admin/layout.tsx","default")}};