(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[6427],{33788:(e,a,s)=>{"use strict";s.d(a,{$:()=>l,r:()=>c});var t=s(72311);s(62847);var r=s(37448),n=s(32560),i=s(98443);let c=(0,n.F)("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium transition-all disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg:not([class*='size-'])]:size-4 shrink-0 [&_svg]:shrink-0 outline-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive",{variants:{variant:{default:"bg-primary text-primary-foreground shadow-xs hover:bg-primary/90",destructive:"bg-destructive text-white shadow-xs hover:bg-destructive/90 focus-visible:ring-destructive/20 dark:focus-visible:ring-destructive/40 dark:bg-destructive/60",outline:"border bg-background shadow-xs hover:bg-accent hover:text-accent-foreground dark:bg-input/30 dark:border-input dark:hover:bg-input/50",secondary:"bg-secondary text-secondary-foreground shadow-xs hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground dark:hover:bg-accent/50",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-9 px-4 py-2 has-[>svg]:px-3",sm:"h-8 rounded-md gap-1.5 px-3 has-[>svg]:px-2.5",lg:"h-10 rounded-md px-6 has-[>svg]:px-4",icon:"size-9"}},defaultVariants:{variant:"default",size:"default"}});function l(e){let{className:a,variant:s,size:n,asChild:l=!1,...d}=e,o=l?r.DX:"button";return(0,t.jsx)(o,{suppressHydrationWarning:!0,"data-slot":"button",className:(0,i.cn)(c({variant:s,size:n,className:a})),...d})}},56398:(e,a,s)=>{"use strict";s.d(a,{BT:()=>l,Wu:()=>d,ZB:()=>c,Zp:()=>n,aR:()=>i});var t=s(72311);s(62847);var r=s(98443);function n(e){let{className:a,...s}=e;return(0,t.jsx)("div",{"data-slot":"card",className:(0,r.cn)("bg-card text-card-foreground flex flex-col gap-6 rounded-xl border py-6 shadow-sm",a),...s})}function i(e){let{className:a,...s}=e;return(0,t.jsx)("div",{"data-slot":"card-header",className:(0,r.cn)("@container/card-header grid auto-rows-min grid-rows-[auto_auto] items-start gap-1.5 px-6 has-data-[slot=card-action]:grid-cols-[1fr_auto] [.border-b]:pb-6",a),...s})}function c(e){let{className:a,...s}=e;return(0,t.jsx)("div",{"data-slot":"card-title",className:(0,r.cn)("leading-none font-semibold",a),...s})}function l(e){let{className:a,...s}=e;return(0,t.jsx)("div",{"data-slot":"card-description",className:(0,r.cn)("text-muted-foreground text-sm",a),...s})}function d(e){let{className:a,...s}=e;return(0,t.jsx)("div",{"data-slot":"card-content",className:(0,r.cn)("px-6",a),...s})}},71798:(e,a,s)=>{Promise.resolve().then(s.bind(s,75164))},75164:(e,a,s)=>{"use strict";s.d(a,{default:()=>N});var t=s(72311),r=s(62847),n=s(56398),i=s(33788),c=s(80085),l=s(86243),d=s(55149),o=s(24057),u=s(97581),x=s(97753),m=s(21278),h=s(43074),v=s(22892),f=s(12611),g=s(44960),j=s(34218),p=s(55627);function N(e){let{sessionId:a,onCallEnd:s}=e,[N,b]=(0,r.useState)(null),[w,y]=(0,r.useState)(!1),[k,A]=(0,r.useState)(!0),[S,T]=(0,r.useState)(!0),[C,z]=(0,r.useState)(!1),[E,$]=(0,r.useState)(!0),[_,F]=(0,r.useState)(null),[I,P]=(0,r.useState)(0),[O,Z]=(0,r.useState)(!1),[W,D]=(0,r.useState)([]);(0,r.useEffect)(()=>{H()},[a]),(0,r.useEffect)(()=>{let e;return w&&(e=setInterval(()=>{P(e=>e+1)},1e3)),()=>{e&&clearInterval(e)}},[w]);let H=async()=>{try{$(!0);let e=await fetch("/api/video-call?sessionId=".concat(a)),s=await e.json();b(s)}catch(e){F(e instanceof Error?e.message:"Failed to load meeting room")}finally{$(!1)}},J=async()=>{if(N)try{await fetch("/api/video-call",{method:"PATCH",headers:{"Content-Type":"application/json"},body:JSON.stringify({sessionId:a,status:"InProgress"})});let e=await fetch("/api/video-call",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({action:"generateToken",channelName:N.roomId,uid:N.isTeacher?"teacher":"student"})});await e.json(),y(!0),D([N.isTeacher?N.teacherName:N.studentName])}catch(e){F(e instanceof Error?e.message:"Failed to join call")}},B=async()=>{if(N)try{await fetch("/api/video-call",{method:"PATCH",headers:{"Content-Type":"application/json"},body:JSON.stringify({sessionId:a,status:"Completed"})}),y(!1),null==s||s()}catch(e){F(e instanceof Error?e.message:"Failed to end call")}},L=()=>{A(!k)},V=()=>{T(!S)};return E?(0,t.jsx)(n.Zp,{className:"w-full max-w-4xl mx-auto",children:(0,t.jsx)(n.Wu,{className:"p-8 text-center",children:(0,t.jsxs)("div",{className:"animate-pulse",children:[(0,t.jsx)(d.A,{className:"h-12 w-12 mx-auto mb-4 text-muted-foreground"}),(0,t.jsx)("p",{children:"Loading video call..."})]})})}):_?(0,t.jsx)(n.Zp,{className:"w-full max-w-4xl mx-auto",children:(0,t.jsx)(n.Wu,{className:"p-8 text-center",children:(0,t.jsxs)("div",{className:"text-red-500",children:[(0,t.jsx)(o.A,{className:"h-12 w-12 mx-auto mb-4"}),(0,t.jsx)("p",{className:"font-medium mb-2",children:"Call Error"}),(0,t.jsx)("p",{className:"text-sm",children:_}),(0,t.jsx)(i.$,{onClick:H,className:"mt-4",children:"Try Again"})]})})}):N?(0,t.jsx)("div",{className:"w-full h-full flex flex-col bg-gray-900 text-white",children:w?(0,t.jsxs)("div",{className:"flex-1 flex flex-col",children:[(0,t.jsxs)("div",{className:"bg-black/50 p-4 flex items-center justify-between",children:[(0,t.jsxs)("div",{className:"flex items-center gap-4",children:[(0,t.jsx)(c.E,{variant:"secondary",children:(e=>{let a=Math.floor(e/3600),s=Math.floor(e%3600/60),t=e%60;return a>0?"".concat(a,":").concat(s.toString().padStart(2,"0"),":").concat(t.toString().padStart(2,"0")):"".concat(s,":").concat(t.toString().padStart(2,"0"))})(I)}),(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)(h.A,{className:"h-4 w-4"}),(0,t.jsxs)("span",{className:"text-sm",children:[W.length," participant(s)"]})]})]}),(0,t.jsx)("div",{className:"flex items-center gap-2",children:(0,t.jsx)(c.E,{variant:"InProgress"===N.status?"default":"secondary",children:N.status})})]}),(0,t.jsxs)("div",{className:"flex-1 relative bg-gradient-to-br from-blue-900 to-purple-900 flex items-center justify-center",children:[(0,t.jsxs)("div",{className:"text-center",children:[(0,t.jsx)(l.Avatar,{className:"h-32 w-32 mx-auto mb-4",children:(0,t.jsx)(l.AvatarFallback,{className:"text-4xl",children:N.isTeacher?N.teacherName.charAt(0):N.studentName.charAt(0)})}),(0,t.jsx)("h3",{className:"text-xl font-medium",children:N.isTeacher?N.teacherName:N.studentName}),(0,t.jsx)("p",{className:"text-blue-200",children:N.isTeacher?"Teacher":"Student"}),C&&(0,t.jsxs)(c.E,{className:"mt-2 bg-green-600",children:[(0,t.jsx)(v.A,{className:"h-3 w-3 mr-1"}),"Screen Sharing"]})]}),(0,t.jsx)("div",{className:"absolute bottom-4 right-4 w-32 h-24 bg-black/50 rounded-lg flex items-center justify-center",children:k?(0,t.jsxs)("div",{className:"text-center",children:[(0,t.jsx)(d.A,{className:"h-6 w-6 mx-auto mb-1"}),(0,t.jsx)("span",{className:"text-xs",children:"You"})]}):(0,t.jsx)(o.A,{className:"h-6 w-6 text-gray-400"})})]}),(0,t.jsx)("div",{className:"bg-black p-4",children:(0,t.jsxs)("div",{className:"flex items-center justify-center gap-4",children:[(0,t.jsx)(i.$,{variant:S?"secondary":"destructive",size:"lg",className:"rounded-full w-12 h-12",onClick:V,children:S?(0,t.jsx)(u.A,{className:"h-5 w-5"}):(0,t.jsx)(x.A,{className:"h-5 w-5"})}),(0,t.jsx)(i.$,{variant:k?"secondary":"destructive",size:"lg",className:"rounded-full w-12 h-12",onClick:L,children:k?(0,t.jsx)(d.A,{className:"h-5 w-5"}):(0,t.jsx)(o.A,{className:"h-5 w-5"})}),(0,t.jsx)(i.$,{variant:C?"default":"secondary",size:"lg",className:"rounded-full w-12 h-12",onClick:()=>{z(!C)},children:(0,t.jsx)(v.A,{className:"h-5 w-5"})}),(0,t.jsx)(i.$,{variant:"secondary",size:"lg",className:"rounded-full w-12 h-12",onClick:()=>Z(!O),children:(0,t.jsx)(f.A,{className:"h-5 w-5"})}),(0,t.jsx)(i.$,{variant:"secondary",size:"lg",className:"rounded-full w-12 h-12",children:(0,t.jsx)(g.A,{className:"h-5 w-5"})}),(0,t.jsx)(i.$,{variant:"destructive",size:"lg",className:"rounded-full w-12 h-12",onClick:B,children:(0,t.jsx)(j.A,{className:"h-5 w-5"})})]})})]}):(0,t.jsxs)(n.Zp,{className:"w-full max-w-2xl mx-auto mt-8",children:[(0,t.jsx)(n.aR,{children:(0,t.jsxs)(n.ZB,{className:"flex items-center gap-2",children:[(0,t.jsx)(d.A,{className:"h-5 w-5"}),N.sessionTitle]})}),(0,t.jsxs)(n.Wu,{className:"space-y-6",children:[(0,t.jsxs)("div",{className:"text-center space-y-4",children:[(0,t.jsx)(l.Avatar,{className:"h-20 w-20 mx-auto",children:(0,t.jsx)(l.AvatarFallback,{className:"text-2xl",children:N.isTeacher?N.teacherName.charAt(0):N.studentName.charAt(0)})}),(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:"font-medium",children:N.isTeacher?"Teaching ".concat(N.studentName):"Learning with ".concat(N.teacherName)}),(0,t.jsxs)("p",{className:"text-sm text-muted-foreground",children:["Scheduled ",(0,p.m)(new Date(N.scheduledTime),{addSuffix:!0})]}),(0,t.jsxs)("p",{className:"text-sm text-muted-foreground",children:["Duration: ",N.duration," minutes"]})]})]}),(0,t.jsxs)("div",{className:"flex justify-center gap-4",children:[(0,t.jsx)(i.$,{variant:k?"default":"destructive",size:"lg",onClick:L,children:k?(0,t.jsx)(d.A,{className:"h-4 w-4"}):(0,t.jsx)(o.A,{className:"h-4 w-4"})}),(0,t.jsx)(i.$,{variant:S?"default":"destructive",size:"lg",onClick:V,children:S?(0,t.jsx)(u.A,{className:"h-4 w-4"}):(0,t.jsx)(x.A,{className:"h-4 w-4"})})]}),(0,t.jsxs)(i.$,{onClick:J,size:"lg",className:"w-full",children:[(0,t.jsx)(m.A,{className:"h-4 w-4 mr-2"}),"Join Call"]})]})]})}):null}},80085:(e,a,s)=>{"use strict";s.d(a,{E:()=>l});var t=s(72311);s(62847);var r=s(37448),n=s(32560),i=s(98443);let c=(0,n.F)("inline-flex items-center justify-center rounded-md border px-2 py-0.5 text-xs font-medium w-fit whitespace-nowrap shrink-0 [&>svg]:size-3 gap-1 [&>svg]:pointer-events-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive transition-[color,box-shadow] overflow-hidden",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground [a&]:hover:bg-primary/90",secondary:"border-transparent bg-secondary text-secondary-foreground [a&]:hover:bg-secondary/90",destructive:"border-transparent bg-destructive text-white [a&]:hover:bg-destructive/90 focus-visible:ring-destructive/20 dark:focus-visible:ring-destructive/40 dark:bg-destructive/60",outline:"text-foreground [a&]:hover:bg-accent [a&]:hover:text-accent-foreground"}},defaultVariants:{variant:"default"}});function l(e){let{className:a,variant:s,asChild:n=!1,...l}=e,d=n?r.DX:"span";return(0,t.jsx)(d,{"data-slot":"badge",className:(0,i.cn)(c({variant:s}),a),...l})}},86243:(e,a,s)=>{"use strict";s.d(a,{Avatar:()=>i,AvatarFallback:()=>l,AvatarImage:()=>c});var t=s(72311);s(62847);var r=s(48260),n=s(98443);function i(e){let{className:a,...s}=e;return(0,t.jsx)(r.bL,{"data-slot":"avatar",className:(0,n.cn)("relative flex size-8 shrink-0 overflow-hidden rounded-full",a),...s})}function c(e){let{className:a,...s}=e;return(0,t.jsx)(r._V,{"data-slot":"avatar-image",className:(0,n.cn)("aspect-square size-full",a),...s})}function l(e){let{className:a,...s}=e;return(0,t.jsx)(r.H4,{"data-slot":"avatar-fallback",className:(0,n.cn)("bg-muted flex size-full items-center justify-center rounded-full",a),...s})}},98443:(e,a,s)=>{"use strict";s.d(a,{cn:()=>n});var t=s(37246),r=s(18327);function n(){for(var e=arguments.length,a=Array(e),s=0;s<e;s++)a[s]=arguments[s];return(0,r.QP)((0,t.$)(a))}}},e=>{var a=a=>e(e.s=a);e.O(0,[2760,5422,5627,2875,5789,6020,7358],()=>a(71798)),_N_E=e.O()}]);