"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[9149],{12371:(e,a,t)=>{t.d(a,{AM:()=>l,Wv:()=>d,hl:()=>o});var s=t(72311),r=t(62847),n=t(53809),i=t(98443);let l=n.bL,d=n.l9,o=r.forwardRef((e,a)=>{let{className:t,align:r="center",sideOffset:l=4,...d}=e;return(0,s.jsx)(n.ZL,{children:(0,s.jsx)(n.UC,{ref:a,align:r,sideOffset:l,className:(0,i.cn)("z-50 w-72 rounded-md border bg-popover p-4 text-popover-foreground shadow-md outline-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",t),...d})})});o.displayName=n.UC.displayName},14271:(e,a,t)=>{t.d(a,{F:()=>l});var s=t(72311),r=t(62847),n=t(43436),i=t(98443);let l=r.forwardRef((e,a)=>{let{className:t,children:r,...l}=e;return(0,s.jsxs)(n.bL,{ref:a,className:(0,i.cn)("relative overflow-hidden",t),...l,children:[(0,s.jsx)(n.LM,{className:"h-full w-full rounded-[inherit]",children:r}),(0,s.jsx)(d,{}),(0,s.jsx)(n.OK,{})]})});l.displayName=n.bL.displayName;let d=r.forwardRef((e,a)=>{let{className:t,orientation:r="vertical",...l}=e;return(0,s.jsx)(n.VM,{ref:a,orientation:r,className:(0,i.cn)("flex touch-none select-none transition-colors","vertical"===r&&"h-full w-2.5 border-l border-l-transparent p-[1px]","horizontal"===r&&"h-2.5 flex-col border-t border-t-transparent p-[1px]",t),...l,children:(0,s.jsx)(n.lr,{className:"relative flex-1 rounded-full bg-border"})})});d.displayName=n.VM.displayName},15982:(e,a,t)=>{t.d(a,{r:()=>w});var s=t(72311),r=t(62847),n=t(33788),i=t(80085),l=t(56398),d=t(14271),o=t(14189),c=t(18),u=t(55149),x=t(45836),m=t(12611),h=t(43074),f=t(85863),p=t(44960),v=t(72786),g=t(55627),b=t(12371),j=t(83871),N=t.n(j);function w(){let[e,a]=(0,r.useState)([]),[t,j]=(0,r.useState)(0),[w,y]=(0,r.useState)(!0),[k,E]=(0,r.useState)(!1);(0,r.useEffect)(()=>{A();let e=setInterval(A,3e4);return()=>clearInterval(e)},[]);let A=async()=>{try{let e=await fetch("/api/notifications?page=1&limit=10");if(401===e.status)return void j(0);if(!e.ok)throw Error("Failed to fetch");let t=await e.json();a(t.notifications||[]),j(t.unreadCount||0)}catch(e){console.warn("Error loading notifications:",e),a([]),j(0)}finally{y(!1)}},C=async e=>{try{if(!(await fetch("/api/notifications/".concat(e),{method:"PATCH"})).ok)throw Error("Failed to mark as read");await A()}catch(e){console.error("Error marking notification as read:",e)}},z=e=>{switch(e){case"Course":return(0,s.jsx)(c.A,{className:"h-3 w-3"});case"Session":return(0,s.jsx)(u.A,{className:"h-3 w-3"});case"Payment":return(0,s.jsx)(x.A,{className:"h-3 w-3"});case"Message":return(0,s.jsx)(m.A,{className:"h-3 w-3"});case"Review":return(0,s.jsx)(h.A,{className:"h-3 w-3"});default:return(0,s.jsx)(f.A,{className:"h-3 w-3"})}},R=e=>{switch(e){case"Course":case"Message":return"bg-blue-100 text-blue-800 dark:bg-blue-900/30 dark:text-blue-400";case"Session":return"bg-green-100 text-green-800 dark:bg-green-900/30 dark:text-green-400";case"Payment":return"bg-purple-100 text-purple-800 dark:bg-purple-900/30 dark:text-purple-400";case"Review":return"bg-pink-100 text-pink-800 dark:bg-pink-900/30 dark:text-pink-400";default:return"bg-gray-100 text-gray-800 dark:bg-gray-900/30 dark:text-gray-400"}};return(0,s.jsxs)(b.AM,{open:k,onOpenChange:E,children:[(0,s.jsx)(b.Wv,{asChild:!0,children:(0,s.jsxs)(n.$,{variant:"ghost",size:"sm",className:"relative",children:[(0,s.jsx)(f.A,{className:"h-4 w-4"}),t>0&&(0,s.jsx)(i.E,{variant:"destructive",className:"absolute -top-1 -right-1 h-5 w-5 rounded-full p-0 flex items-center justify-center text-xs",children:t>99?"99+":t})]})}),(0,s.jsx)(b.hl,{className:"w-96 p-0",align:"end",children:(0,s.jsxs)(l.Zp,{className:"border-0 shadow-lg",children:[(0,s.jsxs)(l.aR,{className:"pb-3",children:[(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsx)(l.ZB,{className:"text-lg",children:"Notifications"}),(0,s.jsx)(N(),{href:"/dashboard/notifications",children:(0,s.jsx)(n.$,{variant:"ghost",size:"sm",children:(0,s.jsx)(p.A,{className:"h-4 w-4"})})})]}),t>0&&(0,s.jsxs)(i.E,{variant:"secondary",className:"w-fit",children:[t," unread"]})]}),(0,s.jsx)(l.Wu,{className:"p-0",children:(0,s.jsx)(d.F,{className:"h-96",children:w?(0,s.jsx)("div",{className:"p-4 space-y-3",children:[void 0,void 0,void 0,void 0].map((e,a)=>(0,s.jsxs)("div",{className:"flex items-start gap-3",children:[(0,s.jsx)(o.E,{className:"h-8 w-8 rounded-lg"}),(0,s.jsxs)("div",{className:"flex-1 space-y-2",children:[(0,s.jsx)(o.E,{className:"h-4 w-full"}),(0,s.jsx)(o.E,{className:"h-3 w-2/3"}),(0,s.jsx)(o.E,{className:"h-3 w-1/3"})]})]},a))}):e.length>0?(0,s.jsx)("div",{children:e.slice(0,8).map((e,a)=>(0,s.jsx)("div",{className:"p-4 border-b last:border-b-0 hover:bg-muted/50 transition-colors ".concat(e.isRead?"":"bg-blue-50/50 dark:bg-blue-950/30"),children:(0,s.jsxs)("div",{className:"flex items-start gap-3",children:[(0,s.jsx)("div",{className:"p-1.5 rounded-lg ".concat(R(e.type)),children:z(e.type)}),(0,s.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,s.jsxs)("div",{className:"flex items-center justify-between mb-1",children:[(0,s.jsx)("h4",{className:"text-sm font-medium truncate",children:e.title}),!e.isRead&&(0,s.jsx)(n.$,{variant:"ghost",size:"sm",className:"h-6 w-6 p-0 ml-2",onClick:a=>{a.stopPropagation(),C(e.id)},children:(0,s.jsx)(v.A,{className:"h-3 w-3"})})]}),(0,s.jsx)("p",{className:"text-xs text-muted-foreground line-clamp-2 mb-2",children:e.message}),(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsx)("span",{className:"text-xs text-muted-foreground",children:(0,g.m)(new Date(e.createdAt),{addSuffix:!0})}),(0,s.jsx)(i.E,{variant:"outline",className:"text-xs ".concat(R(e.type)),children:e.type})]})]})]})},e.id))}):(0,s.jsxs)("div",{className:"p-8 text-center",children:[(0,s.jsx)(f.A,{className:"h-12 w-12 text-muted-foreground mx-auto mb-3"}),(0,s.jsx)("p",{className:"text-sm text-muted-foreground",children:"No notifications yet"})]})})}),e.length>0&&(0,s.jsx)("div",{className:"p-4 border-t",children:(0,s.jsx)(N(),{href:"/dashboard/notifications",children:(0,s.jsx)(n.$,{variant:"outline",className:"w-full",size:"sm",children:"View All Notifications"})})})]})})]})}},31912:(e,a,t)=>{t.d(a,{d:()=>c});var s=t(72311),r=t(62847),n=t(33788),i=t(80085),l=t(3060),d=t(83871),o=t.n(d);function c(){let[e,a]=(0,r.useState)(0);(0,r.useEffect)(()=>{t();let e=setInterval(t,1e4);return()=>clearInterval(e)},[]);let t=async()=>{try{let e=await fetch("/api/messages/conversations");if(401===e.status)return void a(0);if(!e.ok)throw Error("Failed to fetch");let t=(await e.json()).reduce((e,a)=>e+a.unreadCount,0);a(t)}catch(e){console.warn("Error loading unread count:",e),a(0)}};return(0,s.jsx)(o(),{href:"/dashboard/messages",children:(0,s.jsxs)(n.$,{variant:"ghost",size:"sm",className:"relative",children:[(0,s.jsx)(l.A,{className:"h-4 w-4"}),e>0&&(0,s.jsx)(i.E,{variant:"destructive",className:"absolute -top-1 -right-1 h-5 w-5 rounded-full p-0 flex items-center justify-center text-xs",children:e>99?"99+":e})]})})}},56398:(e,a,t)=>{t.d(a,{BT:()=>d,Wu:()=>o,ZB:()=>l,Zp:()=>n,aR:()=>i});var s=t(72311);t(62847);var r=t(98443);function n(e){let{className:a,...t}=e;return(0,s.jsx)("div",{"data-slot":"card",className:(0,r.cn)("bg-card text-card-foreground flex flex-col gap-6 rounded-xl border py-6 shadow-sm",a),...t})}function i(e){let{className:a,...t}=e;return(0,s.jsx)("div",{"data-slot":"card-header",className:(0,r.cn)("@container/card-header grid auto-rows-min grid-rows-[auto_auto] items-start gap-1.5 px-6 has-data-[slot=card-action]:grid-cols-[1fr_auto] [.border-b]:pb-6",a),...t})}function l(e){let{className:a,...t}=e;return(0,s.jsx)("div",{"data-slot":"card-title",className:(0,r.cn)("leading-none font-semibold",a),...t})}function d(e){let{className:a,...t}=e;return(0,s.jsx)("div",{"data-slot":"card-description",className:(0,r.cn)("text-muted-foreground text-sm",a),...t})}function o(e){let{className:a,...t}=e;return(0,s.jsx)("div",{"data-slot":"card-content",className:(0,r.cn)("px-6",a),...t})}},80085:(e,a,t)=>{t.d(a,{E:()=>d});var s=t(72311);t(62847);var r=t(37448),n=t(32560),i=t(98443);let l=(0,n.F)("inline-flex items-center justify-center rounded-md border px-2 py-0.5 text-xs font-medium w-fit whitespace-nowrap shrink-0 [&>svg]:size-3 gap-1 [&>svg]:pointer-events-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive transition-[color,box-shadow] overflow-hidden",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground [a&]:hover:bg-primary/90",secondary:"border-transparent bg-secondary text-secondary-foreground [a&]:hover:bg-secondary/90",destructive:"border-transparent bg-destructive text-white [a&]:hover:bg-destructive/90 focus-visible:ring-destructive/20 dark:focus-visible:ring-destructive/40 dark:bg-destructive/60",outline:"text-foreground [a&]:hover:bg-accent [a&]:hover:text-accent-foreground"}},defaultVariants:{variant:"default"}});function d(e){let{className:a,variant:t,asChild:n=!1,...d}=e,o=n?r.DX:"span";return(0,s.jsx)(o,{"data-slot":"badge",className:(0,i.cn)(l({variant:t}),a),...d})}}}]);