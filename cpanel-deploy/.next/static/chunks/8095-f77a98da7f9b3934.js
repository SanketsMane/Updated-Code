"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[8095],{4198:(e,t,s)=>{s.d(t,{T:()=>r});async function r(e){try{return{data:await e,error:null}}catch(e){return{data:null,error:e}}}},5760:(e,t,s)=>{s.d(t,{p:()=>n});var r=s(72311);s(62847);var i=s(98443);function n(e){let{className:t,type:s,...n}=e;return(0,r.jsx)("input",{suppressHydrationWarning:!0,type:s,"data-slot":"input",className:(0,i.cn)("file:text-foreground placeholder:text-muted-foreground selection:bg-primary selection:text-primary-foreground dark:bg-input/30 border-input flex h-9 w-full min-w-0 rounded-md border bg-transparent px-3 py-1 text-base shadow-xs transition-[color,box-shadow] outline-none file:inline-flex file:h-7 file:border-0 file:bg-transparent file:text-sm file:font-medium disabled:pointer-events-none disabled:cursor-not-allowed disabled:opacity-50 md:text-sm","focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px]","aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive",t),...n})}},28354:(e,t,s)=>{s.d(t,{C5:()=>b,MJ:()=>h,Rr:()=>f,eI:()=>p,lR:()=>x,lV:()=>d,zB:()=>u});var r=s(72311),i=s(62847),n=s(37448),a=s(98498),o=s(98443),l=s(36318);let d=a.Op,c=i.createContext({}),u=e=>{let{...t}=e;return(0,r.jsx)(c.Provider,{value:{name:t.name},children:(0,r.jsx)(a.xI,{...t})})},m=()=>{let e=i.useContext(c),t=i.useContext(g),{getFieldState:s}=(0,a.xW)(),r=(0,a.lN)({name:e.name}),n=s(e.name,r);if(!e)throw Error("useFormField should be used within <FormField>");let{id:o}=t;return{id:o,name:e.name,formItemId:"".concat(o,"-form-item"),formDescriptionId:"".concat(o,"-form-item-description"),formMessageId:"".concat(o,"-form-item-message"),...n}},g=i.createContext({});function p(e){let{className:t,...s}=e,n=i.useId();return(0,r.jsx)(g.Provider,{value:{id:n},children:(0,r.jsx)("div",{"data-slot":"form-item",className:(0,o.cn)("grid gap-2",t),...s})})}function x(e){let{className:t,...s}=e,{error:i,formItemId:n}=m();return(0,r.jsx)(l.Label,{"data-slot":"form-label","data-error":!!i,className:(0,o.cn)("data-[error=true]:text-destructive",t),htmlFor:n,...s})}function h(e){let{...t}=e,{error:s,formItemId:i,formDescriptionId:a,formMessageId:o}=m();return(0,r.jsx)(n.DX,{"data-slot":"form-control",id:i,"aria-describedby":s?"".concat(a," ").concat(o):"".concat(a),"aria-invalid":!!s,...t})}function f(e){let{className:t,...s}=e,{formDescriptionId:i}=m();return(0,r.jsx)("p",{"data-slot":"form-description",id:i,className:(0,o.cn)("text-muted-foreground text-sm",t),...s})}function b(e){var t;let{className:s,...i}=e,{error:n,formMessageId:a}=m(),l=n?String(null!=(t=null==n?void 0:n.message)?t:""):i.children;return l?(0,r.jsx)("p",{"data-slot":"form-message",id:a,className:(0,o.cn)("text-destructive text-sm",s),...i,children:l}):null}},33788:(e,t,s)=>{s.d(t,{$:()=>l,r:()=>o});var r=s(72311);s(62847);var i=s(37448),n=s(32560),a=s(98443);let o=(0,n.F)("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium transition-all disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg:not([class*='size-'])]:size-4 shrink-0 [&_svg]:shrink-0 outline-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive",{variants:{variant:{default:"bg-primary text-primary-foreground shadow-xs hover:bg-primary/90",destructive:"bg-destructive text-white shadow-xs hover:bg-destructive/90 focus-visible:ring-destructive/20 dark:focus-visible:ring-destructive/40 dark:bg-destructive/60",outline:"border bg-background shadow-xs hover:bg-accent hover:text-accent-foreground dark:bg-input/30 dark:border-input dark:hover:bg-input/50",secondary:"bg-secondary text-secondary-foreground shadow-xs hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground dark:hover:bg-accent/50",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-9 px-4 py-2 has-[>svg]:px-3",sm:"h-8 rounded-md gap-1.5 px-3 has-[>svg]:px-2.5",lg:"h-10 rounded-md px-6 has-[>svg]:px-4",icon:"size-9"}},defaultVariants:{variant:"default",size:"default"}});function l(e){let{className:t,variant:s,size:n,asChild:l=!1,...d}=e,c=l?i.DX:"button";return(0,r.jsx)(c,{suppressHydrationWarning:!0,"data-slot":"button",className:(0,a.cn)(o({variant:s,size:n,className:t})),...d})}},36318:(e,t,s)=>{s.d(t,{Label:()=>a});var r=s(72311);s(62847);var i=s(97416),n=s(98443);function a(e){let{className:t,...s}=e;return(0,r.jsx)(i.b,{"data-slot":"label",className:(0,n.cn)("flex items-center gap-2 text-sm leading-none font-medium select-none group-data-[disabled=true]:pointer-events-none group-data-[disabled=true]:opacity-50 peer-disabled:cursor-not-allowed peer-disabled:opacity-50",t),...s})}},37822:(e,t,s)=>{s.d(t,{d:()=>C});var r=s(72311),i=s(44301),n=s(12246),a=s(72453);s(62847);var o=s(52227),l=s(32560),d=s(98443);let c=(0,l.F)("inline-flex items-center justify-center gap-2 rounded-md text-sm font-medium hover:bg-muted hover:text-muted-foreground disabled:pointer-events-none disabled:opacity-50 data-[state=on]:bg-accent data-[state=on]:text-accent-foreground [&_svg]:pointer-events-none [&_svg:not([class*='size-'])]:size-4 [&_svg]:shrink-0 focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] outline-none transition-[color,box-shadow] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive whitespace-nowrap",{variants:{variant:{default:"bg-transparent",outline:"border border-input bg-transparent shadow-xs hover:bg-accent hover:text-accent-foreground"},size:{default:"h-9 px-2 min-w-9",sm:"h-8 px-1.5 min-w-8",lg:"h-10 px-2.5 min-w-10"}},defaultVariants:{variant:"default",size:"default"}});function u(e){let{className:t,variant:s,size:i,...n}=e;return(0,r.jsx)(o.b,{"data-slot":"toggle",className:(0,d.cn)(c({variant:s,size:i,className:t})),...n})}var m=s(18941),g=s(282),p=s(1965),x=s(72050),h=s(92375),f=s(62148),b=s(41522),v=s(96386),j=s(12231),z=s(52303),y=s(68008),A=s(23652),N=s(28218),_=s(33788);function E(e){let{editor:t}=e;return t?(0,r.jsx)("div",{className:"border border-input border-t-0 border-x-0  rounded-t-lg p-2 bg-card flex flex-wrap gap-1 items-center",children:(0,r.jsxs)(a.Bc,{children:[(0,r.jsxs)("div",{className:"flex flex-wrap gap-1",children:[(0,r.jsxs)(a.m_,{children:[(0,r.jsx)(a.k$,{asChild:!0,children:(0,r.jsx)(u,{size:"sm",pressed:t.isActive("bold"),onPressedChange:()=>t.chain().focus().toggleBold().run(),className:(0,d.cn)(t.isActive("bold")&&"bg-muted text-muted-foreground"),children:(0,r.jsx)(m.A,{})})}),(0,r.jsx)(a.ZI,{children:"Bold"})]}),(0,r.jsxs)(a.m_,{children:[(0,r.jsx)(a.k$,{asChild:!0,children:(0,r.jsx)(u,{size:"sm",pressed:t.isActive("italic"),onPressedChange:()=>t.chain().focus().toggleItalic().run(),className:(0,d.cn)(t.isActive("italic")&&"bg-muted text-muted-foreground"),children:(0,r.jsx)(g.A,{})})}),(0,r.jsx)(a.ZI,{children:"Italic"})]}),(0,r.jsxs)(a.m_,{children:[(0,r.jsx)(a.k$,{asChild:!0,children:(0,r.jsx)(u,{size:"sm",pressed:t.isActive("strike"),onPressedChange:()=>t.chain().focus().toggleStrike().run(),className:(0,d.cn)(t.isActive("strike")&&"bg-muted text-muted-foreground"),children:(0,r.jsx)(p.A,{})})}),(0,r.jsx)(a.ZI,{children:"Strike"})]}),(0,r.jsxs)(a.m_,{children:[(0,r.jsx)(a.k$,{asChild:!0,children:(0,r.jsx)(u,{size:"sm",pressed:t.isActive("heading",{level:1}),onPressedChange:()=>t.chain().focus().toggleHeading({level:1}).run(),className:(0,d.cn)(t.isActive("heading",{level:1})&&"bg-muted text-muted-foreground"),children:(0,r.jsx)(x.A,{})})}),(0,r.jsx)(a.ZI,{children:"Heading 1"})]}),(0,r.jsxs)(a.m_,{children:[(0,r.jsx)(a.k$,{asChild:!0,children:(0,r.jsx)(u,{size:"sm",pressed:t.isActive("heading",{level:2}),onPressedChange:()=>t.chain().focus().toggleHeading({level:2}).run(),className:(0,d.cn)(t.isActive("heading",{level:2})&&"bg-muted text-muted-foreground"),children:(0,r.jsx)(h.A,{})})}),(0,r.jsx)(a.ZI,{children:"Heading 2"})]}),(0,r.jsxs)(a.m_,{children:[(0,r.jsx)(a.k$,{asChild:!0,children:(0,r.jsx)(u,{size:"sm",pressed:t.isActive("heading",{level:3}),onPressedChange:()=>t.chain().focus().toggleHeading({level:3}).run(),className:(0,d.cn)(t.isActive("heading",{level:3})&&"bg-muted text-muted-foreground"),children:(0,r.jsx)(f.A,{})})}),(0,r.jsx)(a.ZI,{children:"Heading 3"})]}),(0,r.jsxs)(a.m_,{children:[(0,r.jsx)(a.k$,{asChild:!0,children:(0,r.jsx)(u,{size:"sm",pressed:t.isActive("bulletList"),onPressedChange:()=>t.chain().focus().toggleBulletList().run(),className:(0,d.cn)(t.isActive("bulletList")&&"bg-muted text-muted-foreground"),children:(0,r.jsx)(b.A,{})})}),(0,r.jsx)(a.ZI,{children:"Bullet List"})]}),(0,r.jsxs)(a.m_,{children:[(0,r.jsx)(a.k$,{asChild:!0,children:(0,r.jsx)(u,{size:"sm",pressed:t.isActive("orderedList"),onPressedChange:()=>t.chain().focus().toggleOrderedList().run(),className:(0,d.cn)(t.isActive("orderedList")&&"bg-muted text-muted-foreground"),children:(0,r.jsx)(v.A,{})})}),(0,r.jsx)(a.ZI,{children:"Ordered List"})]})]}),(0,r.jsx)("div",{className:"w-px h-6 bg-border mx-2"}),(0,r.jsxs)("div",{className:"flex flex-wrap gap-1",children:[(0,r.jsxs)(a.m_,{children:[(0,r.jsx)(a.k$,{asChild:!0,children:(0,r.jsx)(u,{size:"sm",pressed:t.isActive({textAlign:"left"}),onPressedChange:()=>t.chain().focus().setTextAlign("left").run(),className:(0,d.cn)(t.isActive({textAlign:"left"})&&"bg-muted text-muted-foreground"),children:(0,r.jsx)(j.A,{})})}),(0,r.jsx)(a.ZI,{children:"Align Left"})]}),(0,r.jsxs)(a.m_,{children:[(0,r.jsx)(a.k$,{asChild:!0,children:(0,r.jsx)(u,{size:"sm",pressed:t.isActive({textAlign:"center"}),onPressedChange:()=>t.chain().focus().setTextAlign("center").run(),className:(0,d.cn)(t.isActive({textAlign:"center"})&&"bg-muted text-muted-foreground"),children:(0,r.jsx)(z.A,{})})}),(0,r.jsx)(a.ZI,{children:"Align Center"})]}),(0,r.jsxs)(a.m_,{children:[(0,r.jsx)(a.k$,{asChild:!0,children:(0,r.jsx)(u,{size:"sm",pressed:t.isActive({textAlign:"right"}),onPressedChange:()=>t.chain().focus().setTextAlign("right").run(),className:(0,d.cn)(t.isActive({textAlign:"right"})&&"bg-muted text-muted-foreground"),children:(0,r.jsx)(y.A,{})})}),(0,r.jsx)(a.ZI,{children:"Align Right"})]})]}),(0,r.jsx)("div",{className:"w-px h-6 bg-border mx-2"}),(0,r.jsxs)("div",{className:"flex flex-wrap gap-1",children:[(0,r.jsxs)(a.m_,{children:[(0,r.jsx)(a.k$,{asChild:!0,children:(0,r.jsx)(_.$,{size:"sm",variant:"ghost",type:"button",onClick:()=>t.chain().focus().undo().run(),disabled:!t.can().undo(),children:(0,r.jsx)(A.A,{})})}),(0,r.jsx)(a.ZI,{children:"Undo"})]}),(0,r.jsxs)(a.m_,{children:[(0,r.jsx)(a.k$,{asChild:!0,children:(0,r.jsx)(_.$,{size:"sm",variant:"ghost",type:"button",onClick:()=>t.chain().focus().redo().run(),disabled:!t.can().redo(),children:(0,r.jsx)(N.A,{})})}),(0,r.jsx)(a.ZI,{children:"Redo"})]})]})]})}):null}var w=s(86561);function C(e){let{field:t}=e,s=(0,i.hG)({extensions:[n.A,w.A.configure({types:["heading","paragraph"]})],editorProps:{attributes:{class:"min-h-[300px] p-4 focus:outline-none prose prose-sm sm:prose lg:prose-lg xl:prose-xl dark:prose-invert !w-full !max-w-none"}},immediatelyRender:!1,onUpdate:e=>{let{editor:s}=e;t.onChange(JSON.stringify(s.getJSON()))},content:t.value?JSON.parse(t.value):"<p>Hello World \uD83D\uDE80</p>"});return(0,r.jsxs)("div",{className:"w-full border border-input rounded-lg overflow-hidden dark:bg-input/30",children:[(0,r.jsx)(E,{editor:s}),(0,r.jsx)(i.$Z,{editor:s})]})}},56398:(e,t,s)=>{s.d(t,{BT:()=>l,Wu:()=>d,ZB:()=>o,Zp:()=>n,aR:()=>a});var r=s(72311);s(62847);var i=s(98443);function n(e){let{className:t,...s}=e;return(0,r.jsx)("div",{"data-slot":"card",className:(0,i.cn)("bg-card text-card-foreground flex flex-col gap-6 rounded-xl border py-6 shadow-sm",t),...s})}function a(e){let{className:t,...s}=e;return(0,r.jsx)("div",{"data-slot":"card-header",className:(0,i.cn)("@container/card-header grid auto-rows-min grid-rows-[auto_auto] items-start gap-1.5 px-6 has-data-[slot=card-action]:grid-cols-[1fr_auto] [.border-b]:pb-6",t),...s})}function o(e){let{className:t,...s}=e;return(0,r.jsx)("div",{"data-slot":"card-title",className:(0,i.cn)("leading-none font-semibold",t),...s})}function l(e){let{className:t,...s}=e;return(0,r.jsx)("div",{"data-slot":"card-description",className:(0,i.cn)("text-muted-foreground text-sm",t),...s})}function d(e){let{className:t,...s}=e;return(0,r.jsx)("div",{"data-slot":"card-content",className:(0,i.cn)("px-6",t),...s})}},66209:(e,t,s)=>{s.d(t,{HH:()=>c,Ik:()=>n,Lz:()=>d,Oo:()=>a,Ps:()=>i,eo:()=>o,f_:()=>l,qz:()=>u});var r=s(27592);let i=["Beginner","Intermediate","Advanced"],n=["Draft","Published","Archived"],a=["Development","Business","Finance","IT & Software","Office Productivity","Personal Development","Design","Marketing","Health & Fitness","Music","Teaching & Academics","Language Learning","Photography","Lifestyle"],o=["English","Spanish","French","German","Italian","Portuguese","Russian","Chinese","Japanese","Korean","Arabic","Hindi","Other"],l=r.z.object({title:r.z.string().min(3,{message:"Title must be at least 3 characters long"}).max(100,{message:"Title must be at most 100 characters long"}),description:r.z.string().min(3,{message:"Description must be at least 3 characters long"}),fileKey:r.z.string().min(1,{message:"File is required"}),price:r.z.coerce.number().min(1,{message:"Price must be a positive number"}),duration:r.z.coerce.number().min(1,{message:"Duration must be at least 1 hour"}).max(500,{message:"Duration must be at most 500 hours"}),level:r.z.enum(i,{message:"Level is required"}),category:r.z.enum(a,{message:"Category is required"}),smallDescription:r.z.string().min(3,{message:"Small Description must be at least 3 characters long"}).max(200,{message:"Small Description must be at most 200 characters long"}),slug:r.z.string().min(3,{message:"Slug must be at least 3 characters long"}),status:r.z.enum(n,{message:"Status is required"}),language:r.z.enum(o).optional(),tags:r.z.array(r.z.string()).optional(),prerequisites:r.z.string().optional(),learningOutcomes:r.z.array(r.z.string()).optional(),isFeatured:r.z.boolean().default(!1),discountPrice:r.z.coerce.number().optional(),discountExpiry:r.z.date().optional()}),d=r.z.object({bio:r.z.string().min(10,{message:"Bio must be at least 10 characters"}).max(1e3,{message:"Bio must be less than 1000 characters"}),expertise:r.z.array(r.z.string()).min(1,{message:"At least one expertise area is required"}),languages:r.z.array(r.z.string()).min(1,{message:"At least one language is required"}),hourlyRate:r.z.coerce.number().min(5,{message:"Hourly rate must be at least $5"}).optional(),timezone:r.z.string().optional(),website:r.z.string().url().optional().or(r.z.literal("")),linkedin:r.z.string().url().optional().or(r.z.literal("")),twitter:r.z.string().url().optional().or(r.z.literal("")),youtube:r.z.string().url().optional().or(r.z.literal("")),qualifications:r.z.array(r.z.string()).optional(),certifications:r.z.array(r.z.string()).optional()});r.z.object({rating:r.z.number().min(1,{message:"Rating must be at least 1"}).max(5,{message:"Rating must be at most 5"}),title:r.z.string().min(3,{message:"Title must be at least 3 characters"}).max(100,{message:"Title must be less than 100 characters"}).optional(),comment:r.z.string().min(10,{message:"Comment must be at least 10 characters"}).max(500,{message:"Comment must be less than 500 characters"})}),r.z.object({teacherId:r.z.string().min(1,{message:"Teacher is required"}),title:r.z.string().min(3,{message:"Title must be at least 3 characters"}),description:r.z.string().optional(),subject:r.z.string().optional(),scheduledAt:r.z.date({message:"Scheduled time is required"}),duration:r.z.coerce.number().min(15,{message:"Duration must be at least 15 minutes"}).max(480,{message:"Duration must be at most 8 hours"}),price:r.z.coerce.number().min(5,{message:"Price must be at least $5"})});let c=r.z.object({name:r.z.string().min(3,{message:"Name must be at least 3 characters long"}),courseId:r.z.string().uuid({message:"Invalid course id"})}),u=r.z.object({name:r.z.string().min(3,{message:"Name must be at least 3 characters long"}),chapterId:r.z.string().uuid({message:"Invalid chapter ID"}),courseId:r.z.string().uuid({message:"Invalid course ID"}),description:r.z.string().min(3,{message:"Description must be at least 3 characters long"}).optional(),videoKey:r.z.string().optional(),thumbnailKey:r.z.string().optional()})},72453:(e,t,s)=>{s.d(t,{Bc:()=>a,ZI:()=>d,k$:()=>l,m_:()=>o});var r=s(72311);s(62847);var i=s(74129),n=s(98443);function a(e){let{delayDuration:t=0,...s}=e;return(0,r.jsx)(i.Kq,{"data-slot":"tooltip-provider",delayDuration:t,...s})}function o(e){let{...t}=e;return(0,r.jsx)(a,{children:(0,r.jsx)(i.bL,{"data-slot":"tooltip",...t})})}function l(e){let{...t}=e;return(0,r.jsx)(i.l9,{"data-slot":"tooltip-trigger",...t})}function d(e){let{className:t,sideOffset:s=0,children:a,...o}=e;return(0,r.jsx)(i.ZL,{children:(0,r.jsxs)(i.UC,{"data-slot":"tooltip-content",sideOffset:s,className:(0,n.cn)("bg-primary text-primary-foreground animate-in fade-in-0 zoom-in-95 data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=closed]:zoom-out-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 z-50 w-fit origin-(--radix-tooltip-content-transform-origin) rounded-md px-3 py-1.5 text-xs text-balance",t),...o,children:[a,(0,r.jsx)(i.i3,{className:"bg-primary fill-primary z-50 size-2.5 translate-y-[calc(-50%_-_2px)] rotate-45 rounded-[2px]"})]})})}},84041:(e,t,s)=>{s.d(t,{d:()=>z});var r=s(72311),i=s(62847),n=s(89811),a=s(56398),o=s(98443),l=s(30299),d=s(17947),c=s(88824),u=s(19258),m=s(33788),g=s(37348);function p(e){let{isDragActive:t}=e;return(0,r.jsxs)("div",{className:"text-center",children:[(0,r.jsx)("div",{className:"flex items-center mx-auto justify-center size-12 rounded-full bg-muted mb-4",children:(0,r.jsx)(l.A,{className:(0,o.cn)("size-6 text-muted-foreground",t&&"text-primary")})}),(0,r.jsxs)("p",{className:"text-base font-semibold text-foreground",children:["Drop your files here or"," ",(0,r.jsx)("span",{className:"text-primary font-bold cursor-pointer",children:"click to upload"})]}),(0,r.jsx)(m.$,{type:"button",className:"mt-4",children:"Select File"})]})}function x(){return(0,r.jsxs)("div",{className:" text-center",children:[(0,r.jsx)("div",{className:"flex items-center mx-auto justify-center size-12 rounded-full bg-destructive/30 mb-4",children:(0,r.jsx)(d.A,{className:(0,o.cn)("size-6 text-destructive")})}),(0,r.jsx)("p",{className:"text-base font-semibold",children:"Upload Failed"}),(0,r.jsx)("p",{className:"text-xs mt-1 text-muted-foreground",children:"Something went wrong"}),(0,r.jsx)(m.$,{className:"mt-4",type:"button",children:"Retry File Selection"})]})}function h(e){let{previewUrl:t,isDeleting:s,handleRemoveFile:i,fileType:n}=e;return(0,r.jsxs)("div",{className:"relative group w-full h-full flex items-center justify-center",children:["video"===n?(0,r.jsx)("video",{src:t,controls:!0,className:"rounded-md w-full h-full"}):(0,r.jsx)(g.default,{src:t,alt:"Uploaded File",fill:!0,className:"object-contain p-2"}),(0,r.jsx)(m.$,{variant:"destructive",size:"icon",className:(0,o.cn)("absolute top-4 right-4"),onClick:i,disabled:s,children:s?(0,r.jsx)(c.A,{className:"size-4 animate-spin"}):(0,r.jsx)(u.A,{className:"size-4"})})]})}function f(e){let{progress:t,file:s}=e;return(0,r.jsxs)("div",{className:"text-center flex justify-center items-center flex-col",children:[(0,r.jsx)("p",{children:t}),(0,r.jsx)("p",{className:"mt-2 text-sm font-medium text-foreground",children:"Uploading..."}),(0,r.jsx)("p",{className:"mt-1 text-xs text-muted-foreground truncate max-w-xs",children:s.name})]})}var b=s(94345),v=s(23854),j=s(94165);function z(e){let{onChange:t,value:s,fileTypeAccepted:l}=e,d=(0,j.e)(s||""),[c,u]=(0,i.useState)({error:!1,file:null,id:null,uploading:!1,progress:0,isDeleting:!1,fileType:l,key:s,objectUrl:s?d:void 0}),m=(0,i.useCallback)(async e=>{u(e=>({...e,uploading:!0,progress:0}));try{if("image"===l){let s=new FormData;s.append("file",e);let r=await fetch("/api/upload/proxy",{method:"POST",body:s});if(!r.ok){let e=await r.text();throw Error("Upload failed: ".concat(r.status," ").concat(r.statusText," - ").concat(e))}let{key:i}=await r.json();u(e=>({...e,progress:100,uploading:!1,key:i})),null==t||t(i),b.oR.success("File uploaded successfully");return}let s=await fetch("/api/s3/upload",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({fileName:e.name,contentType:e.type,size:e.size,isImage:!1}),redirect:"manual"});if("opaqueredirect"===s.type||307===s.status||302===s.status){b.oR.error("Authentication session expired. Please refresh the page."),u(e=>({...e,uploading:!1,error:!0}));return}if(!s.ok){let e=await s.text(),t="Failed to get presigned URL";try{t=JSON.parse(e).error||t}catch(s){t=e||t}b.oR.error(t),u(e=>({...e,uploading:!1,progress:0,error:!0}));return}let{presignedUrl:r,key:i}=await s.json();await new Promise((s,n)=>{let a=new XMLHttpRequest;a.upload.onprogress=e=>{if(e.lengthComputable){let t=e.loaded/e.total*100;u(e=>({...e,progress:Math.round(t)}))}},a.onload=()=>{200===a.status||204===a.status?(u(e=>({...e,progress:100,uploading:!1,key:i})),null==t||t(i),b.oR.success("File uploaded succesfully"),s()):n(Error("Upload failed: ".concat(a.status," ").concat(a.statusText)))},a.onerror=()=>{n(Error("Upload failed"))},a.open("PUT",r),a.setRequestHeader("Content-Type",e.type),a.send(e)})}catch(e){console.error("Upload error details:",e),b.oR.error(e.message||"Something went wrong during upload"),u(e=>({...e,uploading:!1,progress:0,error:!0}))}},[l,t]),g=(0,i.useCallback)(e=>{if(e.length>0){let t=e[0];c.objectUrl&&!c.objectUrl.startsWith("http")&&URL.revokeObjectURL(c.objectUrl),u({file:t,uploading:!1,progress:0,objectUrl:URL.createObjectURL(t),error:!1,id:(0,v.A)(),isDeleting:!1,fileType:l}),m(t)}},[c.objectUrl,m,l]);async function z(){if(!c.isDeleting&&c.objectUrl)try{if(u(e=>({...e,isDeleting:!0})),!(await fetch("/api/s3/delete",{method:"DELETE",headers:{"Content-Type":"application/json"},body:JSON.stringify({key:c.key})})).ok){b.oR.error("Failed to remove file from storage"),u(e=>({...e,isDeleting:!0,error:!0}));return}c.objectUrl&&!c.objectUrl.startsWith("http")&&URL.revokeObjectURL(c.objectUrl),null==t||t(""),u(()=>({file:null,uploading:!1,progress:0,objectUrl:void 0,error:!1,fileType:l,id:null,isDeleting:!1})),b.oR.success("File removed successfully")}catch(e){b.oR.error("Error removing file. please try again"),u(e=>({...e,isDeleting:!1,error:!0}))}}(0,i.useEffect)(()=>()=>{c.objectUrl&&!c.objectUrl.startsWith("http")&&URL.revokeObjectURL(c.objectUrl)},[c.objectUrl]);let{getRootProps:y,getInputProps:A,isDragActive:N}=(0,n.VB)({onDrop:g,accept:"video"===l?{"video/*":[]}:{"image/*":[]},maxFiles:1,multiple:!1,maxSize:"image"===l?5242880:524288e4,onDropRejected:function(e){if(e.length){let t=e.find(e=>"too-many-files"===e.errors[0].code);e.find(e=>"file-too-large"===e.errors[0].code)&&b.oR.error("File Size exceeds the limit"),t&&b.oR.error("Too many files selected, max is 1")}},disabled:c.uploading||!!c.objectUrl});return(0,r.jsx)(a.Zp,{...y(),className:(0,o.cn)("relative border-2 border-dashed transition-colors duration-200 ease-in-out w-full h-64",N?"border-primary bg-primary/10 border-solid":"border-border hover:border-primary"),children:(0,r.jsxs)(a.Wu,{className:"flex items-center justify-center h-full w-full p-4",children:[(0,r.jsx)("input",{...A()}),c.uploading?(0,r.jsx)(f,{file:c.file,progress:c.progress}):c.error?(0,r.jsx)(x,{}):c.objectUrl?(0,r.jsx)(h,{handleRemoveFile:z,previewUrl:c.objectUrl,isDeleting:c.isDeleting,fileType:c.fileType}):(0,r.jsx)(p,{isDragActive:N})]})})}},94165:(e,t,s)=>{s.d(t,{e:()=>o});var r=s(7677),i=s(27592),n=s(81247);let a=(0,r.w)({server:{DATABASE_URL:i.z.string().url(),BETTER_AUTH_SECRET:i.z.string().min(1),BETTER_AUTH_URL:i.z.string().url(),AUTH_GITHUB_CLIENT_ID:i.z.string().min(1),AUTH_GITHUB_SECRET:i.z.string().min(1),EMAIL_SERVICE:i.z.string().optional(),EMAIL_HOST:i.z.string().optional(),EMAIL_PORT:i.z.string().optional(),EMAIL_SECURE:i.z.string().optional(),EMAIL_USER:i.z.string().optional(),EMAIL_PASS:i.z.string().optional(),EMAIL_FROM:i.z.string().optional(),AWS_ACCESS_KEY_ID:i.z.string().min(1),AWS_SECRET_ACCESS_KEY:i.z.string().min(1),AWS_ENDPOINT_URL_S3:i.z.string().min(1),AWS_ENDPOINT_URL_IAM:i.z.string().min(1),AWS_REGION:i.z.string().min(1),STRIPE_SECRET_KEY:i.z.string().min(1),STRIPE_WEBHOOK_SECRET:i.z.string().min(1)},skipValidation:!!n.env.SKIP_ENV_VALIDATION,client:{NEXT_PUBLIC_S3_BUCKET_NAME_IMAGES:i.z.string().min(1)},experimental__runtimeEnv:{NEXT_PUBLIC_S3_BUCKET_NAME_IMAGES:"placeholder-bucket"}});function o(e){return e?e.startsWith("http")?e:"https://".concat(a.NEXT_PUBLIC_S3_BUCKET_NAME_IMAGES,".fly.storage.tigris.dev/").concat(e):""}},98443:(e,t,s)=>{s.d(t,{cn:()=>n});var r=s(37246),i=s(18327);function n(){for(var e=arguments.length,t=Array(e),s=0;s<e;s++)t[s]=arguments[s];return(0,i.QP)((0,r.$)(t))}}}]);